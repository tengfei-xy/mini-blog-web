<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="../../../css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="../../../css/prism.min.css"/><link rel="stylesheet" type="text/css" href="../../../css/katex.min.css"/><link rel="stylesheet" type="text/css" href="../../../css/wolai.css"/><title>Centos7部署mpp - wolai 笔记</title><link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; viewBox=&apos;0 0 800 800&apos;%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fff;%7D%3C/style%3E%3C/defs%3E%3Cg%3E%3Cpath class=&apos;cls-1&apos; d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Z&apos;/%3E%3Cpath d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Zm4.72,88.9H185.2L172.42,89c-32.78.62-43.68,3.24-54.71,9.14a45.84,45.84,0,0,0-19.54,19.54c-6.61,12.36-9.11,24.55-9.27,67.49V614.8L89,627.58c.62,32.78,3.24,43.68,9.14,54.71a45.84,45.84,0,0,0,19.54,19.54c12.36,6.61,24.55,9.11,67.49,9.27H610.08c46.79,0,59.41-2.44,72.21-9.28a45.84,45.84,0,0,0,19.54-19.54c6.61-12.36,9.11-24.55,9.27-67.49V189.92c0-46.79-2.44-59.41-9.28-72.21a45.84,45.84,0,0,0-19.54-19.54C669.93,91.56,657.74,89.06,614.8,88.9ZM233.33,493.33A73.34,73.34,0,1,1,160,566.67,73.35,73.35,0,0,1,233.33,493.33Z&apos;/%3E%3C/g%3E%3C/svg%3E"></link></head><body class="full-width small-font less-lead"><header><div class="image"></div><div class="title"><div class="banner"><div class="icon"></div></div><div data-title="Centos7部署mpp" class="main-title"></div></div></header><article><h1 id="3Beh4FvzpihCdKV2RcEoaP" class="wolai-block"><span class="inline-wrap">GBASE 8a MPP Cluster<span class="jill"></span>集群部署</span></h1><div id="uNGiPJkdW3EzgoiE1DUpbp" class="wolai-block wolai-text"><div><span class="inline-wrap">部署参考文档：</span><span class="inline-wrap"><a href="https://juejin.cn/post/7014696094894391327"><span>https://juejin.cn/post/7014696094894391327</span></a></span></div></div><h2 id="jT24hMWCWQsfbED2w8BrkN" class="wolai-block"><span class="inline-wrap">部署说明</span></h2><div id="2MzwVK9z7tWcuTXUKfnvt9" class="wolai-block wolai-text"><div><span class="inline-wrap">硬件配置要求</span></div></div><div id="t4RRhjcU9zdXtSAGAMVA52" class="wolai-block wolai-simple-table"><table><thead><tr><th style="width: 370px"><span class="inline-wrap">硬件</span></th><th style="width: 370px"><span class="inline-wrap">配置</span></th></tr></thead><tbody><tr><td><span class="inline-wrap">CPU</span></td><td><span class="inline-wrap">最低配置:1×2<span class="jill"></span>核 2.0GHz</span><span class="inline-wrap">
</span><span class="inline-wrap">推荐配置:高于<span class="jill"></span>2×4<span class="jill"></span>核 2.0GHz</span></td></tr><tr><td><span class="inline-wrap">内存</span></td><td><span class="inline-wrap">最低配置:32GB</span><span class="inline-wrap">
</span><span class="inline-wrap">推荐配置:128GB</span></td></tr><tr><td><span class="inline-wrap">网卡</span></td><td><span class="inline-wrap">业务平面使用 1GE</span><span class="inline-wrap">
</span><span class="inline-wrap">数据平面使用 10GE</span></td></tr><tr><td><span class="inline-wrap">光驱</span></td><td><span class="inline-wrap">CD-ROM</span></td></tr><tr><td><span class="inline-wrap">硬盘</span></td><td><span class="inline-wrap">最低配置:SATA 7200 rpm 100GB</span><span class="inline-wrap">
</span><span class="inline-wrap">推荐配置:SAS 10k rpm 1TB</span></td></tr><tr><td><span class="inline-wrap">磁盘 RAID 配置</span></td><td><span class="inline-wrap">管理节点:操作系统所在盘独占一个<span class="jill"></span>RAID<span class="jill"></span>组，且<span class="jill"></span>RAID<span class="jill"></span>组级别 为 RAID1;非操作系统所在盘独占一个 RAID 组，且 RAID 组级别为<span class="jill"></span>RAID5。</span><span class="inline-wrap">
</span><span class="inline-wrap">数据节点:操作系统所在盘独占一个<span class="jill"></span>RAID<span class="jill"></span>组，且<span class="jill"></span>RAID<span class="jill"></span>组级别 为 RAID1;非操作系统所在盘配置 RAID5。</span></td></tr><tr><td><span class="inline-wrap">磁盘空间</span></td><td><span class="inline-wrap">管理节点:操作系统盘≥600GB，每个数据库所在磁盘≥600GB。</span><span class="inline-wrap">
</span><span class="inline-wrap">数据节点:操作系统盘≥600GB，每个非操作系统盘≥600GB。</span></td></tr></tbody></table></div><div id="pqTmhosos4RBDPZDmGZqWs" class="wolai-block wolai-text"><div><span class="inline-wrap">支持操作系统</span></div></div><div id="iJHf6UHPobXo77q8oAFAkY" class="wolai-block wolai-simple-table"><table><thead><tr><th style="width: 246.66666666666666px"><span class="inline-wrap">操作系统名称</span></th><th style="width: 246.66666666666666px"><span class="inline-wrap">版本</span></th><th style="width: 246.66666666666666px"><span class="inline-wrap">结构</span></th></tr></thead><tbody><tr><td><span class="inline-wrap">Red Hat Linux</span></td><td><span class="inline-wrap">7.x</span></td><td><span class="inline-wrap">X86_64</span></td></tr><tr><td><span class="inline-wrap">CentOS</span></td><td><span class="inline-wrap">7.x</span></td><td><span class="inline-wrap">X86_64</span></td></tr><tr><td><span class="inline-wrap">SUSE</span></td><td><span class="inline-wrap">11-12</span></td><td><span class="inline-wrap">X86_64</span></td></tr><tr><td><span class="inline-wrap">中标麒麟</span></td><td><span class="inline-wrap">6.0</span></td><td><span class="inline-wrap">X86_64</span></td></tr></tbody></table></div><div id="cJNRggHfWrYZGRg91PiLNB" class="wolai-block wolai-text"><div><span class="inline-wrap">两种部署方式</span></div></div><div id="nqQax65eKtcWcsKsTtWi7F" class="wolai-block wolai-text"><div><span class="inline-wrap">一、coordinator 节点与 data 节点分别部署在不同服务器上:</span></div></div><ol class="wolai-block"><li id="bTM3DGayUY2WJsi1DJJGjN"><div class="marker"></div><span class="inline-wrap">管理集群的节点单独部署在管理服务器上。</span></li><li id="vsg6mgjiqVNSNvbUaanTuh"><div class="marker"></div><span class="inline-wrap">数据集群的节点独立部署在数据服务器上，data 节点可跨网段部署，只要保证网络通信质量即可。</span></li><li id="pnjvetjusNbrQkJQ6Ka4Py"><div class="marker"></div><span class="inline-wrap">根据集群规模和业务并发量，Coordinator 节点个数建议 3~11 的奇数个。</span><span class="inline-wrap">
</span><span class="inline-wrap">单个 coordinator 节点建议的业务并发量不超过 300</span><span class="inline-wrap">
</span><span class="inline-wrap">小规模集群(data 节点数&lt;=10)设置 3 个 coordinator 节点</span><span class="inline-wrap">
</span><span class="inline-wrap">中等规模集 群(data 节点数在[10,30]之间)设置 5<span class="jill"></span>个 coordinator 节点</span><span class="inline-wrap">
</span><span class="inline-wrap">大规模集群(data 节点数在[30,100]之间)设置 7 或 9 个 coordinator 节点</span><span class="inline-wrap">
</span><span class="inline-wrap">超大规模集群(data 节点数&gt;=100)设置 9 或 11 个 coordinator 节点</span></li></ol><div id="poXn9gsQJbwAyRK45V8iyb" class="wolai-block wolai-text"><div><span class="inline-wrap">二、coordinator 节点和 data 节点共同部署在同一个服务器上:</span></div></div><ol class="wolai-block"><li id="7QCCqhhXMUhB9riNmbQZw2"><div class="marker"></div><span class="inline-wrap">管理集群节点和数据集群的节点部署在同一个服务器上</span></li><li id="tK7Kga7VrkRU9XHCYQ4SCs"><div class="marker"></div><span class="inline-wrap">小规模集群可采用方案 2 的方式部署，中等规模及以上的集群建议 coordinator 节点和 data 节点分开部署</span></li></ol><div id="emxsweyDjzS4hJMZaXHNPu" class="wolai-block wolai-text"><div><span class="inline-wrap">端口说明</span></div></div><div id="wvPbSpriWwG92qsrfVxYXg" class="wolai-block wolai-simple-table"><table><thead><tr><th style="width: 148px"><span class="inline-wrap">所属段</span></th><th style="width: 148px"><span class="inline-wrap">端口名称</span></th><th style="width: 148px"><span class="inline-wrap">含义</span></th><th style="width: 148px"><span class="inline-wrap">默认值</span></th><th style="width: 148px"><span class="inline-wrap">修改方式</span></th></tr></thead><tbody><tr><td><span class="inline-wrap">gclusterd</span></td><td><span class="inline-wrap">port</span></td><td><span class="inline-wrap">集群对外提供服务端口</span></td><td><span class="inline-wrap">5258</span></td><td><span class="inline-wrap">需要同对外提供服务端口 值一致, 要求所有节点一致</span></td></tr><tr><td><span class="inline-wrap">gbased</span></td><td><span class="inline-wrap">port</span></td><td><span class="inline-wrap">单机对外连接端口</span></td><td><span class="inline-wrap">5050</span></td><td><span class="inline-wrap">gnode 对外接口，需要和 gcluster_gnode_port 一致, 要求所有节点一致</span></td></tr><tr><td><span class="inline-wrap">无</span></td><td><span class="inline-wrap">recover_monit_port</span></td><td><span class="inline-wrap">监控收集信息端口</span></td><td><span class="inline-wrap">6268</span></td><td><span class="inline-wrap">要求所有节点一致</span></td></tr><tr><td><span class="inline-wrap">无</span></td><td><span class="inline-wrap">SERVER_PORT</span></td><td><span class="inline-wrap">同步连接端口</span></td><td><span class="inline-wrap">5288</span></td><td><span class="inline-wrap">要求所有节点一致</span></td></tr><tr><td><span class="inline-wrap">config/port</span></td><td><span class="inline-wrap">port</span></td><td><span class="inline-wrap">日志收集工具对外服务端口</span></td><td><span class="inline-wrap">6957</span></td><td><span class="inline-wrap">要求所有节点一致</span></td></tr><tr><td><span class="inline-wrap">config/port</span></td><td><span class="inline-wrap">port</span></td><td><span class="inline-wrap">日志收集工具对外服务端口</span></td><td><span class="inline-wrap">6957</span></td><td><span class="inline-wrap">要求所有节点一致</span></td></tr><tr><td><span class="inline-wrap">gcware</span></td><td><span class="inline-wrap">gcluster_port</span></td><td><span class="inline-wrap">检测 gclusterd<span class="jill"></span>状态端口</span></td><td><span class="inline-wrap">5288</span></td><td><span class="inline-wrap">要求和 gcluster 对外服务端口一致</span></td></tr><tr><td><span class="inline-wrap">gcware</span></td><td><span class="inline-wrap">gnode_port</span></td><td><span class="inline-wrap">检测 gbased<span class="jill"></span>状态端口</span></td><td><span class="inline-wrap">5050</span></td><td><span class="inline-wrap">要求和 gnode 对外服务端口一致</span></td></tr><tr><td><span class="inline-wrap">gcware</span></td><td><span class="inline-wrap">syncserver_port</span></td><td><span class="inline-wrap">检测 syncserver<span class="jill"></span>状态端口</span></td><td><span class="inline-wrap">5288</span></td><td><span class="inline-wrap">要求和 synctool 配置端口一致</span></td></tr><tr><td><span class="inline-wrap">gcware</span></td><td><span class="inline-wrap">node_ssh_port</span></td><td><span class="inline-wrap">检测系统是否在线端口</span></td><td><span class="inline-wrap">22</span></td><td><span class="inline-wrap">需要和 ssh 服务端口配置一致</span></td></tr><tr><td><span class="inline-wrap">gcware</span></td><td><span class="inline-wrap">gcware_client</span></td><td><span class="inline-wrap">gcware<span class="jill"></span>节点通讯</span></td><td><span class="inline-wrap">5918</span></td><td><span class="inline-wrap">要求所有 gcware 一致</span></td></tr><tr><td><span class="inline-wrap">gcware</span></td><td><span class="inline-wrap">gcware_server</span></td><td><span class="inline-wrap">外部连接 gcware<span class="jill"></span>节点</span></td><td><span class="inline-wrap">5919</span></td><td><span class="inline-wrap">要求所有 gcware 一致</span></td></tr></tbody></table></div><h2 id="4AVSsgNBwsHsznodF2j84j" class="wolai-block"><span class="inline-wrap">初始化</span></h2><div id="pUyeBTCSF4L3F5WsBuSUyx" class="wolai-block wolai-text"><div><span class="inline-wrap">RHEL7<span class="jill"></span>安装依赖</span></div></div><code-block id="eGxpYY9wGVZg2CBikQP339" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all">yum install <span class="token operator">-</span>y libstdc<span class="token operator">++</span> cyrus<span class="token operator">-</span>sasl<span class="token operator">-</span>lib zlib nspr libidn libuuid ncurses<span class="token operator">-</span>libs nss<span class="token operator">-</span>util openldap libgcc nss glibc nss<span class="token operator">-</span>softokn<span class="token operator">-</span>freebl killall net<span class="token operator">-</span>tools ntp bzip2</pre></div></code-block><div id="wKLSggfYsJbv85n7pb4ocN" class="wolai-block wolai-text"><div><span class="inline-wrap">关闭防火墙</span></div></div><code-block id="6N1VRcQh5PYLk7nEyAsbW6" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all">systemctl stop firewalld
systemctl disable firewalld</pre></div></code-block><div id="8HGMVRGrN7sgYGAyzjrDdB" class="wolai-block wolai-text"><div><span class="inline-wrap">关闭<span class="jill"></span>SELINUX</span></div></div><code-block id="6ZUeJi6fuSAMKe18tF2brY" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all">setenforce <span class="token number">0</span>
sed <span class="token operator">-</span>i <span class="token string">'s/=enforcing/=disabled/g'</span>  <span class="token operator">/</span>etc<span class="token operator">/</span>selinux<span class="token operator">/</span>config</pre></div></code-block><div id="hT4eR9e4pb8oZrPL2AKCTh" class="wolai-block wolai-text"><div><span class="inline-wrap">启动<span class="jill"></span>ntp</span></div></div><code-block id="svyxoHwPiJjJNUgCEfZNsd" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all">systemctl start ntpd
systemctl enable ntpd</pre></div></code-block><div id="n389QkZKGeyJkiMVF72XnU" class="wolai-block wolai-text"><div><span class="inline-wrap">ntp<span class="jill"></span>服务器执行</span></div></div><code-block id="3s5uwbaamSi9r84cRTFjoU" class="wolai-block"><div class="wolai-pre"><div data-lang="Bash" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token function">cat</span> <span class="token operator">></span> /etc/ntp.conf <span class="token operator">&lt;&lt;</span><span class="token string">EOF
driftfile /var/lib/ntp/drift
server 127.127.1.0
includefile /etc/ntp/crypto/pw
keys /etc/ntp/keys
disable monitor
EOF</span></pre></div></code-block><div id="cN4K6N9Bb239bU3QnYVBm6" class="wolai-block wolai-text"><div><span class="inline-wrap">ntp<span class="jill"></span>客户端其他节点执行</span></div></div><code-block id="aarwdB9cayjTggW2inrRUv" class="wolai-block"><div class="wolai-pre"><div data-lang="Bash" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token function">cat</span> <span class="token operator">></span> /etc/ntp.conf <span class="token operator">&lt;&lt;</span><span class="token string">EOF
driftfile /var/lib/ntp/drift
restrict 127.0.0.1 
restrict ::1
server 192.168.3.71
Fudge 192.168.3.71 stratum 10
includefile /etc/ntp/crypto/pw
keys /etc/ntp/keys
disable monitor
EOF</span></pre></div></code-block><div id="1Nad3tH6HSHjs26mX4gqy2" class="wolai-block wolai-text"><div><span class="inline-wrap">修改内核参数</span></div></div><code-block id="m2QQqHPSAwUcGXvRG6sn8t" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all">cat <span class="token operator">></span> <span class="token operator">/</span>etc<span class="token operator">/</span>sysctl<span class="token punctuation">.</span><span class="token property-access">conf</span> <span class="token operator">&lt;&lt;</span> <span class="token constant">EOF</span>
kernel<span class="token punctuation">.</span><span class="token property-access">core_uses_pid</span> <span class="token operator">=</span> <span class="token number">1</span>
net<span class="token punctuation">.</span><span class="token property-access">core</span><span class="token punctuation">.</span><span class="token property-access">netdev_max_backlog</span> <span class="token operator">=</span> <span class="token number">262144</span>
net<span class="token punctuation">.</span><span class="token property-access">core</span><span class="token punctuation">.</span><span class="token property-access">rmem_default</span> <span class="token operator">=</span> <span class="token number">8388608</span>
net<span class="token punctuation">.</span><span class="token property-access">core</span><span class="token punctuation">.</span><span class="token property-access">rmem_max</span> <span class="token operator">=</span> <span class="token number">16777216</span>
net<span class="token punctuation">.</span><span class="token property-access">core</span><span class="token punctuation">.</span><span class="token property-access">somaxconn</span> <span class="token operator">=</span> <span class="token number">32767</span>
net<span class="token punctuation">.</span><span class="token property-access">core</span><span class="token punctuation">.</span><span class="token property-access">wmem_default</span> <span class="token operator">=</span> <span class="token number">8388608</span>
net<span class="token punctuation">.</span><span class="token property-access">core</span><span class="token punctuation">.</span><span class="token property-access">wmem_max</span> <span class="token operator">=</span> <span class="token number">16777216</span>
net<span class="token punctuation">.</span><span class="token property-access">ipv4</span><span class="token punctuation">.</span><span class="token property-access">tcp_max_syn_backlog</span> <span class="token operator">=</span> <span class="token number">262144</span>
net<span class="token punctuation">.</span><span class="token property-access">ipv4</span><span class="token punctuation">.</span><span class="token property-access">tcp_rmem</span> <span class="token operator">=</span> <span class="token number">4096</span> <span class="token number">87380</span> <span class="token number">4194304</span>
net<span class="token punctuation">.</span><span class="token property-access">ipv4</span><span class="token punctuation">.</span><span class="token property-access">tcp_sack</span> <span class="token operator">=</span> <span class="token number">1</span>
net<span class="token punctuation">.</span><span class="token property-access">ipv4</span><span class="token punctuation">.</span><span class="token property-access">ip_local_reserved_ports</span> <span class="token operator">=</span> <span class="token number">5050</span><span class="token punctuation">,</span><span class="token number">5258</span><span class="token punctuation">,</span><span class="token number">5288</span><span class="token punctuation">,</span><span class="token number">6666</span><span class="token punctuation">,</span><span class="token number">6268</span>
net<span class="token punctuation">.</span><span class="token property-access">ipv4</span><span class="token punctuation">.</span><span class="token property-access">tcp_syncookies</span> <span class="token operator">=</span> <span class="token number">1</span>
net<span class="token punctuation">.</span><span class="token property-access">ipv4</span><span class="token punctuation">.</span><span class="token property-access">tcp_window_scaling</span> <span class="token operator">=</span> <span class="token number">1</span>
net<span class="token punctuation">.</span><span class="token property-access">ipv4</span><span class="token punctuation">.</span><span class="token property-access">tcp_wmem</span> <span class="token operator">=</span> <span class="token number">4096</span> <span class="token number">16384</span> <span class="token number">4194304</span>
vm<span class="token punctuation">.</span><span class="token property-access">vfs_cache_pressure</span> <span class="token operator">=</span> <span class="token number">1024</span>
vm<span class="token punctuation">.</span><span class="token property-access">swappiness</span> <span class="token operator">=</span> <span class="token number">1</span>
vm<span class="token punctuation">.</span><span class="token property-access">overcommit_memory</span> <span class="token operator">=</span> <span class="token number">0</span>
vm<span class="token punctuation">.</span><span class="token property-access">zone_reclaim_mode</span> <span class="token operator">=</span> <span class="token number">0</span>
vm<span class="token punctuation">.</span><span class="token property-access">max_map_count</span> <span class="token operator">=</span> <span class="token number">117604</span>
#vm<span class="token punctuation">.</span><span class="token property-access">min_free_kbytes</span> <span class="token operator">=</span> <span class="token number">188166</span> #<span class="token maybe-class-name">Commented</span> out by gcluster
vm<span class="token punctuation">.</span><span class="token property-access">min_free_kbytes</span> <span class="token operator">=</span> <span class="token number">188166</span>
<span class="token constant">EOF</span>
sysctl <span class="token operator">-</span>p</pre></div></code-block><div id="mT6jhEYKXyq8McbD5xTAhW" class="wolai-block wolai-text"><div><span class="inline-wrap">设置虚拟内存</span></div></div><code-block id="tiHxUkbC5N9Ldpf9W6T6e1" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all">cat <span class="token operator">>></span> <span class="token operator">/</span>etc<span class="token operator">/</span>security<span class="token operator">/</span>limits<span class="token punctuation">.</span><span class="token property-access">conf</span> <span class="token operator">&lt;&lt;</span><span class="token constant">EOF</span>
<span class="token operator">*</span> soft <span class="token keyword module">as</span> unlimited
<span class="token operator">*</span> hard <span class="token keyword module">as</span> unlimited
<span class="token constant">EOF</span></pre></div></code-block><div id="gZ98QcsHhKzwRhWB79VQF8" class="wolai-block wolai-text"><div><span class="inline-wrap">修改/etc/default/grub，找到<span class="jill"></span>GRUB_CMDLINE_LINUX 这一行，在双引号内加入</span></div></div><code-block id="ggSChHCiq9jytWfymBMR7S" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all">elevator<span class="token operator">=</span>deadline
transparent_hugepage<span class="token operator">=</span>never</pre></div></code-block><div id="w3SisGdAdV33unnYa7XrvS" class="wolai-block wolai-text"><div><span class="inline-wrap">修改<span class="jill"></span>hosts</span></div></div><code-block id="fAy1ZGtTwtwrEEs8iySoFv" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all">echo <span class="token string">"127.0.0.1 $(hostname)"</span> <span class="token operator">>></span> <span class="token operator">/</span>etc<span class="token operator">/</span>hosts</pre></div></code-block><div id="cFe4UYrWbDzdN8tXGPvp13" class="wolai-block wolai-text"><div><span class="inline-wrap">设定<span class="jill"></span>system.conf</span></div></div><code-block id="1oQV2ewtVboUrT2iDTixFK" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all">sed <span class="token operator">-</span>i <span class="token string">'s#^\#DefaultTasksMax=.*#DefaultTasksMax=infinity#g'</span> <span class="token operator">/</span>etc<span class="token operator">/</span>systemd<span class="token operator">/</span>system<span class="token punctuation">.</span><span class="token property-access">conf</span>
systemctl daemon<span class="token operator">-</span>reexec</pre></div></code-block><div id="dN9b3X1yT4nrgnpJayBsWk" class="wolai-block wolai-text"><div><span class="inline-wrap">其他操作</span></div></div><ol class="wolai-block"><li id="1RNePocdaTf37nJWEJV4so"><div class="marker"></div><span class="inline-wrap">Swap 分区大小设置为和物理内存大小相同</span></li><li id="8mdRCyBVjyNnEvoVF8oM4N"><div class="marker"></div><span class="inline-wrap">关闭<span class="jill"></span>CPU<span class="jill"></span>超频</span></li></ol><div id="jGLRiPASY8ELit3Y6fB5Cq" class="wolai-block wolai-text"><div><span class="inline-wrap">创建用户</span></div></div><code-block id="3nq6b3EWGLPiYC5LZQ6BGs" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all">groupadd gbase
useradd <span class="token operator">-</span>p <span class="token function">$</span><span class="token punctuation">(</span>openssl passwd <span class="token operator">-</span><span class="token number">1</span> <span class="token string">"gbase"</span><span class="token punctuation">)</span> <span class="token operator">-</span>g gbase <span class="token operator">-</span>d <span class="token operator">/</span>home<span class="token operator">/</span>gbase <span class="token operator">-</span>m gbase</pre></div></code-block><div id="rVxz3zH5tLt2DLW4qNuf7Z" class="wolai-block wolai-text"><div><span class="inline-wrap">创建安装目录</span></div></div><code-block id="458ZMikML5njDtQhjcYL48" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all">mkdir <span class="token operator">/</span>opt
chown <span class="token operator">-</span><span class="token constant">R</span> gbase<span class="token punctuation">.</span><span class="token property-access">gbase</span> <span class="token operator">/</span>opt</pre></div></code-block><h1 id="1EyrGCLjocam8f9yCbGaUt" class="wolai-block"><span class="inline-wrap">安装集群</span></h1><div id="7ZWgQ2pqn5wSbtKDaSnvBj" class="wolai-block wolai-text"><div><span class="inline-wrap">解压安装包</span></div></div><code-block id="ufz7Ex4GFuVcKkVh72X67p" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all">tar xf <span class="token maybe-class-name">GBase8a_MPP_Cluster</span><span class="token operator">-</span><span class="token maybe-class-name">License</span><span class="token operator">-</span><span class="token number">9.5</span><span class="token number">.3</span><span class="token number">.14</span><span class="token operator">-</span>redhat7<span class="token punctuation">.</span><span class="token number">3</span><span class="token operator">-</span>x86_64<span class="token punctuation">.</span><span class="token property-access">tar</span><span class="token punctuation">.</span><span class="token property-access">bz2</span></pre></div></code-block><div id="hqtVvjtRpUNBWAyisLR5Dj" class="wolai-block wolai-text"><div><span class="inline-wrap">利用<span class="jill"></span>SetSysEnv.py<span class="jill"></span>自动设置系统参数，该文件不属于集群，需要用户保证，需要在每个节点执行</span></div></div><code-block id="sFAbEYpFWZN4eWUxcXHyD4" class="wolai-block"><div class="wolai-pre"><div data-lang="Bash" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token function">su</span> - root <span class="token parameter variable">-c</span> <span class="token string">"/home/gbase/gcinstall/SetSysEnv.py --dbaUser=gbase --installPrefix=/opt"</span></pre></div></code-block><div id="hvQZZP6WPBmp71ciB1isBY" class="wolai-block wolai-text"><div><span class="inline-wrap">查看<span class="jill"></span>SetSysEnv.py<span class="jill"></span>执行日志</span></div></div><code-block id="oyfKTmq19swnbWHbV38MiX" class="wolai-block"><div class="wolai-pre"><div data-lang="Bash" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token function">less</span> /tmp/SetSysEnv.log</pre></div></code-block><div id="kiXp2cZTetgVBQsy9P58Ma" class="wolai-block wolai-text"><div><span class="inline-wrap">编辑<span class="jill"></span>gcinstall/demo.options</span></div></div><code-block id="9x11577vSBeGv1UQ1op5HE" class="wolai-block"><div class="wolai-pre"><div data-lang="Ini" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token key attr-name">installPrefix</span><span class="token punctuation">=</span> <span class="token value attr-value">/opt</span>
<span class="token key attr-name">coordinateHost</span> <span class="token punctuation">=</span> <span class="token value attr-value">192.168.3.72</span>
<span class="token key attr-name">coordinateHostNodeID</span> <span class="token punctuation">=</span><span class="token value attr-value">72</span> 
<span class="token key attr-name">dataHost</span> <span class="token punctuation">=</span> <span class="token value attr-value">192.168.3.72</span> 
<span class="token comment">#existCoordinateHost =</span>
<span class="token comment">#existDataHost =</span>
<span class="token comment">#existGcwareHost=</span>
<span class="token key attr-name">gcwareHost</span> <span class="token punctuation">=</span> <span class="token value attr-value">192.168.3.72</span>
<span class="token key attr-name">gcwareHostNodeID</span> <span class="token punctuation">=</span> <span class="token value attr-value">72</span>
<span class="token key attr-name">dbaUser</span> <span class="token punctuation">=</span> <span class="token value attr-value">gbase</span>
<span class="token key attr-name">dbaGroup</span> <span class="token punctuation">=</span> <span class="token value attr-value">gbase</span>
<span class="token key attr-name">dbaPwd</span> <span class="token punctuation">=</span> <span class="token value attr-value">'<span class="token inner-value">gbase</span>'</span>
<span class="token key attr-name">rootPwd</span> <span class="token punctuation">=</span> <span class="token value attr-value">'<span class="token inner-value">bb123456</span>'</span>
<span class="token comment">#rootPwdFile = rootPwd.json</span>
<span class="token comment">#characterSet = utf8</span>
<span class="token comment">#dbPort = 5258</span>
<span class="token comment">#sshPort = 22</span></pre></div></code-block><div id="gcCRq6m2XJY8AyXKoRRrWp" class="wolai-block wolai-text"><div><span class="inline-wrap">使用<span class="jill"></span>gbase<span class="jill"></span>用户执行安装</span></div></div><code-block id="1KDe2kMRfKkNacznAiPuuM" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all">gcinstall<span class="token operator">/</span>gcinstall<span class="token punctuation">.</span><span class="token property-access">py</span> <span class="token operator">--</span>silent<span class="token operator">=</span>demo<span class="token punctuation">.</span><span class="token property-access">options</span></pre></div></code-block><div id="n3JjPhh1KKVupw6ipXx7YS" class="wolai-block wolai-text"><div><span class="inline-wrap">安装部分日志</span></div></div><code-block id="ptxuG2x3CoVCtpPZAdXYRX" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.72</span>           install gcware and cluster on host <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.72</span> successfully<span class="token punctuation">.</span>
<span class="token property-access"><span class="token maybe-class-name">Starting</span></span> all gcluster nodes <span class="token spread operator">...</span>
 start cluster service failed on host <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.72</span><span class="token punctuation">.</span>
<span class="token property-access">adding</span> <span class="token keyword">new</span> <span class="token class-name">datanodes</span> to gcware <span class="token spread operator">...</span></pre></div></code-block><div id="qvzXvYdFUGW31RsYnt2Myn" class="wolai-block wolai-text"><div><span class="inline-wrap">安装后的目录：</span></div></div><div id="iaeAESHcsqmGPGnHtQ7APG" class="wolai-block wolai-simple-table"><table><thead><tr><th style="width: 370px"><span class="inline-wrap">目录名</span></th><th style="width: 370px"><span class="inline-wrap">功能</span></th></tr></thead><tbody><tr><td><span class="inline-wrap">Gcware</span></td><td><span class="inline-wrap">该目录在安装目录下，存储 gcware 模组的相关文件，包括配置 文件和日志等，coordinator 节点有该目录，gnode 节点没有该目 录。</span></td></tr><tr><td><span class="inline-wrap">gcluster</span></td><td><span class="inline-wrap">该目录在安装目录下，存储 gcluster 模组的相关文件，包括配置 文件、日志和元数据等。</span></td></tr><tr><td><span class="inline-wrap">gnode</span></td><td><span class="inline-wrap">该目录在安装目录下，存储 gnode 模组的相关文件，包括配置文 件、日志和用户数据等。</span></td></tr><tr><td><span class="inline-wrap">/home/dbaUser/ .g</span></td><td><span class="inline-wrap">.gbase_profile 文件是数据库安装用户下的环境变量文件。</span></td></tr></tbody></table></div><div id="3RRzJDhYwnfTcLfHS1iBhA" class="wolai-block wolai-text"><div><span class="inline-wrap">安装成功后，使用<span class="jill"></span>gbase<span class="jill"></span>用户生效环境变量</span></div></div><code-block id="iPUPryz9TcdVVJLuRXLecu" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token punctuation">.</span> <span class="token operator">~</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token property-access">gbase_profile</span></pre></div></code-block><div id="j9ioDZTVwAZvM5Axb1Aq7Y" class="wolai-block wolai-text"><div><span class="inline-wrap">使用<span class="jill"></span>gbase<span class="jill"></span>用户通过 gcadmin 查看集群状况，注：集群状态和节点状态都是 </span><span class="inline-wrap"><code>CLOSE</code></span><span class="inline-wrap">，原因是因为因为没有注册 </span><span class="inline-wrap"><code>License</code></span><span class="inline-wrap"> 授权，属于正常现象</span></div></div><code-block id="xweGobATrFctgLGq7uovao" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token punctuation">[</span>gbase@gbase gcinstall<span class="token punctuation">]</span>$ gcadmin
<span class="token constant">CLUSTER</span> <span class="token constant">STATE</span><span class="token operator">:</span>         <span class="token constant">ACTIVE</span>

<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span>
<span class="token operator">|</span> <span class="token constant">GBASE</span> <span class="token constant">GCWARE</span> <span class="token constant">CLUSTER</span> <span class="token constant">INFORMATION</span> <span class="token operator">|</span>
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span>
<span class="token operator">|</span> <span class="token maybe-class-name">NodeName</span> <span class="token operator">|</span>  <span class="token maybe-class-name">IpAddress</span>   <span class="token operator">|</span> gcware <span class="token operator">|</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token operator">|</span> gcware1  <span class="token operator">|</span> <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.72</span> <span class="token operator">|</span>  <span class="token constant">OPEN</span>  <span class="token operator">|</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span>
<span class="token operator">|</span>       <span class="token constant">GBASE</span> <span class="token constant">COORDINATOR</span> <span class="token constant">CLUSTER</span> <span class="token constant">INFORMATION</span>        <span class="token operator">|</span>
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span>
<span class="token operator">|</span>   <span class="token maybe-class-name">NodeName</span>   <span class="token operator">|</span>  <span class="token maybe-class-name">IpAddress</span>   <span class="token operator">|</span> gcluster <span class="token operator">|</span> <span class="token maybe-class-name">DataState</span> <span class="token operator">|</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token operator">|</span> coordinator1 <span class="token operator">|</span> <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.72</span> <span class="token operator">|</span>  <span class="token constant">CLOSE</span>   <span class="token operator">|</span>     <span class="token number">0</span>     <span class="token operator">|</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">=</span>
<span class="token operator">|</span>         <span class="token constant">GBASE</span> <span class="token constant">CLUSTER</span> <span class="token constant">FREE</span> <span class="token constant">DATA</span> <span class="token constant">NODE</span> <span class="token constant">INFORMATION</span>          <span class="token operator">|</span>
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">=</span>
<span class="token operator">|</span> <span class="token maybe-class-name">NodeName</span>  <span class="token operator">|</span>  <span class="token maybe-class-name">IpAddress</span>   <span class="token operator">|</span> gnode <span class="token operator">|</span> syncserver <span class="token operator">|</span> <span class="token maybe-class-name">DataState</span> <span class="token operator">|</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token operator">|</span> <span class="token maybe-class-name">FreeNode1</span> <span class="token operator">|</span> <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.72</span> <span class="token operator">|</span> <span class="token constant">CLOSE</span> <span class="token operator">|</span>    <span class="token constant">OPEN</span>    <span class="token operator">|</span>     <span class="token number">0</span>     <span class="token operator">|</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token number">0</span> virtual cluster
<span class="token number">1</span> coordinator node
<span class="token number">1</span> free data node</pre></div></code-block><div id="bAr1k2Kxvn5TzBpM1sh2xu" class="wolai-block wolai-text"><div><span class="inline-wrap">进行<span class="jill"></span>LiCENSE<span class="jill"></span>认证，使用<span class="jill"></span>gabse<span class="jill"></span>用户生成到/home/gbase/finger.txt，</span></div></div><code-block id="68wp19GyFzj3K2zWyy3NF6" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token punctuation">.</span><span class="token operator">/</span>gethostsid <span class="token operator">-</span>n <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.72</span> <span class="token operator">-</span>f <span class="token operator">/</span>home<span class="token operator">/</span>gbase<span class="token operator">/</span>finger<span class="token punctuation">.</span><span class="token property-access">txt</span> <span class="token operator">-</span>u gbase <span class="token operator">-</span>p gbase</pre></div></code-block><div id="kMveCmZ5iNQTvhtQ94rVmv" class="wolai-block wolai-text"><div><span class="inline-wrap">将<span class="jill"></span>finger.txt<span class="jill"></span>作为附件发送给</span><span class="inline-wrap"><a href="mailto:partner@gbase.cn"><span>partner@gbase.cn</span></a></span><span class="inline-wrap">，注：该邮箱更新于：2021<span class="jill"></span>年<span class="jill"></span>12<span class="jill"></span>月<span class="jill"></span>16<span class="jill"></span>日，本人在这时间进行申请。邮箱正文参考</span></div></div><code-block id="3pYo6fSxkMgzkyTUYAvgQe" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token literal-property property">客户名称</span><span class="token operator">:</span> xxx
<span class="token literal-property property">项目名称</span><span class="token operator">:</span> <span class="token number">2021</span>年<span class="token constant">X</span>月认证培训
<span class="token literal-property property">申请人</span><span class="token operator">:</span> xxx
<span class="token literal-property property">申请原因</span><span class="token operator">:</span> 培训学习
<span class="token literal-property property">有效期</span><span class="token operator">:</span> <span class="token number">3</span>个月
<span class="token literal-property property">操作系统名称及版本</span><span class="token operator">:</span> <span class="token maybe-class-name">Red</span> <span class="token maybe-class-name">Hat</span> <span class="token maybe-class-name">Enterprise</span> <span class="token maybe-class-name">Linux</span> <span class="token maybe-class-name">Server</span> release <span class="token number">7.3</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Maipo</span><span class="token punctuation">)</span>
8a集群版本<span class="token operator">:</span> <span class="token maybe-class-name">GBase8a_MPP_Cluster</span><span class="token operator">-</span><span class="token maybe-class-name">License</span><span class="token operator">-</span><span class="token number">9.5</span><span class="token number">.2</span><span class="token number">.39</span><span class="token operator">-</span>redhat7<span class="token punctuation">.</span><span class="token number">3</span><span class="token operator">-</span>x86_64<span class="token punctuation">.</span><span class="token property-access">tar</span><span class="token punctuation">.</span><span class="token property-access">bz2</span></pre></div></code-block><div id="feXLh8odJ7cAkvtxs12bip" class="wolai-block wolai-text"><div><span class="inline-wrap">导入<span class="jill"></span>License</span></div></div><code-block id="hafi5H7s6mCDmaBYWQyvnT" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token punctuation">[</span>gbase@gbase gcinstall<span class="token punctuation">]</span>$ <span class="token punctuation">.</span><span class="token operator">/</span><span class="token maybe-class-name">License</span> <span class="token operator">-</span>n <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.72</span> <span class="token operator">-</span>u gbase <span class="token operator">-</span>p gbase <span class="token operator">-</span>f  <span class="token operator">~</span><span class="token operator">/</span>mpp<span class="token punctuation">.</span><span class="token property-access">lic</span>
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">=</span>
<span class="token maybe-class-name">Successful</span> node nums<span class="token operator">:</span>  <span class="token number">1</span>
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">==</span></pre></div></code-block><div id="udoNdzFwrRC1H9iZmASnG1" class="wolai-block wolai-text"><div><span class="inline-wrap">查看<span class="jill"></span>License<span class="jill"></span>状况</span></div></div><code-block id="921hkWE1HgH2D33dVCYQ2J" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token punctuation">.</span><span class="token operator">/</span>gcinstall<span class="token operator">/</span>chkLicense <span class="token operator">-</span>n <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.72</span> <span class="token operator">-</span>u gbase <span class="token operator">-</span>p gbase
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">=</span>
<span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.72</span>
<span class="token literal-property property">is_exist</span><span class="token operator">:</span>yes
<span class="token literal-property property">version</span><span class="token operator">:</span>trial
<span class="token literal-property property">expire_time</span><span class="token operator">:</span><span class="token number">20220315</span>
<span class="token literal-property property">is_valid</span><span class="token operator">:</span>yes</pre></div></code-block><div id="cysMTeZuAtxWvptNAHtnha" class="wolai-block wolai-text"><div><span class="inline-wrap">重启集群</span></div></div><code-block id="kYcYLfyWkXsDdprPKjoEpy" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token punctuation">[</span>gbase@gbase <span class="token operator">~</span><span class="token punctuation">]</span>$  gcluster_services all restart
<span class="token maybe-class-name">Stopping</span> <span class="token maybe-class-name">GCMonit</span> success<span class="token operator">!</span>
<span class="token maybe-class-name">Stopping</span> gcrecover <span class="token operator">:</span>                                       <span class="token punctuation">[</span>  <span class="token constant">OK</span>  <span class="token punctuation">]</span>
<span class="token maybe-class-name">Stopping</span> gcluster <span class="token operator">:</span>                                        <span class="token punctuation">[</span>  <span class="token constant">OK</span>  <span class="token punctuation">]</span>
<span class="token maybe-class-name">Stopping</span> gbase <span class="token operator">:</span>                                           <span class="token punctuation">[</span>  <span class="token constant">OK</span>  <span class="token punctuation">]</span>
<span class="token maybe-class-name">Stopping</span> syncserver <span class="token operator">:</span>                                      <span class="token punctuation">[</span>  <span class="token constant">OK</span>  <span class="token punctuation">]</span>
<span class="token maybe-class-name">Starting</span> gcluster <span class="token operator">:</span>                                        <span class="token punctuation">[</span>  <span class="token constant">OK</span>  <span class="token punctuation">]</span>
<span class="token maybe-class-name">Starting</span> gcrecover <span class="token operator">:</span>                                       <span class="token punctuation">[</span>  <span class="token constant">OK</span>  <span class="token punctuation">]</span>
<span class="token maybe-class-name">Starting</span> gbase <span class="token operator">:</span>                                           <span class="token punctuation">[</span>  <span class="token constant">OK</span>  <span class="token punctuation">]</span>
<span class="token maybe-class-name">Starting</span> syncserver <span class="token operator">:</span>                                      <span class="token punctuation">[</span>  <span class="token constant">OK</span>  <span class="token punctuation">]</span>
<span class="token maybe-class-name">Starting</span> <span class="token maybe-class-name">GCMonit</span> success<span class="token operator">!</span></pre></div></code-block><div id="64pyK3iuoEBuu6YhhM9WP6" class="wolai-block wolai-text"><div><span class="inline-wrap">再次查看状态</span></div></div><code-block id="pSZMgFmANW3iB2oEHpWmhx" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token punctuation">[</span>gbase@gbase <span class="token operator">~</span><span class="token punctuation">]</span>$ gcadmin
<span class="token constant">CLUSTER</span> <span class="token constant">STATE</span><span class="token operator">:</span>         <span class="token constant">ACTIVE</span>

<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span>
<span class="token operator">|</span> <span class="token constant">GBASE</span> <span class="token constant">GCWARE</span> <span class="token constant">CLUSTER</span> <span class="token constant">INFORMATION</span> <span class="token operator">|</span>
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span>
<span class="token operator">|</span> <span class="token maybe-class-name">NodeName</span> <span class="token operator">|</span>  <span class="token maybe-class-name">IpAddress</span>   <span class="token operator">|</span> gcware <span class="token operator">|</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token operator">|</span> gcware1  <span class="token operator">|</span> <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.72</span> <span class="token operator">|</span>  <span class="token constant">OPEN</span>  <span class="token operator">|</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span>
<span class="token operator">|</span>       <span class="token constant">GBASE</span> <span class="token constant">COORDINATOR</span> <span class="token constant">CLUSTER</span> <span class="token constant">INFORMATION</span>        <span class="token operator">|</span>
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span>
<span class="token operator">|</span>   <span class="token maybe-class-name">NodeName</span>   <span class="token operator">|</span>  <span class="token maybe-class-name">IpAddress</span>   <span class="token operator">|</span> gcluster <span class="token operator">|</span> <span class="token maybe-class-name">DataState</span> <span class="token operator">|</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token operator">|</span> coordinator1 <span class="token operator">|</span> <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.72</span> <span class="token operator">|</span>   <span class="token constant">OPEN</span>   <span class="token operator">|</span>     <span class="token number">0</span>     <span class="token operator">|</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">=</span>
<span class="token operator">|</span>         <span class="token constant">GBASE</span> <span class="token constant">CLUSTER</span> <span class="token constant">FREE</span> <span class="token constant">DATA</span> <span class="token constant">NODE</span> <span class="token constant">INFORMATION</span>          <span class="token operator">|</span>
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">=</span>
<span class="token operator">|</span> <span class="token maybe-class-name">NodeName</span>  <span class="token operator">|</span>  <span class="token maybe-class-name">IpAddress</span>   <span class="token operator">|</span> gnode <span class="token operator">|</span> syncserver <span class="token operator">|</span> <span class="token maybe-class-name">DataState</span> <span class="token operator">|</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token operator">|</span> <span class="token maybe-class-name">FreeNode1</span> <span class="token operator">|</span> <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.72</span> <span class="token operator">|</span> <span class="token constant">OPEN</span>  <span class="token operator">|</span>    <span class="token constant">OPEN</span>    <span class="token operator">|</span>     <span class="token number">0</span>     <span class="token operator">|</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>

<span class="token number">0</span> virtual cluster
<span class="token number">1</span> coordinator node
<span class="token number">1</span> free data node</pre></div></code-block><div id="d8RznwsRMPVP6mJwnf9VLM" class="wolai-block wolai-text"><div><span class="inline-wrap">生成分布信息</span></div></div><code-block id="sqT1W4GWqiQ1eKXCGWDQkJ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token punctuation">[</span>gbase@gbase gcinstall<span class="token punctuation">]</span>$ gcadmin distribution gcChangeInfo<span class="token punctuation">.</span><span class="token property-access">xml</span> p <span class="token number">1</span> d <span class="token number">0</span>
gcadmin generate distribution <span class="token spread operator">...</span>

<span class="token punctuation">[</span>warning<span class="token punctuation">]</span><span class="token operator">:</span> parameter <span class="token punctuation">[</span>d num<span class="token punctuation">]</span> is <span class="token number">0</span><span class="token punctuation">,</span> the <span class="token keyword">new</span> <span class="token class-name">distribution</span> will has no segment backup
please ensure <span class="token keyword">this</span> is ok<span class="token punctuation">,</span> input <span class="token punctuation">[</span><span class="token constant">Y</span><span class="token punctuation">,</span>y<span class="token punctuation">]</span> or <span class="token punctuation">[</span><span class="token constant">N</span><span class="token punctuation">,</span>n<span class="token punctuation">]</span><span class="token operator">:</span> y
<span class="token constant">NOTE</span><span class="token operator">:</span> node <span class="token punctuation">[</span><span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.72</span><span class="token punctuation">]</span> is coordinator node<span class="token punctuation">,</span> it shall be data node too
gcadmin generate distribution successful
</pre></div></code-block><div id="uMhWnmpxQSnGZSqy1PKfPb" class="wolai-block wolai-text"><div><span class="inline-wrap">再次查看,DistributionId<span class="jill"></span>变为<span class="jill"></span>1</span></div></div><code-block id="67WtGU8Bsa9Skof4CCgWuB" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token punctuation">[</span>gbase@gbase gcinstall<span class="token punctuation">]</span>$ gcadmin
<span class="token constant">CLUSTER</span> <span class="token constant">STATE</span><span class="token operator">:</span>         <span class="token constant">ACTIVE</span>
<span class="token constant">VIRTUAL</span> <span class="token constant">CLUSTER</span> <span class="token constant">MODE</span><span class="token operator">:</span>  <span class="token constant">NORMAL</span>

<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span>
<span class="token operator">|</span> <span class="token constant">GBASE</span> <span class="token constant">GCWARE</span> <span class="token constant">CLUSTER</span> <span class="token constant">INFORMATION</span> <span class="token operator">|</span>
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span>
<span class="token operator">|</span> <span class="token maybe-class-name">NodeName</span> <span class="token operator">|</span>  <span class="token maybe-class-name">IpAddress</span>   <span class="token operator">|</span> gcware <span class="token operator">|</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token operator">|</span> gcware1  <span class="token operator">|</span> <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.72</span> <span class="token operator">|</span>  <span class="token constant">OPEN</span>  <span class="token operator">|</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span>
<span class="token operator">|</span>       <span class="token constant">GBASE</span> <span class="token constant">COORDINATOR</span> <span class="token constant">CLUSTER</span> <span class="token constant">INFORMATION</span>        <span class="token operator">|</span>
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span>
<span class="token operator">|</span>   <span class="token maybe-class-name">NodeName</span>   <span class="token operator">|</span>  <span class="token maybe-class-name">IpAddress</span>   <span class="token operator">|</span> gcluster <span class="token operator">|</span> <span class="token maybe-class-name">DataState</span> <span class="token operator">|</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token operator">|</span> coordinator1 <span class="token operator">|</span> <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.72</span> <span class="token operator">|</span>   <span class="token constant">OPEN</span>   <span class="token operator">|</span>     <span class="token number">0</span>     <span class="token operator">|</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span>
<span class="token operator">|</span>                                    <span class="token constant">GBASE</span> <span class="token constant">DATA</span> <span class="token constant">CLUSTER</span> <span class="token constant">INFORMATION</span>                                     <span class="token operator">|</span>
<span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span><span class="token operator">===</span>
<span class="token operator">|</span> <span class="token maybe-class-name">NodeName</span> <span class="token operator">|</span>                <span class="token maybe-class-name">IpAddress</span>                 <span class="token operator">|</span> <span class="token maybe-class-name">DistributionId</span> <span class="token operator">|</span> gnode <span class="token operator">|</span> syncserver <span class="token operator">|</span> <span class="token maybe-class-name">DataState</span> <span class="token operator">|</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token operator">|</span>  node1   <span class="token operator">|</span>               <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.72</span>               <span class="token operator">|</span>       <span class="token number">1</span>        <span class="token operator">|</span> <span class="token constant">OPEN</span>  <span class="token operator">|</span>    <span class="token constant">OPEN</span>    <span class="token operator">|</span>     <span class="token number">0</span>     <span class="token operator">|</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span></pre></div></code-block><h2 id="v78ze9k8Rmt5kdiyhrWqBk" class="wolai-block"><span class="inline-wrap">初始化</span></h2><div id="wHLABVZfJAHrKhzJuXxqFm" class="wolai-block wolai-text"><div><span class="inline-wrap">使用<span class="jill"></span>gbase<span class="jill"></span>用户执行<span class="jill"></span>initnodedatamap，密码为空</span></div></div><code-block id="rqyFmvtuKVcPcpso7mEJ7f" class="wolai-block"><div class="wolai-pre"><div data-lang="Bash" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token punctuation">[</span>gbase@gbase gcinstall<span class="token punctuation">]</span>$ gccli <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span>
Enter password: 

GBase client <span class="token number">9.5</span>.3.14.121230. Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token number">2004</span>-2021, GBase.  All Rights Reserved.</pre></div></code-block><code-block id="fUjCr7SrXK1QJJFVgS7oQM" class="wolai-block"><div class="wolai-pre"><div data-lang="Bash" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all">gbase<span class="token operator">></span> initnodedatamap<span class="token punctuation">;</span>
Query OK, <span class="token number">0</span> rows affected <span class="token punctuation">(</span>Elapsed: 00:00:03.09<span class="token punctuation">)</span></pre></div></code-block></article><footer></footer></body></html>