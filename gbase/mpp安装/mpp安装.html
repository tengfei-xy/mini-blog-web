<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="../../css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="../../css/prism.min.css"/><link rel="stylesheet" type="text/css" href="../../css/katex.min.css"/><link rel="stylesheet" type="text/css" href="../../css/wolai.css"/><title>mpp安装 - wolai 笔记</title><link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; viewBox=&apos;0 0 800 800&apos;%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fff;%7D%3C/style%3E%3C/defs%3E%3Cg%3E%3Cpath class=&apos;cls-1&apos; d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Z&apos;/%3E%3Cpath d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Zm4.72,88.9H185.2L172.42,89c-32.78.62-43.68,3.24-54.71,9.14a45.84,45.84,0,0,0-19.54,19.54c-6.61,12.36-9.11,24.55-9.27,67.49V614.8L89,627.58c.62,32.78,3.24,43.68,9.14,54.71a45.84,45.84,0,0,0,19.54,19.54c12.36,6.61,24.55,9.11,67.49,9.27H610.08c46.79,0,59.41-2.44,72.21-9.28a45.84,45.84,0,0,0,19.54-19.54c6.61-12.36,9.11-24.55,9.27-67.49V189.92c0-46.79-2.44-59.41-9.28-72.21a45.84,45.84,0,0,0-19.54-19.54C669.93,91.56,657.74,89.06,614.8,88.9ZM233.33,493.33A73.34,73.34,0,1,1,160,566.67,73.35,73.35,0,0,1,233.33,493.33Z&apos;/%3E%3C/g%3E%3C/svg%3E"></link></head><body class="full-width small-font less-lead"><header><div class="image"></div><div class="title"><div class="banner"><div class="icon"></div></div><div data-title="mpp安装" class="main-title"></div></div></header><article><div id="5E7kjtd7BZDmn44rckGZ9H" class="wolai-block wolai-text"><div><span class="inline-wrap">创建用户</span></div></div><code-block id="qbDs8PtE2toPt8VqNE8GCm" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>groupadd gbase
useradd <span class="token operator">-</span>g gbase <span class="token operator">-</span>d <span class="token operator">/</span>home<span class="token operator">/</span>gbase <span class="token operator">-</span>s <span class="token operator">/</span>bin<span class="token operator">/</span>bash <span class="token operator">-</span>m gbase
echo gbase <span class="token operator">|</span> passwd gbase
</pre></div></code-block><div id="xkLnZQyBZPs4ngbQMQHogU" class="wolai-block wolai-text"><div><span class="inline-wrap">解压安装包</span></div></div><code-block id="4Qe1J5U5c4z4dEux6Sa4in" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>tar <span class="token operator">-</span>xjf <span class="token maybe-class-name">GBase8a_MPP_Cluster</span><span class="token operator">-</span><span class="token maybe-class-name">License</span><span class="token operator">-</span><span class="token number">9.5</span><span class="token number">.3</span><span class="token number">.14</span><span class="token operator">-</span>redhat7<span class="token punctuation">.</span><span class="token number">3</span><span class="token operator">-</span>x86_64<span class="token punctuation">.</span><span class="token property-access">tar</span><span class="token punctuation">.</span><span class="token property-access">bz2</span></pre></div></code-block><div id="mhVNgmDqct6CESrVRkJPJH" class="wolai-block wolai-text"><div><span class="inline-wrap">准备目录</span></div></div><code-block id="8jEqjKP4RrJ5ZBA4xWbwjA" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>mkdir <span class="token operator">/</span>opt<span class="token operator">/</span>8a <span class="token operator">&amp;&amp;</span> chown gbase<span class="token operator">:</span>gbase <span class="token operator">/</span>opt<span class="token operator">/</span>8a</pre></div></code-block><div id="3gfDK4zikALyKcf8LykBci" class="wolai-block wolai-text"><div><span class="inline-wrap">6、 安装环境准备：root<span class="jill"></span>用户执行 cd gcinstall;python SetSysEnv.py --dbaUser=gbase --installPrefix=/opt/8a</span></div></div><div id="6WoYXNNLbqTVqj2imVmtBP" class="wolai-block wolai-text"><div><span class="inline-wrap">7、 切换到集群安装及运行用户，并修改安装配置文件参数</span></div></div><div id="nJrGnBExWZaMYKrXPeHi3N" class="wolai-block wolai-text"><div><span class="inline-wrap">#su - gbase</span></div></div><div id="8p8X391Ly53Sw65Uj8jPXC" class="wolai-block wolai-text"><div><span class="inline-wrap">$vi /opt/gcinstall/demo.options</span></div></div><code-block id="jDDNBkJwj4SmvtNusJY4LN" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>installPrefix<span class="token operator">=</span> <span class="token operator">/</span>opt<span class="token operator">/</span>8a （安装目录）
coordinateHost <span class="token operator">=</span> <span class="token number">172.16</span><span class="token number">.100</span><span class="token number">.158</span> （Coordinator节点<span class="token constant">IP</span>地址）
coordinateHostNodeID <span class="token operator">=</span> <span class="token number">158</span> （Coordinator节点Nodeid）
dataHost <span class="token operator">=</span> <span class="token number">172.16</span><span class="token number">.100</span><span class="token number">.158</span> <span class="token punctuation">(</span><span class="token maybe-class-name">Data节点</span><span class="token constant">IP</span>地址）
#existCoordinateHost <span class="token operator">=</span> 
#existDataHost <span class="token operator">=</span> 
gcwareHost <span class="token operator">=</span> <span class="token number">172.16</span><span class="token number">.100</span><span class="token number">.158</span>（gcware节点<span class="token constant">IP</span>地址）
gcwareHostNodeID <span class="token operator">=</span> <span class="token number">158</span>（gcware节点nodeid）
dbaUser <span class="token operator">=</span> gbase 
dbaGroup <span class="token operator">=</span> gbase 
dbaPwd <span class="token operator">=</span> <span class="token string">'gbase'</span> （gbase用户密码）
rootPwd <span class="token operator">=</span> <span class="token string">'111111'</span> （root用户密码）
#rootPwdFile <span class="token operator">=</span> rootPwd<span class="token punctuation">.</span><span class="token property-access">json</span></pre></div></code-block><div id="2EtmwpFFFYWArKNHdNmG2t" class="wolai-block wolai-text"><div><span class="inline-wrap">8、 执行安装 gbase<span class="jill"></span>用户，进入<span class="jill"></span>gcinstall<span class="jill"></span>目录</span></div></div><div id="eSCSPe6CVcxWgnHiBrkizA" class="wolai-block wolai-text"><div><span class="inline-wrap">./gcinstall.py --silent=demo.options</span></div></div><div id="ieNJ4zabpBELhdt6G8WkG3" class="wolai-block"><figure class="wolai-center" style="width: 100%; flex-direction: column"><img src="file:////private/var/folders/9b/t1nnnj9d1sx8ckkvtf8722j80000gn/T/com.kingsoft.wpsoffice.mac/wps-tengfei/ksohtml/wps72IFIG.jpg" style="width: 100%"/></figure></div><div id="uetbKm81PBLHrk6jngS6xE" class="wolai-block"><figure class="wolai-center" style="width: 100%; flex-direction: column"><img src="file:////private/var/folders/9b/t1nnnj9d1sx8ckkvtf8722j80000gn/T/com.kingsoft.wpsoffice.mac/wps-tengfei/ksohtml/wpssDLL5b.jpg" style="width: 100%"/></figure></div><div id="nDFj2bz4sukwCsUvxdbRo1" class="wolai-block wolai-text"><div><span class="inline-wrap">9、 采集指纹</span></div></div><code-block id="6vaYNm1tU3x6PHErLUvBEE" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">.</span><span class="token operator">/</span>gethostsid <span class="token operator">-</span>n <span class="token number">172.16</span><span class="token number">.100</span><span class="token number">.158</span> <span class="token operator">-</span>u root <span class="token operator">-</span>p <span class="token maybe-class-name">GBASEtest890</span> <span class="token operator">-</span>f <span class="token operator">/</span>home<span class="token operator">/</span>gbase<span class="token operator">/</span>lic<span class="token punctuation">.</span><span class="token property-access">txt</span></pre></div></code-block><div id="cEjCeoJebApGHpsnaxhtYg" class="wolai-block"><figure class="wolai-center" style="width: 100%; flex-direction: column"><img src="file:////private/var/folders/9b/t1nnnj9d1sx8ckkvtf8722j80000gn/T/com.kingsoft.wpsoffice.mac/wps-tengfei/ksohtml/wpsFUKxUc.jpg" style="width: 100%"/></figure></div><div id="irVL1Hyh3J5NHcC54ixM9u" class="wolai-block wolai-text"><div><span class="inline-wrap">下载/home/gbase/lic.txt<span class="jill"></span>发送给技术支持获取<span class="jill"></span>license<span class="jill"></span>文件</span></div></div><div id="iZqNh32j333wLDmBUuVfDy" class="wolai-block wolai-text"><div><span class="inline-wrap">10、 加载<span class="jill"></span>license，gbase<span class="jill"></span>用户，gcinstall<span class="jill"></span>目录</span></div></div><code-block id="fJJq2X6qszGmHPZvzkg5su" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">.</span><span class="token operator">/</span><span class="token maybe-class-name">License</span> <span class="token operator">-</span>n <span class="token number">172.16</span><span class="token number">.100</span><span class="token number">.158</span> <span class="token operator">-</span>u gbase <span class="token operator">-</span>p <span class="token maybe-class-name">Gbase</span>@<span class="token number">123</span> <span class="token operator">-</span>f <span class="token operator">/</span>home<span class="token operator">/</span>gbase<span class="token operator">/</span><span class="token number">158</span><span class="token punctuation">.</span><span class="token property-access">lic</span></pre></div></code-block><div id="nfQ8GdoXey3nUH9yACwcYV" class="wolai-block"><figure class="wolai-center" style="width: 100%; flex-direction: column"><img src="file:////private/var/folders/9b/t1nnnj9d1sx8ckkvtf8722j80000gn/T/com.kingsoft.wpsoffice.mac/wps-tengfei/ksohtml/wpsUosbGS.jpg" style="width: 100%"/></figure></div><div id="qThdemTLqbzPx2L9dTGjch" class="wolai-block wolai-text"><div><span class="inline-wrap">11、 查看<span class="jill"></span>license<span class="jill"></span>状态</span></div></div><code-block id="3vpjtNoBPDvZXxhEfzsCMK" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">.</span><span class="token operator">/</span>chkLicense <span class="token operator">-</span>n <span class="token number">172.16</span><span class="token number">.100</span><span class="token number">.158</span> <span class="token operator">-</span>u gbase <span class="token operator">-</span>p <span class="token maybe-class-name">Gbase</span>@<span class="token number">123</span></pre></div></code-block><div id="3MSxNnv5tM2RGqEv2mpmjt" class="wolai-block"><figure class="wolai-center" style="width: 100%; flex-direction: column"><img src="file:////private/var/folders/9b/t1nnnj9d1sx8ckkvtf8722j80000gn/T/com.kingsoft.wpsoffice.mac/wps-tengfei/ksohtml/wpsj0gI76.jpg" style="width: 100%"/></figure></div><div id="aRGUEMs4EiKpKromvHp3by" class="wolai-block wolai-text"><div><span class="inline-wrap">12、 启动服务</span></div></div><div id="68yjT46d9h2Pzx37jrYBio" class="wolai-block wolai-text"><div><span class="inline-wrap">加载环境变量<span class="jill"></span>source /home/gbase/.bash_profile</span></div></div><div id="iLdMnKb2zrotfbKh52dFC4" class="wolai-block wolai-text"><div><span class="inline-wrap">启动<span class="jill"></span>gcware<span class="jill"></span>进程：gcware_services all restart</span></div></div><div id="m4MfqsAvZDbUfwtCZrhm8o" class="wolai-block"><figure class="wolai-center" style="width: 100%; flex-direction: column"><img src="file:////private/var/folders/9b/t1nnnj9d1sx8ckkvtf8722j80000gn/T/com.kingsoft.wpsoffice.mac/wps-tengfei/ksohtml/wps1kNejy.jpg" style="width: 100%"/></figure></div><div id="s6z6DQ8x5ywtRWfJyc8dw3" class="wolai-block wolai-text"><div><span class="inline-wrap">启动<span class="jill"></span>gcluster<span class="jill"></span>进程：gcluster_services all restart</span></div></div><div id="xBs7hppMqaX8T8He8RHba1" class="wolai-block"><figure class="wolai-center" style="width: 100%; flex-direction: column"><img src="file:////private/var/folders/9b/t1nnnj9d1sx8ckkvtf8722j80000gn/T/com.kingsoft.wpsoffice.mac/wps-tengfei/ksohtml/wpsXg8LnJ.jpg" style="width: 100%"/></figure></div><div id="h7jg3XneQmhqouXKXKTYxf" class="wolai-block wolai-text"><div><span class="inline-wrap">查询进程状态：gcadmin</span></div></div><div id="1cxVoYJuYV5ckoMUwfNWq5" class="wolai-block"><figure class="wolai-center" style="width: 100%; flex-direction: column"><img src="file:////private/var/folders/9b/t1nnnj9d1sx8ckkvtf8722j80000gn/T/com.kingsoft.wpsoffice.mac/wps-tengfei/ksohtml/wpsa8q4z8.jpg" style="width: 100%"/></figure></div><div id="3Z3Y2zQGXHUR8u3Bzmh1QY" class="wolai-block wolai-text"><div><span class="inline-wrap">13、 初始化配置</span></div></div><div id="mpeciZkZnJWVsFcuHmdTb7" class="wolai-block wolai-text"><div><span class="inline-wrap"><i><b>创建</b></i></span><span class="inline-wrap"><i><b>创建</b></i></span><span class="inline-wrap"><i><b>​</b></i></span><span class="inline-wrap"><i><b>​</b></i></span><span class="inline-wrap"> </span><span class="inline-wrap"><i><b>distribution</b></i></span><span class="inline-wrap"><i><b>distribution</b></i></span><span class="inline-wrap"><i><b>​</b></i></span><span class="inline-wrap"><i><b>​</b></i></span><span class="inline-wrap"><i><b>：</b></i></span><span class="inline-wrap"><i><b>：</b></i></span><span class="inline-wrap"><i><b>：</b></i></span><span class="inline-wrap"><i><b>：</b></i></span><span class="inline-wrap"><i><b> ​</b></i></span><span class="inline-wrap"><i><b> ​</b></i></span><span class="inline-wrap"><i><b> ​</b></i></span><span class="inline-wrap"><i><b> ​</b></i></span></div></div><div id="ickdo7Kn6styZNtEJrSpkN" class="wolai-block wolai-text"><div><span class="inline-wrap"><i><b>$cat /opt/gcinstall/gcChangeInfo.xml</b></i></span><span class="inline-wrap"><i><b>$cat /opt/gcinstall/gcChangeInfo.xml</b></i></span><span class="inline-wrap"><i><b>​</b></i></span><span class="inline-wrap"><i><b>​</b></i></span></div></div><div id="qTe3ZoYXbGSAAito6v6Yi7" class="wolai-block"><figure class="wolai-center" style="width: 100%; flex-direction: column"><img src="file:////private/var/folders/9b/t1nnnj9d1sx8ckkvtf8722j80000gn/T/com.kingsoft.wpsoffice.mac/wps-tengfei/ksohtml/wpsxW9ook.jpg" style="width: 100%"/></figure></div><div id="rawjCc6MG5Hv3LxX1zx85a" class="wolai-block wolai-text"><div><span class="inline-wrap"><i><b>gcadmin distribution gcChangeInfo.xml p 1 d 0</b></i></span><span class="inline-wrap"><i><b>gcadmin distribution gcChangeInfo.xml p 1 d 0</b></i></span><span class="inline-wrap"><i><b>​</b></i></span><span class="inline-wrap"><i><b>​</b></i></span></div></div><div id="d3zuHywkpUDBhjdNTgmE6e" class="wolai-block"><figure class="wolai-center" style="width: 100%; flex-direction: column"><img src="file:////private/var/folders/9b/t1nnnj9d1sx8ckkvtf8722j80000gn/T/com.kingsoft.wpsoffice.mac/wps-tengfei/ksohtml/wpsl8jaiv.jpg" style="width: 100%"/></figure></div><div id="t61ZyRccubiF4a6R7k4xj9" class="wolai-block wolai-text"><div><span class="inline-wrap">初始化：</span><span class="inline-wrap"><i><b>gccli -uroot</b></i></span><span class="inline-wrap"><i><b>gccli -uroot</b></i></span><span class="inline-wrap"><i><b>​</b></i></span><span class="inline-wrap"><i><b>​</b></i></span><span class="inline-wrap">（root 用户默认密码是空；gbase 用户密码是</span></div></div><div id="qQ2nQjaQuk6otJKwEYAbke" class="wolai-block wolai-text"><div><span class="inline-wrap">“gbase20110531”），执行 initnodedatamap 命令</span></div></div><div id="rEz9PCWauPNDFSQoNAtU2P" class="wolai-block"><figure class="wolai-center" style="width: 100%; flex-direction: column"><img src="file:////private/var/folders/9b/t1nnnj9d1sx8ckkvtf8722j80000gn/T/com.kingsoft.wpsoffice.mac/wps-tengfei/ksohtml/wpsBp47dB.jpg" style="width: 100%"/></figure></div></article><footer></footer></body></html>