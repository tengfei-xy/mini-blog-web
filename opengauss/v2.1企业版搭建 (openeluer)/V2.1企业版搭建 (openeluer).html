<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="../../css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="../../css/prism.min.css"/><link rel="stylesheet" type="text/css" href="../../css/katex.min.css"/><link rel="stylesheet" type="text/css" href="../../css/wolai.css"/><title>V2.1企业版搭建 (openeluer) - wolai 笔记</title><link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; viewBox=&apos;0 0 800 800&apos;%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fff;%7D%3C/style%3E%3C/defs%3E%3Cg%3E%3Cpath class=&apos;cls-1&apos; d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Z&apos;/%3E%3Cpath d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Zm4.72,88.9H185.2L172.42,89c-32.78.62-43.68,3.24-54.71,9.14a45.84,45.84,0,0,0-19.54,19.54c-6.61,12.36-9.11,24.55-9.27,67.49V614.8L89,627.58c.62,32.78,3.24,43.68,9.14,54.71a45.84,45.84,0,0,0,19.54,19.54c12.36,6.61,24.55,9.11,67.49,9.27H610.08c46.79,0,59.41-2.44,72.21-9.28a45.84,45.84,0,0,0,19.54-19.54c6.61-12.36,9.11-24.55,9.27-67.49V189.92c0-46.79-2.44-59.41-9.28-72.21a45.84,45.84,0,0,0-19.54-19.54C669.93,91.56,657.74,89.06,614.8,88.9ZM233.33,493.33A73.34,73.34,0,1,1,160,566.67,73.35,73.35,0,0,1,233.33,493.33Z&apos;/%3E%3C/g%3E%3C/svg%3E"></link></head><body class="full-width small-font less-lead"><header><div class="image"></div><div class="title"><div class="banner"><div class="icon"></div></div><div data-title="V2.1企业版搭建 (openeluer)" class="main-title"></div></div></header><article><h1 id="8x7fWnW7bFxG2ZP7cYKSfe" class="wolai-block"><span class="inline-wrap">Centos7.6<span class="jill"></span>搭建<span class="jill"></span>OpenGauss V2.1<span class="jill"></span>企业版单节点</span></h1><h1 id="xv8sVu3AHiYtK4887SdzVu" class="wolai-block"><span class="inline-wrap">一、准备</span></h1><div id="16v8FKSHgfiw8djxs1nqoy" class="wolai-block wolai-text"><div><span class="inline-wrap">下载链接：</span><span class="inline-wrap"><a href="https://opengauss.org/zh/download.html"><span>https://opengauss.org/zh/download.html</span></a></span></div></div><div id="jgVn5jyHdza8JSf6Am3AQ3" class="wolai-block wolai-text"><div><span class="inline-wrap">文件列表：</span></div></div><ol class="wolai-block"><li id="gepVedXSQ9TtVTiwFFwSKA"><div class="marker"></div><span class="inline-wrap">tar xf openGauss-2.1.0-CentOS-64bit-all.tar.gz</span></li></ol><div id="7GNy5b9sadW6qPVRmxCAjB" class="wolai-block wolai-text"><div><span class="inline-wrap">物理机：1<span class="jill"></span>台、4<span class="jill"></span>核、16GB<span class="jill"></span>内存、100GB<span class="jill"></span>硬盘、IP：192.168.3.73、系统：Centos7.6（只支持改版本）</span></div></div><h1 id="gU323uYz7z5xoY2XcoZhVe" class="wolai-block"><span class="inline-wrap">二、配置环境</span></h1><div id="4mnaN5XUwci5S9X3VJz7Xk" class="wolai-block wolai-text"><div><span class="inline-wrap">参考</span><span class="inline-wrap"><a href="https://opengauss.org/zh/docs/2.1.0/docs/installation/准备软硬件安装环境.html"><span>官方配置文档</span></a></span></div></div><h2 id="i5a2ExCjpBfwpaXt95UyFq" class="wolai-block"><span class="inline-wrap">2.1<span class="jill"></span>必要步骤</span></h2><div id="uoCvYL897y6C7yXnsT5Szm" class="wolai-block wolai-text"><div><span class="inline-wrap">Yum 安装依赖</span></div></div><div id="x8dgrrpjze7DWuFxX4hzDq" class="wolai-block wolai-text"><div><span class="inline-wrap">注：Centos<span class="jill"></span>的系统镜像刚好可以满足</span><span class="inline-wrap"><a href="https://opengauss.org/zh/docs/2.1.0/docs/installation/准备软硬件安装环境.html#table1212531681911"><span>部署要求</span></a></span></div></div><code-block id="roUCvUKhzvqpekTeX5Rrsm" class="wolai-block"><div class="wolai-pre"><div data-lang="Bash" class="marker"></div><pre>yum <span class="token function">install</span> <span class="token parameter variable">-y</span> <span class="token function">bzip2</span> libaio-devel flex bison ncurses-devel glibc-devel patch redhat-lsb-core readline-devel</pre></div></code-block><div id="85QEHtfoohiDUgmTPDoLJZ" class="wolai-block wolai-text"><div><span class="inline-wrap">pyhon3<span class="jill"></span>在<span class="jill"></span>Centos<span class="jill"></span>的<span class="jill"></span>DVD<span class="jill"></span>镜像中不存在，可以用阿里云的源</span></div></div><code-block id="2DAu81gffpCkeHLbNRqBGg" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token literal-property property">http</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span><span class="token property-access">aliyun</span><span class="token punctuation">.</span><span class="token property-access">com</span><span class="token operator">/</span>repo<span class="token operator">/</span><span class="token maybe-class-name">Centos</span><span class="token operator">-</span><span class="token number">7</span><span class="token punctuation">.</span><span class="token property-access">repo</span></pre></div></code-block><div id="i8kx9626uaxykmrvdJssBV" class="wolai-block wolai-text"><div><span class="inline-wrap">关闭防火墙</span></div></div><code-block id="cv5yaoQzKfHTpgTMsymHYL" class="wolai-block"><div class="wolai-pre"><div data-lang="Bash" class="marker"></div><pre>systemctl stop firewalld
systemctl disable firewalld</pre></div></code-block><div id="sbj6N53rkdHTa9pSTsQwcx" class="wolai-block wolai-text"><div><span class="inline-wrap">关闭<span class="jill"></span>SELINUX</span></div></div><code-block id="gX7GFCYufEbaiQhF9aSmv6" class="wolai-block"><div class="wolai-pre"><div data-lang="Bash" class="marker"></div><pre><span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">'s/SELINUX=enforcing/SELINUX=disabled/'</span> /etc/selinux/config
setenforce <span class="token number">0</span></pre></div></code-block><h2 id="pVt71ALchr7JZzMctbjk8c" class="wolai-block"><span class="inline-wrap">2.2 可选步骤</span></h2><div id="rYezLgzp5MtG1Woznex8JQ" class="wolai-block wolai-text"><div><span class="inline-wrap">注：如果多节点，需要保证时间时间、时区相同，字符集相同</span></div></div><div id="jhWmuJzLEmA3b8KHgt5VjD" class="wolai-block wolai-text"><div><span class="inline-wrap">如果<span class="jill"></span>Centos<span class="jill"></span>的网卡<span class="jill"></span>mtu<span class="jill"></span>不是<span class="jill"></span>1500，建议进行修改</span></div></div><code-block id="mfVUsiewXAqiznBaMrKtNE" class="wolai-block"><div class="wolai-pre"><div data-lang="Bash" class="marker"></div><pre><span class="token function">ifconfig</span> 网卡编号 mtu 值</pre></div></code-block><div id="wRpqGxu6XyBEiR7G5aWLim" class="wolai-block wolai-text"><div><span class="inline-wrap">如果没有允许<span class="jill"></span>root<span class="jill"></span>登录<span class="jill"></span>ssh，编辑/etc/ssh/sshd_config</span></div></div><code-block id="uoo4SkTBYaH3Cex2i13MPD" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token maybe-class-name">PermitRootLogin</span> yes</pre></div></code-block><div id="6WwYKQjxe8L8AkqDuHihxh" class="wolai-block wolai-text"><div><span class="inline-wrap">关闭登录提示，编辑/etc/ssh/sshd_config，注释<span class="jill"></span>Banner<span class="jill"></span>行</span></div></div><code-block id="trqH1s4tKwodH4zHEvh12C" class="wolai-block"><div class="wolai-pre"><div data-lang="Bash" class="marker"></div><pre><span class="token comment">#Banner XXXX ```</span></pre></div></code-block><h2 id="1HcWqDefxqEgkFgmfyULiB" class="wolai-block"><span class="inline-wrap">2.3 重启主机</span></h2><code-block id="hffPgiWnbyB9DyEBVe2dNa" class="wolai-block"><div class="wolai-pre"><div data-lang="Bash" class="marker"></div><pre><span class="token function">reboot</span></pre></div></code-block><h1 id="sdcfvq8yfaRKtdXxsoVo6P" class="wolai-block"><span class="inline-wrap">预安装（root<span class="jill"></span>用户）</span></h1><div id="vgfRwJGsDGw3PJiUSdoUSN" class="wolai-block wolai-text"><div><span class="inline-wrap">规划安装包目录</span></div></div><code-block id="h8bSCS1BNx4zGbKQfwkYr4" class="wolai-block"><div class="wolai-pre"><div data-lang="Bash" class="marker"></div><pre><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /opt/software/openGauss
<span class="token function">chmod</span> <span class="token number">755</span> <span class="token parameter variable">-R</span> /opt/software</pre></div></code-block><div id="cgxSipztFPHEg7S5nL9TUL" class="wolai-block wolai-text"><div><span class="inline-wrap">释放所有文件</span></div></div><code-block id="7ufbkhERSZApYUtTbRh6jg" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>tar xf openGauss<span class="token operator">-</span><span class="token number">2.1</span><span class="token number">.0</span><span class="token operator">-</span><span class="token maybe-class-name">CentOS</span><span class="token operator">-</span>64bit<span class="token operator">-</span>all<span class="token punctuation">.</span><span class="token property-access">tar</span><span class="token punctuation">.</span><span class="token property-access">gz</span> <span class="token operator">-</span><span class="token constant">C</span> <span class="token operator">/</span>opt<span class="token operator">/</span>software<span class="token operator">/</span>openGauss</pre></div></code-block><div id="6yBXh9aBZR6s1tFrmLJuQk" class="wolai-block wolai-text"><div><span class="inline-wrap">进入安装目录</span></div></div><code-block id="mSPxshsxAG5kvBkoTGgPzk" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>cd <span class="token operator">/</span>opt<span class="token operator">/</span>software<span class="token operator">/</span>openGauss</pre></div></code-block><div id="ggMnrjjV93fFpya3L2Sm7R" class="wolai-block wolai-text"><div><span class="inline-wrap">释放<span class="jill"></span>om</span></div></div><code-block id="8VhofbGPMNLJXYHuMAXzhe" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>tar xf openGauss<span class="token operator">-</span><span class="token number">2.1</span><span class="token number">.0</span><span class="token operator">-</span><span class="token maybe-class-name">CentOS</span><span class="token operator">-</span>64bit<span class="token operator">-</span>om<span class="token punctuation">.</span><span class="token property-access">tar</span><span class="token punctuation">.</span><span class="token property-access">gz</span></pre></div></code-block><div id="rUd1FJNchN62gnmWHvNsDv" class="wolai-block wolai-text"><div><span class="inline-wrap">释放<span class="jill"></span>server</span></div></div><code-block id="1JHNRrJtAF9KE4FBvvfhsi" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>tar xf openGauss<span class="token operator">-</span><span class="token number">2.1</span><span class="token number">.0</span><span class="token operator">-</span><span class="token maybe-class-name">CentOS</span><span class="token operator">-</span>64bit<span class="token punctuation">.</span><span class="token property-access">tar</span><span class="token punctuation">.</span><span class="token property-access">bz2</span></pre></div></code-block><div id="oSUHBSYJs13YSRssvEXTyo" class="wolai-block wolai-text"><div><span class="inline-wrap">准备/opt/software/openGauss/cluster_config.xml<span class="jill"></span>配置文件，下方是单节点的<span class="jill"></span>xml<span class="jill"></span>配置文件</span></div></div><div id="73K143itvK3uYJc28ZrhxJ" class="wolai-block wolai-text"><div><span class="inline-wrap">注：若是多节点，</span><span class="inline-wrap"><a href="https://opengauss.org/zh/docs/2.1.0/docs/installation/创建XML配置文件.html"><span>参考<span class="jill"></span>xml<span class="jill"></span>说明文档</span></a></span></div></div><code-block id="ap5LHZv2TNCEdXEgvYnPfA" class="wolai-block"><div class="wolai-pre"><div data-lang="Xml" class="marker"></div><pre><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ROOT</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!-- openGauss整体信息 --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CLUSTER</span><span class="token punctuation">></span></span>
        <span class="token comment">&lt;!-- 数据库名称 --></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PARAM</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clusterName<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dbCluster<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
        <span class="token comment">&lt;!-- 数据库节点名称(hostname) --></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PARAM</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>nodeNames<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>opengauss<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
        <span class="token comment">&lt;!-- 数据库安装目录--></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PARAM</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gaussdbAppPath<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/opt/huawei/install/app<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
        <span class="token comment">&lt;!-- 日志目录--></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PARAM</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gaussdbLogPath<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/var/log/omm<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
        <span class="token comment">&lt;!-- 临时文件目录--></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PARAM</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tmpMppdbPath<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/opt/huawei/tmp<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
        <span class="token comment">&lt;!-- 数据库工具目录--></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PARAM</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gaussdbToolPath<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/opt/huawei/install/om<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
        <span class="token comment">&lt;!-- 数据库core文件目录--></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PARAM</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>corePath<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/opt/huawei/corefile<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
        <span class="token comment">&lt;!-- 节点IP，与数据库节点名称列表一一对应 --></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PARAM</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>backIp1s<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>192.168.3.73<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span> 
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>CLUSTER</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!-- 每台服务器上的节点部署信息 --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DEVICELIST</span><span class="token punctuation">></span></span>
        <span class="token comment">&lt;!-- 节点1上的部署信息 --></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>DEVICE</span> <span class="token attr-name">sn</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>opengauss<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token comment">&lt;!-- 节点1的主机名称 --></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PARAM</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>opengauss<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
            <span class="token comment">&lt;!-- 节点1所在的AZ及AZ优先级 --></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PARAM</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>azName<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>AZ1<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PARAM</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>azPriority<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
            <span class="token comment">&lt;!-- 节点1的IP，如果服务器只有一个网卡可用，将backIP1和sshIP1配置成同一个IP --></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PARAM</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>backIp1<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>192.168.3.73<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PARAM</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sshIp1<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>192.168.3.73<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
               
	    <span class="token comment">&lt;!--dbnode--></span>
	    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PARAM</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataNum<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
	    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PARAM</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataPortBase<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>15400<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
	    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PARAM</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataNode1<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/opt/huawei/install/data/dn<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PARAM</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dataNode1_syncNum<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DEVICE</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>DEVICELIST</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ROOT</span><span class="token punctuation">></span></span></pre></div></code-block><div id="61mEuA258m2mkHQRagNXdc" class="wolai-block wolai-text"><div><span class="inline-wrap">通过<span class="jill"></span>gs_preinstll<span class="jill"></span>创建用户以及环境，</span></div></div><div id="b6NWpUWJMXJSGD1REQzzYK" class="wolai-block wolai-text"><div><span class="inline-wrap">注：此操作需要在每台主机上执行该命令。</span></div></div><div id="mmnoewxtu9khWmJqP55zEF" class="wolai-block wolai-text"><div><span class="inline-wrap">注：采用交互式过程中会需要要求设定<span class="jill"></span>omm<span class="jill"></span>用户的密码</span></div></div><code-block id="7Xgknb8keTGZ8UcWvdLwBA" class="wolai-block"><div class="wolai-pre"><div data-lang="Bash" class="marker"></div><pre><span class="token comment"># omm为数据库管理员（也是运行openGauss的操作系统用户）</span>
<span class="token comment"># dbgrp为运行openGauss的操作系统用户的群组名称</span>
<span class="token comment"># /opt/software/openGauss/cluster_config.xml为openGauss配置文件路径。</span>

<span class="token punctuation">[</span>root@opengauss yum.repos.d<span class="token punctuation">]</span><span class="token comment"># /opt/software/openGauss/script/gs_preinstall -U omm -G dbgrp -X /opt/software/openGauss/cluster_config.xml</span>
Parsing the configuration file.
Successfully parsed the configuration file.
Installing the tools on the <span class="token builtin class-name">local</span> node.
Successfully installed the tools on the <span class="token builtin class-name">local</span> node.
Setting pssh path
Successfully <span class="token builtin class-name">set</span> core path.
Are you sure you want to create the user<span class="token punctuation">[</span>omm<span class="token punctuation">]</span> and create trust <span class="token keyword">for</span> it <span class="token punctuation">(</span>yes/no<span class="token punctuation">)</span>? <span class="token function">yes</span>
Please enter password <span class="token keyword">for</span> cluster user.
Password: 
Please enter password <span class="token keyword">for</span> cluster user again.
Password: 
Successfully created <span class="token punctuation">[</span>omm<span class="token punctuation">]</span> user on all nodes.
Preparing SSH service.
Successfully prepared SSH service.
Checking OS software.
Successfully check os software.
Checking OS version.
Successfully checked OS version.
Creating cluster<span class="token string">'s path.
Successfully created cluster'</span>s path.
Set and check OS parameter.
Setting OS parameters.
Successfully <span class="token builtin class-name">set</span> OS parameters.
Warning: Installation environment contains some warning messages.
Please get <span class="token function">more</span> details by <span class="token string">"/opt/software/openGauss/script/gs_checkos -i A -h opengauss --detail"</span><span class="token builtin class-name">.</span>
Set and check OS parameter completed.
Preparing CRON service.
Successfully prepared CRON service.
Setting user environmental variables.
Successfully <span class="token builtin class-name">set</span> user environmental variables.
Setting the dynamic <span class="token function">link</span> library.
Successfully <span class="token builtin class-name">set</span> the dynamic <span class="token function">link</span> library.
Setting Core <span class="token function">file</span>
Successfully <span class="token builtin class-name">set</span> core path.
Setting pssh path
Successfully <span class="token builtin class-name">set</span> pssh path.
Setting Cgroup.
Successfully <span class="token builtin class-name">set</span> Cgroup.
Set ARM Optimization.
No need to <span class="token builtin class-name">set</span> ARM Optimization.
Fixing server package owner.
Setting finish flag.
Successfully <span class="token builtin class-name">set</span> finish flag.
Preinstallation succeeded.</pre></div></code-block><div id="iDPXPjbzMjybnsNB7HvWSA" class="wolai-block wolai-text"><div><span class="inline-wrap">生效内核参数</span></div></div><code-block id="8W976ShJd2SYGojrxS8gvc" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>sysctl <span class="token operator">-</span>p</pre></div></code-block><h1 id="dt8vYcohvrP3hkgQnmVksf" class="wolai-block"><span class="inline-wrap">执行安装（omm<span class="jill"></span>用户）</span></h1><div id="h6Yaswb2PfHTPWu1yn9Jw7" class="wolai-block wolai-text"><div><span class="inline-wrap">进行互信</span></div></div><code-block id="56pEpcQVWZJDhHjX8WmL8u" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>ssh<span class="token operator">-</span>keygen
ssh<span class="token operator">-</span>copy<span class="token operator">-</span>id  <span class="token number">192.168</span><span class="token number">.3</span><span class="token number">.73</span></pre></div></code-block><div id="cFhHjyjqpQk4o7pMBx4paU" class="wolai-block wolai-text"><div><span class="inline-wrap">安装</span></div></div><div id="wc2TZaUpPxXFjwtQugqMRS" class="wolai-block wolai-text"><div><span class="inline-wrap">注：采用交互式过程中会需要要求设定数据库的强密码，</span></div></div><div id="nVXJ53qqfAykbXqSkYqGtB" class="wolai-block wolai-text"><div><span class="inline-wrap">日志路径：/var/log/omm/omm/om</span></div></div><div id="mmJCJGHSD7cqjjvo2RG3rA" class="wolai-block wolai-text"><div><span class="inline-wrap">日志文件：gs_install-YYYY-MMDD_HHMMSS.log、gs_local-YYYY-MM-DD_HHMMSS.log</span></div></div><code-block id="k6HjVb46WEMFGMW769QVqZ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>gs_install <span class="token operator">-</span><span class="token constant">X</span> <span class="token operator">/</span>opt<span class="token operator">/</span>software<span class="token operator">/</span>openGauss<span class="token operator">/</span>cluster_config<span class="token punctuation">.</span><span class="token property-access">xml</span></pre></div></code-block></article><footer></footer></body></html>