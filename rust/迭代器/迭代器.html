<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="../../css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="../../css/prism.min.css"/><link rel="stylesheet" type="text/css" href="../../css/katex.min.css"/><link rel="stylesheet" type="text/css" href="../../css/wolai.css"/><title>迭代器 - wolai 笔记</title><link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; viewBox=&apos;0 0 800 800&apos;%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fff;%7D%3C/style%3E%3C/defs%3E%3Cg%3E%3Cpath class=&apos;cls-1&apos; d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Z&apos;/%3E%3Cpath d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Zm4.72,88.9H185.2L172.42,89c-32.78.62-43.68,3.24-54.71,9.14a45.84,45.84,0,0,0-19.54,19.54c-6.61,12.36-9.11,24.55-9.27,67.49V614.8L89,627.58c.62,32.78,3.24,43.68,9.14,54.71a45.84,45.84,0,0,0,19.54,19.54c12.36,6.61,24.55,9.11,67.49,9.27H610.08c46.79,0,59.41-2.44,72.21-9.28a45.84,45.84,0,0,0,19.54-19.54c6.61-12.36,9.11-24.55,9.27-67.49V189.92c0-46.79-2.44-59.41-9.28-72.21a45.84,45.84,0,0,0-19.54-19.54C669.93,91.56,657.74,89.06,614.8,88.9ZM233.33,493.33A73.34,73.34,0,1,1,160,566.67,73.35,73.35,0,0,1,233.33,493.33Z&apos;/%3E%3C/g%3E%3C/svg%3E"></link></head><body class="full-width small-font"><header><div class="image"></div><div class="title"><div class="banner"><div class="icon"></div></div><div data-title="迭代器" class="main-title"></div></div></header><article><div id="sjRF5kk5LXUhVAgb4NYp2q" class="wolai-block wolai-text"><div><span class="blue inline-wrap">定义：</span><span class="inline-wrap">迭代器是 Rust 中的一个核心概念，它允许您以一种简洁、安全和高效的方式遍历和处理集合中的元素，而无需手动管理索引或循环。</span></div></div><div id="886ER7oC9yZT1UhsreSCHJ" class="wolai-block wolai-text"><div><span class="blue inline-wrap">性质：</span><span class="inline-wrap">Rust 的迭代器是惰性且零成本抽象的</span><span class="gray inline-wrap">（没有使用时，你不必为其买单。 更进一步说，需要使用时，你也无法写出更优的代码了。）</span><span class="inline-wrap">，意味着它们仅在需要时生成和处理元素。这种设计能够提供更高的性能和内存效率，因为它避免了不必要的计算和分配。</span></div></div><details id="gimz4gR9uBTqcc8HidkHEw" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">特征</span></summary><details id="c5WRu1vC4XrqguZQt1AE2F" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap"><code>Iterator</code></span></summary><div id="jwurPpr5rqNsGyERm38Rpy" class="wolai-block wolai-text"><div><span class="inline-wrap">定义：是迭代器特征</span></div></div><details id="hbdbBgCzvbXyjzGopaGTmy" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">实现</span></summary><div id="4mMqaVDA5RDbwZTK5GBW4o" class="wolai-block wolai-text"><div><span class="inline-wrap">实现计数器</span></div></div><code-block id="qm4NNjLX35rE8vQHPvEzxj" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token keyword">struct</span> <span class="token type-definition class-name">Counter</span> <span class="token punctuation">{</span>
    count<span class="token punctuation">:</span> <span class="token keyword">u32</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">impl</span> <span class="token class-name">Counter</span> <span class="token punctuation">{</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Counter</span> <span class="token punctuation">{</span>
        <span class="token class-name">Counter</span> <span class="token punctuation">{</span> count<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block><div id="6LVzEyrgAYsjVdEwb6HKjC" class="wolai-block wolai-text"><div><span class="inline-wrap">我们为计数器 </span><span class="inline-wrap"><code>Counter</code></span><span class="inline-wrap"> 实现了一个关联函数 </span><span class="inline-wrap"><code>new</code></span><span class="inline-wrap">，用于创建新的计数器实例。下面我们继续为计数器实现 </span><span class="inline-wrap"><code>Iterator</code></span><span class="inline-wrap"> 特征</span></div></div><code-block id="9dpVxJCausCrqHYQKD2tMJ" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token keyword">impl</span> <span class="token class-name">Iterator</span> <span class="token keyword">for</span> <span class="token class-name">Counter</span> <span class="token punctuation">{</span>
    <span class="token keyword">type</span> <span class="token type-definition class-name">Item</span> <span class="token operator">=</span> <span class="token keyword">u32</span><span class="token punctuation">;</span>

    <span class="token keyword">fn</span> <span class="token function-definition function">next</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">mut</span> <span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Option</span><span class="token operator">&lt;</span><span class="token keyword">Self</span><span class="token punctuation">::</span><span class="token class-name">Item</span><span class="token operator">></span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token keyword">self</span><span class="token punctuation">.</span>count <span class="token operator">&lt;</span> <span class="token number">5</span> <span class="token punctuation">{</span>
            <span class="token keyword">self</span><span class="token punctuation">.</span>count <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">.</span>count<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token class-name">None</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre></div></code-block><div id="jSN9V6Wq9Bh5tfymLyN6gF" class="wolai-block wolai-text"><div><span class="inline-wrap">首先，将该特征的关联类型设置为 </span><span class="inline-wrap"><code>u32</code></span><span class="inline-wrap">，由于我们的计数器保存的 </span><span class="inline-wrap"><code>count</code></span><span class="inline-wrap"> 字段就是 </span><span class="inline-wrap"><code>u32</code></span><span class="inline-wrap"> 类型， 因此在 </span><span class="inline-wrap"><code>next</code></span><span class="inline-wrap"> 方法中，最后返回的是实际上是 </span><span class="inline-wrap"><code>Option&lt;u32&gt;</code></span><span class="inline-wrap"> 类型。</span></div></div><div id="6ziUHNSGKfDbTKsq2HDbu" class="wolai-block wolai-text"><div><span class="inline-wrap">每次调用 </span><span class="inline-wrap"><code>next</code></span><span class="inline-wrap"> 方法，都会让计数器的值加一，然后返回最新的计数值，一旦计数大于 5，就返回 </span><span class="inline-wrap"><code>None</code></span><span class="inline-wrap">。</span></div></div><div id="wURPXjJ7iSTcZCBqM46sFv" class="wolai-block wolai-text"><div><span class="inline-wrap">最后，使用我们新建的 </span><span class="inline-wrap"><code>Counter</code></span><span class="inline-wrap"> 进行迭代：</span></div></div><code-block id="kmi3kr1uuW7iTjyLzLLPxk" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token keyword">let</span> <span class="token keyword">mut</span> counter <span class="token operator">=</span> <span class="token class-name">Counter</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token macro property">assert_eq!</span><span class="token punctuation">(</span>counter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property">assert_eq!</span><span class="token punctuation">(</span>counter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property">assert_eq!</span><span class="token punctuation">(</span>counter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property">assert_eq!</span><span class="token punctuation">(</span>counter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property">assert_eq!</span><span class="token punctuation">(</span>counter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property">assert_eq!</span><span class="token punctuation">(</span>counter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">None</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block></details></details><div id="8WKmJmpBqr6bhr9Ebbp9Yt" class="wolai-block wolai-text"><div><span class="inline-wrap"><code>IntoIterator</code></span><span class="inline-wrap"> 强调的是某一个类型如果实现了该特征，它可以通过 </span><span class="inline-wrap"><code>into_iter</code></span><span class="inline-wrap">，</span><span class="inline-wrap"><code>iter</code></span><span class="inline-wrap"> 等方法变成一个迭代器。</span></div></div></details><details id="8v5AgDYu5BdT68W6mUuWrj" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">迭代器方法</span></summary><div id="hpgedQ7JdC9UddaR32r1ek" class="wolai-block wolai-text"><div><span class="inline-wrap"><code>iter()</code></span><span class="inline-wrap">：返回一个不可变的迭代器，用于按顺序访问集合的每个元素。</span></div></div><div id="8u8dnW5R1HX5Ahw7jAfDT2" class="wolai-block wolai-text"><div><span class="inline-wrap"><code>iter_mut()</code></span><span class="inline-wrap">：返回一个可变的迭代器，用于按顺序访问集合的每个可变引用。</span></div></div><details id="jRn9jLfxhoUSqdACQktQdj" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap"><code>into_iter()</code></span></summary><div id="etVBjMkK8HCpRCFEtoX5Xe" class="wolai-block wolai-text"><div><span class="blue inline-wrap">定义：</span><span class="inline-wrap">将集合转换为</span><span class="inline-wrap"><b>拥有所有权</b></span><span class="inline-wrap">的迭代器，允许消耗集合并产生它的元素。这个方法是由</span><span class="inline-wrap"><code>IntoIterator</code></span><span class="inline-wrap"> trait 提供的。</span></div></div><div id="iUKhC97pnSjxTULd3SZKe1" class="wolai-block wolai-text"><div><span class="blue inline-wrap">作用：</span><span class="inline-wrap">用于将某个类型的值转换为可迭代对象（iterator）。</span></div></div><div id="7uYPExKWeWTYHawZDsf77q" class="wolai-block wolai-text"><div><span class="blue inline-wrap">过程：</span><span class="inline-wrap">当我们调用</span><span class="inline-wrap"><code>into_iter()</code></span><span class="inline-wrap">方法时，它会获取值的所有权（ownership），并返回一个实现了</span><span class="inline-wrap"><code>Iterator</code></span><span class="inline-wrap"> trait 的迭代器对象。这个迭代器对象可以用于遍历值的每个元素，并且在遍历完后会自动释放资源。</span></div></div><details id="2j6wrWeUmX7rwCS68FVEpf" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">示例</span></summary><div id="2yrf45wWRZdA1FRvQSWW2t" class="wolai-block wolai-text"><div><span class="inline-wrap">在这个的示例中，我们首先创建了一个包含一些整数的</span><span class="inline-wrap"><code>Vec</code></span><span class="inline-wrap">。然后，我们调用</span><span class="inline-wrap"><code>into_iter()</code></span><span class="inline-wrap">方法将</span><span class="inline-wrap"><code>Vec</code></span><span class="inline-wrap">转换为迭代器，并将迭代器绑定到变量</span><span class="inline-wrap"><code>iter</code></span><span class="inline-wrap">上。最后，我们使用</span><span class="inline-wrap"><code>for</code></span><span class="inline-wrap">循环遍历迭代器，并打印每个元素的值。</span></div></div><code-block id="nsMAhF6CZgoz329WFmdr3E" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> vec<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token keyword">i32</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token macro property">vec!</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 使用into_iter()方法将Vec&lt;i32>转换为迭代器</span>
    <span class="token keyword">let</span> iter <span class="token operator">=</span> vec<span class="token punctuation">.</span><span class="token function">into_iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 使用for循环遍历迭代器</span>
    <span class="token keyword">for</span> num <span class="token keyword">in</span> iter <span class="token punctuation">{</span>
        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block></details></details><div id="3Pa4wgop1ewsGua7Gvt98q" class="wolai-block wolai-text"><div><span class="inline-wrap"><code>enumerate()</code></span><span class="inline-wrap">：返回一个元组迭代器，每个元组包含集合中的索引和对应的元素。</span></div></div></details><details id="aKcU6QNw1tURGDLiEGYkfd" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">处理迭代器方法</span></summary><details id="xsb2wvNcqWv3CfNA1MrpUR" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">消费性适配器</span></summary><div id="q12kPUG3CwqKSFm97qa3od" class="wolai-block wolai-text"><div><span class="blue inline-wrap">定义：</span><span class="inline-wrap">迭代器上的某个方法 </span><span class="inline-wrap"><code>A</code></span><span class="inline-wrap"> 在其内部调用了 </span><span class="inline-wrap"><code>next</code></span><span class="inline-wrap"> 方法，那么 </span><span class="inline-wrap"><code>A</code></span><span class="inline-wrap"> 就被称为消费性适配器。这意味着一旦消费性适配器被调用，迭代器将被完全遍历并且不再可用。</span></div></div><details id="pgxZSnZ6XD7xE3ExhU8azM" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap"><code>collect()</code></span></summary><div id="bBG32evsZjRXuTcAiXtP7g" class="wolai-block wolai-text"><div><span class="blue inline-wrap">作用：</span><span class="inline-wrap">用于从迭代器构建集合。它可以根据目标集合的类型自动推断。</span></div></div><details id="coeFCvi4FdSbCi81USj7sW" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">语法</span></summary><div id="jUuVxGyR1B6Txtnczv6wnr" class="wolai-block wolai-text"><div><span class="inline-wrap"><code>B</code></span><span class="inline-wrap">表示目标集合的类型，</span><span class="inline-wrap"><code>FromIterator</code></span><span class="inline-wrap">是一个<span class="jill"></span>trait，用于定义如何从迭代器构建集合。</span></div></div><code-block id="64EGkoasMDycpci4dSizMy" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token keyword">fn</span> <span class="token function-definition function">collect</span><span class="token operator">&lt;</span><span class="token class-name">B</span><span class="token punctuation">:</span> <span class="token class-name">FromIterator</span><span class="token operator">&lt;</span><span class="token keyword">Self</span><span class="token punctuation">::</span><span class="token class-name">Item</span><span class="token operator">>></span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">B</span></pre></div></code-block></details><details id="gr37d7eNzWuCJcM34jxQdg" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">示例</span></summary><div id="gEBbg9YezzwqWDmCJ47ndi" class="wolai-block wolai-text"><div><span class="inline-wrap">在这个例子中，我们首先创建了一个包含一些数字的</span><span class="inline-wrap"><code>Vec</code></span><span class="inline-wrap">。然后，我们使用</span><span class="inline-wrap"><code>into_iter()</code></span><span class="inline-wrap">方法将</span><span class="inline-wrap"><code>Vec</code></span><span class="inline-wrap">转换为一个迭代器，并使用</span><span class="inline-wrap"><code>map()</code></span><span class="inline-wrap">方法对每个元素进行平方操作。最后，我们使用</span><span class="inline-wrap"><code>collect()</code></span><span class="inline-wrap">方法收集结果，并将其转换为一个新的</span><span class="inline-wrap"><code>Vec&lt;i32&gt;</code></span><span class="inline-wrap">。</span></div></div><code-block id="qsSwReYKLxyiQZ829sGXdC" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> numbers <span class="token operator">=</span> <span class="token macro property">vec!</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> squared<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token keyword">i32</span><span class="token operator">></span> <span class="token operator">=</span> numbers<span class="token punctuation">.</span><span class="token function">into_iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>x<span class="token closure-punctuation punctuation">|</span></span> x <span class="token operator">*</span> x<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"{:?}"</span><span class="token punctuation">,</span> squared<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><div id="5v562WoaM9558tjUazqJiB" class="wolai-block wolai-text"><div><span class="inline-wrap">当你运行这段代码时，输出将会是：</span></div></div><code-block id="jEpTL3bTgbgP1uz7kjrJ4" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">]</span></pre></div></code-block><div id="tDqaGMDBNCgMGV5QXsC6ea" class="wolai-block wolai-text"><div><span class="inline-wrap">这是原始数字的平方结果构成的</span><span class="inline-wrap"><code>Vec</code></span><span class="inline-wrap">。</span></div></div></details></details><details id="JVzCUeFjRjb3hJ4dLYnXL" class="wolai-block"><summary><div class="marker placeholder"></div><span class="inline-wrap"><code>count()</code></span></summary></details><details id="2at9WDE2eTcNnBmfBR72LL" class="wolai-block"><summary><div class="marker placeholder"></div><span class="inline-wrap"><code>for_each()</code></span></summary></details><div id="qXRX3TySEW8vRxmq1JKEJP" class="wolai-block wolai-text"><div><span class="inline-wrap"><code>sum()</code></span><span class="inline-wrap">：使用给定的初始值和一个累积函数，将迭代器的元素逐个组合起来。</span></div></div></details><details id="quzMpVRKgrk2vgXx1Bg1yq" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">迭代性适配器</span></summary><div id="3DDAWBotJax7SCVgdS64w2" class="wolai-block wolai-text"><div><span class="blue inline-wrap">定义：</span><span class="inline-wrap">它会接收一个迭代器，并返回一个新的迭代器。这意味着原始迭代器仍然可用，</span></div></div><div id="qqkxy85Q8d7Ybx4CVkMsvj" class="wolai-block wolai-text"><div><span class="inline-wrap"><code>map()</code></span><span class="inline-wrap">：对集合中的每个元素应用给定的转换函数，并返回转换后的结果。</span></div></div><div id="ikT8eQFtWLZd5VwfaVg3TL" class="wolai-block wolai-text"><div><span class="inline-wrap"><code>take()</code></span><span class="inline-wrap">：只获取指定数量的元素，忽略剩余的元素。</span></div></div><div id="mDXE8uz7tKvtU9wp7JVsWP" class="wolai-block wolai-text"><div><span class="inline-wrap"><code>skip()</code></span><span class="inline-wrap">：跳过指定数量的元素，返回剩余的元素。</span></div></div><div id="dE7ffX5PeJKzzN67pxA84Z" class="wolai-block wolai-text"><div><span class="inline-wrap"><code>filter()</code></span><span class="inline-wrap">：根据指定的条件过滤集合中的元素，只保留满足条件的元素。</span></div></div><details id="cK9dWQbtJNbNhWr65Rh6Je" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap"><code>zip()</code></span><span class="inline-wrap">：合并迭代器</span></summary><div id="d5gD7gRBQEGE8fd9hpuwhi" class="wolai-block wolai-text"><div><span class="inline-wrap">说明：</span><span class="inline-wrap"><code>zip</code></span><span class="inline-wrap"> 把两个迭代器合并成一个迭代器，新迭代器中，每个元素都是一个元组，由之前两个迭代器的元素组成。例如将</span><span class="inline-wrap"><b>形如</b></span><span class="inline-wrap"> </span><span class="inline-wrap"><code>[1, 2, 3, 4, 5]</code></span><span class="inline-wrap"> 和 </span><span class="inline-wrap"><code>[2, 3, 4, 5]</code></span><span class="inline-wrap"> 的迭代器合并后，新的迭代器形如 </span><span class="inline-wrap"><code>[(1, 2),(2, 3),(3, 4),(4, 5)]</code></span></div></div><code-block id="aFsfDDn2mbK6qwWN3EjrrF" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token keyword">let</span> sum<span class="token punctuation">:</span> <span class="token keyword">u32</span> <span class="token operator">=</span> <span class="token class-name">Counter</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">zip</span><span class="token punctuation">(</span><span class="token class-name">Counter</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token closure-punctuation punctuation">|</span></span> a <span class="token operator">*</span> b<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>x<span class="token closure-punctuation punctuation">|</span></span> x <span class="token operator">%</span> <span class="token number">3</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property">assert_eq!</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block></details><details id="sxjXpfpjZvmNu2A8U2z7w7" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap"><code>enumerate()</code></span><span class="inline-wrap">获取迭代器索引</span></summary><code-block id="oYDmrTWRUquBxQWiqgUfjB" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token macro property">vec!</span><span class="token punctuation">[</span><span class="token number">1u64</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>i<span class="token punctuation">,</span>v<span class="token punctuation">)</span> <span class="token keyword">in</span> v<span class="token punctuation">.</span><span class="token function">iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">enumerate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"第{}个值是{}"</span><span class="token punctuation">,</span>i<span class="token punctuation">,</span>v<span class="token punctuation">)</span>
<span class="token punctuation">}</span></pre></div></code-block></details><details id="mj4WWk3AvZL51xxurfNGaj" class="wolai-block"><summary><div class="marker placeholder"></div><span class="inline-wrap"></span><br/></summary></details></details></details><div id="uGhEgd4LpQeQte2WAvDupC" class="wolai-block wolai-text"><div></div></div></article><footer></footer></body></html>