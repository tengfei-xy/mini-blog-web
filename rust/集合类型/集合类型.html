<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="../../css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="../../css/prism.min.css"/><link rel="stylesheet" type="text/css" href="../../css/katex.min.css"/><link rel="stylesheet" type="text/css" href="../../css/wolai.css"/><title>集合类型 - wolai 笔记</title><link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; viewBox=&apos;0 0 800 800&apos;%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fff;%7D%3C/style%3E%3C/defs%3E%3Cg%3E%3Cpath class=&apos;cls-1&apos; d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Z&apos;/%3E%3Cpath d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Zm4.72,88.9H185.2L172.42,89c-32.78.62-43.68,3.24-54.71,9.14a45.84,45.84,0,0,0-19.54,19.54c-6.61,12.36-9.11,24.55-9.27,67.49V614.8L89,627.58c.62,32.78,3.24,43.68,9.14,54.71a45.84,45.84,0,0,0,19.54,19.54c12.36,6.61,24.55,9.11,67.49,9.27H610.08c46.79,0,59.41-2.44,72.21-9.28a45.84,45.84,0,0,0,19.54-19.54c6.61-12.36,9.11-24.55,9.27-67.49V189.92c0-46.79-2.44-59.41-9.28-72.21a45.84,45.84,0,0,0-19.54-19.54C669.93,91.56,657.74,89.06,614.8,88.9ZM233.33,493.33A73.34,73.34,0,1,1,160,566.67,73.35,73.35,0,0,1,233.33,493.33Z&apos;/%3E%3C/g%3E%3C/svg%3E"></link></head><body class="full-width small-font"><header><div class="image"></div><div class="title"><div class="banner"><div class="icon"></div></div><div data-title="集合类型" class="main-title"></div></div></header><article><details id="o3DvVwzHUV5X1fkTMhLVR7" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">定长数组</span></summary><div id="oqTTwDb46PtHNt4kFJX8PN" class="wolai-block wolai-text"><div><span class="blue inline-wrap">特点：</span><span class="inline-wrap">长度固定、元素类型相同、线性排序</span></div></div><div id="2KZpRVpQVjAA3BcQQ1LN3t" class="wolai-block wolai-text"><div><span class="inline-wrap">存</span><span class="blue inline-wrap">储位置：</span><span class="inline-wrap">栈</span></div></div><details id="ki4XFpaYBi76Q2AJ6fYRW9" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">创建</span></summary><code-block id="4jaeau8sFcduZCkhNA34FK" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre><span class="token comment">// 创建5个元素的i32类型的数组</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 创建10个i32，值为5的数组，通过COPY特征实现的</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span></pre></div></code-block></details><details id="6Wm8Y9CzFFkezbe9mJrPBF" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">越界访问</span></summary><div id="2LagU3c7NpqfSxHaVbcqqB" class="wolai-block wolai-text"><div><span class="inline-wrap">运行时进行检查，Rust 会出现 </span><span class="inline-wrap"><i><b>panic</b></i></span><span class="inline-wrap">。</span></div></div></details><details id="gWzEo6q7Ew2v9RHbDgrFN5" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">字符串数组</span></summary><div id="vuqXFSaohMdwZwJzQG2cR1" class="wolai-block wolai-text"><div><span class="inline-wrap">定义了<span class="jill"></span>8<span class="jill"></span>个元素的</span><span class="inline-wrap"><code>rust is good</code></span><span class="inline-wrap">字符串</span></div></div><code-block id="iTGGbngrmtXqSaJP5QtXEo" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre><span class="token keyword">let</span> array<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">;</span> <span class="token number">8</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token namespace">std<span class="token punctuation">::</span>array<span class="token punctuation">::</span></span><span class="token function">from_fn</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>_i<span class="token closure-punctuation punctuation">|</span></span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"rust is good!"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"{:#?}"</span><span class="token punctuation">,</span> array<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block></details><details id="64Ed4ZWK6tTxQdscEB28mV" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">字节数组</span></summary><div id="3GhEitDsM2VtJkp73GrWqd" class="wolai-block wolai-text"><div><span class="inline-wrap"><code>&amp;[u8; 21]</code></span><span class="inline-wrap"> 是类型注解，用于指定变量的类型。在这种情况下，它指定了 </span><span class="inline-wrap"><code>bytestring</code></span><span class="inline-wrap"> 的类型为一个固定长度为 21 的字节数组引用切片。</span></div></div><div id="oMXeXqyo5FCeGvjHXW3fWX" class="wolai-block wolai-text"><div><span class="inline-wrap"><code>b&quot;this is a byte string&quot;</code></span><span class="inline-wrap"> 是一个字节字符串字面量。在 Rust 中，以 </span><span class="inline-wrap"><code>b</code></span><span class="inline-wrap"> 开头的字符串表示字节字符串，即字符串的每个字符都是一个字节。在这个例子中，字节字符串的内容是 </span><span class="inline-wrap"><code>&quot;this is a byte string&quot;</code></span><span class="inline-wrap">。</span></div></div><code-block id="apwJrSBDEBZiZfBd6evmsb" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token keyword">let</span> bytestring<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span><span class="token keyword">u8</span><span class="token punctuation">;</span> <span class="token number">21</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">b"this is a byte string"</span><span class="token punctuation">;</span></pre></div></code-block><div id="qDjHPpFAkMsKtLB4eZDE4b" class="wolai-block wolai-text"><div><span class="inline-wrap">综上所述，该语句声明了一个名为 </span><span class="inline-wrap"><code>bytestring</code></span><span class="inline-wrap"> 的变量，它是一个固定长度为 21 的字节数组引用切片，并将字节字符串 </span><span class="inline-wrap"><code>&quot;this is a byte string&quot;</code></span><span class="inline-wrap"> 的地址赋给该变量。</span></div></div></details><details id="fHUmbCK9i9KNQSQdeac736" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">数组切片</span></summary><div id="oc6zgVGRzXV4WbVpNRaN7s" class="wolai-block wolai-text"><div><span class="inline-wrap">创建</span></div></div><code-block id="hbaXtngEab1LqdTuzvSiiy" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre><span class="token keyword">let</span> a<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">i32</span><span class="token punctuation">;</span> <span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> slice<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span><span class="token keyword">i32</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">&amp;</span>a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">..</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token macro property">assert_eq!</span><span class="token punctuation">(</span>slice<span class="token punctuation">,</span> <span class="token operator">&amp;</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><details id="a4HcTS2Suynvz3QnekvJpV" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">特点</span></summary><ul class="wolai-block"><li id="2bpNQrAw8Us4Ddhn5xH1gy"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">切片的长度可以与数组不同，并不是固定的，而是取决于你使用时指定的起始和结束位置</span></li><li id="oYAtv4gNDCeGUMR4wMg3nG"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">创建切片的代价非常小，因为切片只是针对底层数组的一个引用</span></li><li id="fURvtjpF1eBCafveZDtTdB"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><b>切片类型[T]</b></span><span class="inline-wrap">拥有不固定的大小，而</span><span class="inline-wrap"><b>切片引用类型&amp;[T]</b></span><span class="inline-wrap">则具有固定的大小，因为 Rust 很多时候都需要固定大小数据类型，因此&amp;[T]更有用,</span><span class="inline-wrap"><code>&amp;str</code></span><span class="inline-wrap">字符串切片也同理</span></li></ul></details></details></details><details id="h5VzJbAHkRhGFPPh2bLvXM" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">向量（Vector）</span></summary><details id="imkKnsPZ5CjeWMRVg4FU1D" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">动态数组</span></summary><div id="swn7r7Qs5eyNysd2r4TFqd" class="wolai-block wolai-text"><div><span class="inline-wrap">存储位置：堆</span></div></div><details id="o4TA4pcCYvT7YRnN9Mg63W" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">创建</span></summary><code-block id="pLnjL1TxkBqihhoZmny5QR" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre><span class="token comment">// 不确定长度</span>
<span class="token keyword">let</span> v<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token keyword">i32</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token class-name">Vec</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 确定长度</span>
<span class="token keyword">let</span> v<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token keyword">i32</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token class-name">Vec</span><span class="token punctuation">::</span><span class="token function">with_capacity</span><span class="token punctuation">(</span>capacity<span class="token punctuation">)</span> 
<span class="token comment">// 给予初始值</span>
<span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token macro property">vec!</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</pre></div></code-block></details><details id="rrxfzAMmkRyor6ii9PYn6" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">更新 / 添加 / 插入</span></summary><details id="bWkvFp3SLmLwSDiPgdFkiH" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">尾部添加</span></summary><code-block id="afLpfRCmVb8QmdbXZojoVy" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre>v<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block></details><details id="vLVrCr984YXj7Q48AxWbT2" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">头部插入</span></summary><code-block id="2nfXwtZKMm8JP2322QpB9a" class="wolai-block"><div class="wolai-pre"><div data-lang="Bash" class="marker"></div><pre>vec.insert<span class="token punctuation">(</span><span class="token number">0</span>, <span class="token string">"Hello"</span>.to_string<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span></pre></div></code-block></details><details id="gc32EuZ4hwmbP9fKbMdWrL" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">指定位置插入</span></summary><code-block id="rSC466fVoGQCgivcCAjxqT" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre>vec<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">"Hello"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block></details></details><details id="3vE8bWjuLto8pB2VSZrZ6d" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">生命周期</span></summary><ol class="wolai-block"><li id="5Tku7GcKzhQViQGk3jNxeY"><div class="marker"></div><span class="inline-wrap">超出作用域后，内部存储的所有内容随之删除</span></li><li id="ekhp3PrMqd54p3fP98q5JL"><div class="marker"></div><span class="inline-wrap">元素被引用的话，情况另说</span></li></ol></details><details id="77GpXDvCgwMQQFzxnmwC1Q" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">读取元素</span></summary><details id="jsDgJPJARCWGjm1qzChn2R" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">下标索引访问</span></summary><code-block id="baXCACrkh2qi3XE3eSAujH" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre><span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token macro property">vec!</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> third<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">i32</span> <span class="token operator">=</span> <span class="token operator">&amp;</span>v<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"第三个元素是 {}"</span><span class="token punctuation">,</span> third<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block></details><details id="gBbQv1nnByCRcLP4mmWPhT" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">get<span class="jill"></span>方法</span></summary><div id="gniRjyJDUHfv4fH8RELoX" class="wolai-block wolai-text"><div><span class="inline-wrap">注：越界时，get<span class="jill"></span>方法在内部做了处理，有值的时候返回 </span><span class="inline-wrap"><code>Some(T)</code></span><span class="inline-wrap">，无值的时候返回 </span><span class="inline-wrap"><code>None</code></span><span class="inline-wrap">，因此非常安全</span></div></div><code-block id="bid76ryyFXjHxeLoYUzsWx" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre><span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token macro property">vec!</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">match</span> v<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Some</span><span class="token punctuation">(</span>third<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"第三个元素是 {third}"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token class-name">None</span> <span class="token operator">=></span> <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"去你的第三个元素，根本没有！"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></pre></div></code-block></details><details id="5vM6bj2YUvG7wev87Sh345" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">迭代</span></summary><div id="6AvuqoAYaM2sCYSm4M5bLL" class="wolai-block wolai-text"><div><span class="inline-wrap">一般迭代</span></div></div><code-block id="7UQXwhscnTWa7Dy6No6raw" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre><span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token macro property">vec!</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token operator">&amp;</span>v <span class="token punctuation">{</span>
    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"{i}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><div id="3xkGmHSsU8QXDL5svmP9mD" class="wolai-block wolai-text"><div><span class="inline-wrap">迭代中修改元素</span></div></div><code-block id="82Gt6wNK6Tp6ARTbmdosBK" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre><span class="token keyword">let</span> <span class="token keyword">mut</span> v <span class="token operator">=</span> <span class="token macro property">vec!</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> v <span class="token punctuation">{</span>
    <span class="token operator">*</span>i <span class="token operator">+=</span> <span class="token number">10</span>
<span class="token punctuation">}</span></pre></div></code-block></details></details><details id="fKV3cPTypDFAtAz1wwjzwC" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">存储不同类型的元素</span></summary><details id="4boxh8eJKWMj28bA561EkW" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">通过枚举存储</span></summary><code-block id="xbAMKZmQHypDu5PH65fg6F" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre><span class="token attribute attr-name">#[derive(Debug)]</span>
<span class="token keyword">enum</span> <span class="token type-definition class-name">IpAddr</span> <span class="token punctuation">{</span>
    <span class="token constant">V4</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token constant">V6</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> v <span class="token operator">=</span> <span class="token macro property">vec!</span><span class="token punctuation">[</span>
        <span class="token class-name">IpAddr</span><span class="token punctuation">::</span><span class="token constant">V4</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token class-name">IpAddr</span><span class="token punctuation">::</span><span class="token constant">V6</span><span class="token punctuation">(</span><span class="token string">"::1"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> ip <span class="token keyword">in</span> v <span class="token punctuation">{</span>
        <span class="token function">show_addr</span><span class="token punctuation">(</span>ip<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fn</span> <span class="token function-definition function">show_addr</span><span class="token punctuation">(</span>ip<span class="token punctuation">:</span> <span class="token class-name">IpAddr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"{:?}"</span><span class="token punctuation">,</span>ip<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block></details><details id="uCSmmtYLaVh9qonWbEajKi" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">特征对象实现</span></summary><code-block id="rCCzGDJsJsrgMEt9XsW23H" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre><span class="token keyword">trait</span> <span class="token type-definition class-name">IpAddr</span> <span class="token punctuation">{</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">display</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">struct</span> <span class="token type-definition class-name">V4</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">impl</span> <span class="token class-name">IpAddr</span> <span class="token keyword">for</span> <span class="token constant">V4</span> <span class="token punctuation">{</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">display</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"ipv4: {:?}"</span><span class="token punctuation">,</span><span class="token keyword">self</span><span class="token punctuation">.</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">struct</span> <span class="token type-definition class-name">V6</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">impl</span> <span class="token class-name">IpAddr</span> <span class="token keyword">for</span> <span class="token constant">V6</span> <span class="token punctuation">{</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">display</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"ipv6: {:?}"</span><span class="token punctuation">,</span><span class="token keyword">self</span><span class="token punctuation">.</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> v<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token class-name">Box</span><span class="token operator">&lt;</span><span class="token keyword">dyn</span> <span class="token class-name">IpAddr</span><span class="token operator">>></span> <span class="token operator">=</span> <span class="token macro property">vec!</span><span class="token punctuation">[</span>
        <span class="token class-name">Box</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token constant">V4</span><span class="token punctuation">(</span><span class="token string">"127.0.0.1"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token class-name">Box</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token constant">V6</span><span class="token punctuation">(</span><span class="token string">"::1"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> ip <span class="token keyword">in</span> v <span class="token punctuation">{</span>
        ip<span class="token punctuation">.</span><span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></div></code-block></details></details><details id="ueWuw2RciLgYkiKcMD3fCE" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">排序</span></summary><div id="v166pbi5FqNA7dUpW6oFXX" class="wolai-block wolai-text"><div><span class="blue inline-wrap">特征：</span><span class="inline-wrap">需要实现</span><span class="inline-wrap"><code>Ord</code></span><span class="inline-wrap">和</span><span class="inline-wrap"><code>Eq</code></span><span class="inline-wrap">和</span><span class="inline-wrap"><code>PartialEq</code></span><span class="inline-wrap">和</span><span class="inline-wrap"><code>PartialOrd</code></span></div></div><details id="rQXAWASv5bU64t7K7cxxun" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">类型</span></summary><details id="seZ49iUodZyGK58QqwqAdE" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">稳定排序</span></summary><div id="4CzPiF8PToXDxhCQu75keq" class="wolai-block wolai-text"><div><span class="inline-wrap">说明：对相等的元素不进行排序，额外分配原数组一般的空间</span></div></div><code-block id="gBd5N4wUqAHLQJvCd3V1RA" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token keyword">mut</span> vec <span class="token operator">=</span> <span class="token macro property">vec!</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    
    vec<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
    <span class="token macro property">assert_eq!</span><span class="token punctuation">(</span>vec<span class="token punctuation">,</span> <span class="token macro property">vec!</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block></details><details id="sNPhrANenTtuPasdBBptUA" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">不稳定排序</span></summary><div id="nsUFohuvhbYx3ohFytNDZ8" class="wolai-block wolai-text"><div><span class="inline-wrap">说明：不保证对不等等的排序不进行排序，速度优于稳定排序</span></div></div><code-block id="5KikUkcewcfaZa8rFkJTEB" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token keyword">mut</span> vec <span class="token operator">=</span> <span class="token macro property">vec!</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    
    vec<span class="token punctuation">.</span><span class="token function">sort_unstable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
    <span class="token macro property">assert_eq!</span><span class="token punctuation">(</span>vec<span class="token punctuation">,</span> <span class="token macro property">vec!</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block></details></details><details id="g5yuZ65c1cYeofD1iHo9KY" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">结构体排序</span></summary><code-block id="jvRjmKnnFDZnh8MNnQNLuG" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre><span class="token attribute attr-name">#[derive(Debug)]</span>
<span class="token keyword">struct</span> <span class="token type-definition class-name">Person</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span>
    age<span class="token punctuation">:</span> <span class="token keyword">u32</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">impl</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">new</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token keyword">u32</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
        <span class="token class-name">Person</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> age <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token keyword">mut</span> people <span class="token operator">=</span> <span class="token macro property">vec!</span><span class="token punctuation">[</span>
        <span class="token class-name">Person</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token string">"Zoe"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token class-name">Person</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token string">"Al"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token class-name">Person</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token string">"John"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 定义一个按照年龄倒序排序的对比函数</span>
    people<span class="token punctuation">.</span><span class="token function">sort_unstable_by</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>a<span class="token punctuation">,</span> b<span class="token closure-punctuation punctuation">|</span></span> b<span class="token punctuation">.</span>age<span class="token punctuation">.</span><span class="token function">cmp</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"{:?}"</span><span class="token punctuation">,</span> people<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block></details></details></details><details id="wFUoGPKMtt7oKdHj2LWcAz" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">动态结构体</span></summary><div id="rgfZUEjTiiS8AYa1dYRH9j" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div></details></details><details id="i54oubBqmoWARYYEWCqUf3" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">哈希映射（HashMap）</span></summary><details id="eyZcPkCAEeBp3GwGoU98fV" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">说明</span></summary><ul class="wolai-block"><li id="vRjM1TgMEuDAxuFycKjoJn"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">若类型实现 </span><span class="inline-wrap"><code>Copy</code></span><span class="inline-wrap"> 特征，该类型会被复制进 </span><span class="inline-wrap"><code>HashMap</code></span><span class="inline-wrap">，因此无所谓所有权</span></li><li id="rq48LUgf14Gmb3CjP3A89C"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">若没实现 </span><span class="inline-wrap"><code>Copy</code></span><span class="inline-wrap"> 特征，所有权将被转移给 </span><span class="inline-wrap"><code>HashMap</code></span><span class="inline-wrap"> 中</span></li></ul></details><details id="ktCv2Au5dhR7K5EcQ9oN8J" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">创建</span></summary><details id="gESY7jNxomqMErPeiKnFF6" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">变量</span></summary><details id="gpnHwtwzB4M394F8Zs5dCz" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">使用<span class="jill"></span>new<span class="jill"></span>方法</span></summary><code-block id="h8wkvk32Z1UbWiCytHdKhV" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre><span class="token keyword">use</span> <span class="token namespace">std<span class="token punctuation">::</span>collections<span class="token punctuation">::</span></span><span class="token class-name">HashMap</span><span class="token punctuation">;</span>

<span class="token comment">// 创建一个HashMap，用于存储宝石种类和对应的数量</span>
<span class="token keyword">let</span> <span class="token keyword">mut</span> my_gems <span class="token operator">=</span> <span class="token class-name">HashMap</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 将宝石类型和对应的数量写入表中</span>
<span class="token comment">// 类型为 HashMap&lt;&amp;str,i32></span>
my_gems<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"红宝石"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
my_gems<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"蓝宝石"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
my_gems<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"河边捡的误以为是宝石的破石头"</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block><div id="uugLyHpqxpJiBq99kkvkTX" class="wolai-block wolai-text"><div><span class="blue inline-wrap">注意：</span><span class="inline-wrap">预先知道个数，可以使用 </span><span class="inline-wrap"><code>HashMap::with_capacity(capacity)</code></span><span class="inline-wrap">创建指定大小的 </span><span class="inline-wrap"><code>HashMap</code></span><span class="inline-wrap">，避免频繁的内存分配和拷贝，提升性能。</span></div></div></details><details id="jo7C4xiQ4q8hJytkjjGNpo" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">使用迭代器和<span class="jill"></span>collect<span class="jill"></span>方法创建</span></summary><code-block id="9xA5U3ySn85vvQWR81qQ1j" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token namespace">std<span class="token punctuation">::</span>collections<span class="token punctuation">::</span></span><span class="token class-name">HashMap</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> teams_list <span class="token operator">=</span> <span class="token macro property">vec!</span><span class="token punctuation">[</span>
        <span class="token punctuation">(</span><span class="token string">"中国队"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token string">"美国队"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token string">"日本队"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> teams_map<span class="token punctuation">:</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span>_<span class="token punctuation">,</span>_<span class="token operator">></span> <span class="token operator">=</span> teams_list<span class="token punctuation">.</span><span class="token function">into_iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"{:?}"</span><span class="token punctuation">,</span>teams_map<span class="token punctuation">)</span>
<span class="token punctuation">}</span></pre></div></code-block></details></details><details id="2MeVfkqmBEbTkW3q18WPDm" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">常量</span></summary><code-block id="nZKJKEHefuX7bVhd7xDtAH" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token keyword">const</span> <span class="token keyword">fn</span> <span class="token function-definition function">get_map</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token namespace">std<span class="token punctuation">::</span>collections<span class="token punctuation">::</span></span><span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token keyword">i32</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">'static</span> <span class="token keyword">str</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token keyword">mut</span> map <span class="token operator">=</span> <span class="token namespace">std<span class="token punctuation">::</span>collections<span class="token punctuation">::</span></span><span class="token class-name">HashMap</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"One"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"Two"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    map
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token constant">MY_MAP</span><span class="token punctuation">:</span> <span class="token namespace">std<span class="token punctuation">::</span>collections<span class="token punctuation">::</span></span><span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token keyword">i32</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span><span class="token lifetime-annotation symbol">'static</span> <span class="token keyword">str</span><span class="token operator">></span> <span class="token operator">=</span> <span class="token function">get_map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div></code-block></details></details><details id="33Pi7JJ8FWtbtis5cYhWNy" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">查询</span></summary><details id="kVWWWnFK9Bd4DpSBYqPXBZ" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">get<span class="jill"></span>方法</span></summary><aside id="hbfqLUUqk1Dn2KcN84G39w" class="bg-cultured wolai-block"><div data-symbol="📌" class="icon"></div><span class="inline-wrap">1. </span><span class="inline-wrap"><code>get</code></span><span class="inline-wrap"> 方法返回一个 </span><span class="inline-wrap"><code>Option&lt;&amp;i32&gt;</code></span><span class="inline-wrap"> 类型：当查询不到时，会返回一个 </span><span class="inline-wrap"><code>None</code></span><span class="inline-wrap">，查询到时返回 </span><span class="inline-wrap"><code>Some(&amp;i32)</code></span><span class="inline-wrap">
2. </span><span class="inline-wrap"><code>&amp;i32</code></span><span class="inline-wrap"> 是对 </span><span class="inline-wrap"><code>HashMap</code></span><span class="inline-wrap"> 中值的借用，如果不使用借用，可能会发生所有权的转移

</span></aside><code-block id="97CX5Hf4jUY48VYEUqb6F1" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre><span class="token keyword">use</span> <span class="token namespace">std<span class="token punctuation">::</span>collections<span class="token punctuation">::</span></span><span class="token class-name">HashMap</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token keyword">mut</span> scores <span class="token operator">=</span> <span class="token class-name">HashMap</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

scores<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"Blue"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
scores<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"Yellow"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> team_name <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"Blue"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> score<span class="token punctuation">:</span> <span class="token class-name">Option</span><span class="token operator">&lt;</span><span class="token operator">&amp;</span><span class="token keyword">i32</span><span class="token operator">></span> <span class="token operator">=</span> scores<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>team_name<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block></details></details><details id="4GsuB2mkcd4nji5mfut9Cf" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">更新</span></summary><aside id="6SrR7uEK6ZX4WBvcpB5KNd" class="wolai-block"><div class="icon"></div><span class="inline-wrap"><code>or_insert</code></span><span class="inline-wrap"> 返回了 </span><span class="inline-wrap"><code>&amp;mut v</code></span><span class="inline-wrap"> 引用，因此可以通过该可变引用直接修改 </span><span class="inline-wrap"><code>map</code></span><span class="inline-wrap"> 中对应的值</span></aside><code-block id="cPBhcjPykJoPGwJ5CMhDZR" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token namespace">std<span class="token punctuation">::</span>collections<span class="token punctuation">::</span></span><span class="token class-name">HashMap</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> <span class="token keyword">mut</span> scores <span class="token operator">=</span> <span class="token class-name">HashMap</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    scores<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"Blue"</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 覆盖已有的值</span>
    <span class="token keyword">let</span> old <span class="token operator">=</span> scores<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">"Blue"</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token macro property">assert_eq!</span><span class="token punctuation">(</span>old<span class="token punctuation">,</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 查询新插入的值</span>
    <span class="token keyword">let</span> new <span class="token operator">=</span> scores<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"Blue"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token macro property">assert_eq!</span><span class="token punctuation">(</span>new<span class="token punctuation">,</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 查询Yellow对应的值，若不存在则插入新值</span>
    <span class="token keyword">let</span> v <span class="token operator">=</span> scores<span class="token punctuation">.</span><span class="token function">entry</span><span class="token punctuation">(</span><span class="token string">"Yellow"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">or_insert</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token macro property">assert_eq!</span><span class="token punctuation">(</span><span class="token operator">*</span>v<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 不存在，插入5</span>

    <span class="token comment">// 查询Yellow对应的值，若不存在则插入新值</span>
    <span class="token keyword">let</span> v <span class="token operator">=</span> scores<span class="token punctuation">.</span><span class="token function">entry</span><span class="token punctuation">(</span><span class="token string">"Yellow"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">or_insert</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token macro property">assert_eq!</span><span class="token punctuation">(</span><span class="token operator">*</span>v<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 已经存在，因此50没有插入</span>
<span class="token punctuation">}</span></pre></div></code-block></details><details id="egyrZY9HTxq4QPttnDjzcr" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">高性能库</span></summary><details id="b3DZ6gJ3b24tmDTQgkmsau" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">高安全性</span></summary><code-block id="dPntJ7oET5dG7ZqkEmPxen" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre><span class="token keyword">use</span> <span class="token namespace">std<span class="token punctuation">::</span>hash<span class="token punctuation">::</span></span><span class="token class-name">BuildHasherDefault</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">std<span class="token punctuation">::</span>collections<span class="token punctuation">::</span></span><span class="token class-name">HashMap</span><span class="token punctuation">;</span>
<span class="token comment">// 引入第三方的哈希函数</span>
<span class="token keyword">use</span> <span class="token namespace">twox_hash<span class="token punctuation">::</span></span><span class="token class-name">XxHash64</span><span class="token punctuation">;</span>

<span class="token comment">// 指定HashMap使用第三方的哈希函数XxHash64</span>
<span class="token keyword">let</span> <span class="token keyword">mut</span> hash<span class="token punctuation">:</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span>_<span class="token punctuation">,</span> _<span class="token punctuation">,</span> <span class="token class-name">BuildHasherDefault</span><span class="token operator">&lt;</span><span class="token class-name">XxHash64</span><span class="token operator">>></span> <span class="token operator">=</span> <span class="token class-name">Default</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
hash<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">,</span> <span class="token string">"the answer"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token macro property">assert_eq!</span><span class="token punctuation">(</span>hash<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token string">"the answer"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></code-block></details><details id="nENUWkXWJ5nYx9PVtf2jRL" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">高性能</span></summary><div id="73W9hzjPXqRxYwYxMWj1hv" class="wolai-block wolai-text"><div><span class="inline-wrap">ahash</span></div></div></details></details></details><details id="4JG7HB37eq5byeWTpzjg9P" class="wolai-block"><summary><div class="marker placeholder"></div><span class="inline-wrap">哈希集（HashSet）</span></summary></details><div id="iUX1MUxdYtHSvYVtUYjWYn" class="wolai-block wolai-text"><div></div></div></article><footer></footer></body></html>