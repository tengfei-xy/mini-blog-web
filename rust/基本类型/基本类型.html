<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="../../css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="../../css/prism.min.css"/><link rel="stylesheet" type="text/css" href="../../css/katex.min.css"/><link rel="stylesheet" type="text/css" href="../../css/wolai.css"/><title>基本类型 - wolai 笔记</title><link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; viewBox=&apos;0 0 800 800&apos;%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fff;%7D%3C/style%3E%3C/defs%3E%3Cg%3E%3Cpath class=&apos;cls-1&apos; d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Z&apos;/%3E%3Cpath d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Zm4.72,88.9H185.2L172.42,89c-32.78.62-43.68,3.24-54.71,9.14a45.84,45.84,0,0,0-19.54,19.54c-6.61,12.36-9.11,24.55-9.27,67.49V614.8L89,627.58c.62,32.78,3.24,43.68,9.14,54.71a45.84,45.84,0,0,0,19.54,19.54c12.36,6.61,24.55,9.11,67.49,9.27H610.08c46.79,0,59.41-2.44,72.21-9.28a45.84,45.84,0,0,0,19.54-19.54c6.61-12.36,9.11-24.55,9.27-67.49V189.92c0-46.79-2.44-59.41-9.28-72.21a45.84,45.84,0,0,0-19.54-19.54C669.93,91.56,657.74,89.06,614.8,88.9ZM233.33,493.33A73.34,73.34,0,1,1,160,566.67,73.35,73.35,0,0,1,233.33,493.33Z&apos;/%3E%3C/g%3E%3C/svg%3E"></link></head><body class="full-width small-font"><header><div class="image"></div><div class="title"><div class="banner"><div class="icon"></div></div><div data-title="基本类型" class="main-title"></div></div></header><article><details id="viKhgJTgPPSZM9D45haJWD" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">数值</span></summary><details id="vdYXwAk1jMHrdDJFh9mHHU" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">整数</span></summary><details id="3nzVG7tbx3r3bmPaKMnt29" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">有符号整数</span></summary><div id="oPmtzJShVmb94rc7xguJhe" class="wolai-block wolai-text"><div><span class="inline-wrap"><code>i8</code></span><span class="inline-wrap">, </span><span class="inline-wrap"><code>i16</code></span><span class="inline-wrap">, </span><span class="inline-wrap"><code>i32</code></span><span class="inline-wrap">, </span><span class="inline-wrap"><code>i64</code></span><span class="inline-wrap">, </span><span class="inline-wrap"><code>isize</code></span></div></div></details><details id="kNijjiRRrvQE9FAnj9wVTc" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">无符号整数</span></summary><div id="oTnCZ3AM1akJWJGcCTgED6" class="wolai-block wolai-text"><div><span class="inline-wrap"><code>u8</code></span><span class="inline-wrap">, </span><span class="inline-wrap"><code>u16</code></span><span class="inline-wrap">, </span><span class="inline-wrap"><code>u32</code></span><span class="inline-wrap">, </span><span class="inline-wrap"><code>u64</code></span><span class="inline-wrap">, </span><span class="inline-wrap"><code>usize</code></span></div></div></details></details><details id="cUvhZHFeMDXkXEKJs8DMgw" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">浮点数</span></summary><aside id="9EnesSeob81Vcci3S8jXX3" class="bg-cultured wolai-block"><div data-symbol="📌" class="icon"></div><span class="inline-wrap">为了避免上面说的两个陷阱，你需要遵守以下准则：
1. 避免在浮点数上测试相等性
2. 当结果在数学上可能存在未定义时，需要格外的小心</span></aside><details id="6LceCdwtgLhmUhwdptnRop" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">单精度</span></summary><div id="2RNVCGwUY7EgoQNv4MX5nD" class="wolai-block wolai-text"><div><span class="inline-wrap"><code>f32</code></span><span class="inline-wrap"> 类型是单精度浮点型</span></div></div></details><details id="2ibRj1jAYymcacffiyWEjY" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">双</span><span class="inline-wrap">精度</span></summary><div id="2QsBimnhhgPDN9qavz3Xq4" class="wolai-block wolai-text"><div><span class="inline-wrap"><code>f64</code></span><span class="inline-wrap"> 为双精度，是默认的推断类型</span></div></div></details><details id="kjF5gpoNujTPtcSWvABEAv" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">陷阱</span></summary><ol class="wolai-block"><li id="kVnsDtj31bxjZ2nqobbfWR"><div class="marker"></div><span class="inline-wrap"><b>浮点数往往是你想要数字的近似表达</b></span><span class="inline-wrap"> 浮点数类型是基于二进制实现的，但是我们想要计算的数字往往是基于十进制，例如 </span><span class="inline-wrap"><code>0.1</code></span><span class="inline-wrap"> 在二进制上并不存在精确的表达形式，但是在十进制上就存在。这种不匹配性导致一定的歧义性，更多的，虽然浮点数能代表真实的数值，但是由于底层格式问题，它往往受限于定长的浮点数精度，如果你想要表达完全精准的真实数字，只有使用无限精度的浮点数才行</span></li><li id="faXACLjYM3w1eo2LonyKTn"><div class="marker"></div><span class="inline-wrap"><b>浮点数在某些特性上是反直觉的</b></span><span class="inline-wrap"> 例如大家都会觉得浮点数可以进行比较，对吧？是的，它们确实可以使用 </span><span class="inline-wrap"><code>&gt;</code></span><span class="inline-wrap">，</span><span class="inline-wrap"><code>&gt;=</code></span><span class="inline-wrap"> 等进行比较，但是在某些场景下，这种直觉上的比较特性反而会害了你。因为 </span><span class="inline-wrap"><code>f32</code></span><span class="inline-wrap"> ， </span><span class="inline-wrap"><code>f64</code></span><span class="inline-wrap"> 上的比较运算实现的是 </span><span class="inline-wrap"><code>std::cmp::PartialEq</code></span><span class="inline-wrap"> 特征(类似其他语言的接口)，但是并没有实现 </span><span class="inline-wrap"><code>std::cmp::Eq</code></span><span class="inline-wrap"> 特征，但是后者在其它数值类型上都有定义。
用一个例子来举例：Rust 的 </span><span class="inline-wrap"><code>HashMap</code></span><span class="inline-wrap"> 数据结构，是一个 KV 类型的 Hash Map 实现，它对于 </span><span class="inline-wrap"><code>K</code></span><span class="inline-wrap"> 没有特定类型的限制，但是要求能用作 </span><span class="inline-wrap"><code>K</code></span><span class="inline-wrap"> 的类型必须实现了 </span><span class="inline-wrap"><code>std::cmp::Eq</code></span><span class="inline-wrap"> 特征，因此这意味着你无法使用浮点数作为 </span><span class="inline-wrap"><code>HashMap</code></span><span class="inline-wrap"> 的 </span><span class="inline-wrap"><code>Key</code></span><span class="inline-wrap">，来存储键值对，但是作为对比，Rust 的整数类型、字符串类型、布尔类型都实现了该特征，因此可以作为 </span><span class="inline-wrap"><code>HashMap</code></span><span class="inline-wrap"> 的 </span><span class="inline-wrap"><code>Key</code></span><span class="inline-wrap">。</span></li></ol></details><div id="pzYZMnH9b4fHLTMTNX7d42" class="wolai-block wolai-text"><div><span class="inline-wrap"><a href="https://course.rs/basic/base-type/numbers.html#浮点类型"><span>https://course.rs/basic/base-type/numbers.html#浮点类型</span></a></span></div></div></details><details id="u93sd1KZCuBJrEh7wwAmfY" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">字面值</span></summary><div id="bbs6qztaqbJBoAcbQjTrvD" class="wolai-block wolai-simple-table"><table><thead><tr><th style="width: 100px"><span class="inline-wrap">数字字面量</span></th><th style="width: 100px"><span class="inline-wrap">示例</span></th></tr></thead><tbody><tr><td><span class="inline-wrap">十进制</span></td><td><span class="inline-wrap"><code>98_222</code></span></td></tr><tr><td><span class="inline-wrap">十六进制</span></td><td><span class="inline-wrap"><code>0xff</code></span></td></tr><tr><td><span class="inline-wrap">八进制</span></td><td><span class="inline-wrap"><code>0o77</code></span></td></tr><tr><td><span class="inline-wrap">二进制</span></td><td><span class="inline-wrap"><code>0b1111_0000</code></span></td></tr><tr><td><span class="inline-wrap">字节 (仅限于 </span><span class="inline-wrap"><code>u8</code></span><span class="inline-wrap">)</span></td><td><span class="inline-wrap"><code>b&#39;A&#39;</code></span></td></tr></tbody></table></div></details><details id="oyvWkQn1XmQDyZ3rZm4QfE" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">溢出</span></summary><details id="ntozkYmGSnqu7aaEAH3bBa" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">debug<span class="jill"></span>模式</span></summary><div id="7NC1XZdEqxfgz6kfJ8xSC8" class="wolai-block wolai-text"><div><span class="inline-wrap">程序将崩溃</span></div></div></details><details id="uta9x2UbHBR8e6pZuBkL5b" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">release<span class="jill"></span>模式</span></summary><div id="eFdpMZtdaH1wh6FsCzgzfR" class="wolai-block wolai-text"><div><span class="inline-wrap">补码循环（大于该类型最大值的数值会被补码转换成该类型能够支持的对应数字的最小值。）</span></div></div></details><details id="6yD4R4hVePXAxPpYkpZQjT" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">显式处理溢出</span></summary><details id="4exaDSnpXdP7qpvWin8yod" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">使用 </span><span class="inline-wrap"><code>wrapping_*</code></span><span class="inline-wrap"> 方法在所有模式下都按照补码循环溢出规则处理，例如 </span><span class="inline-wrap"><code>wrapping_add</code></span></summary><code-block id="gjmv2CdTLC6c6azEEoFbKL" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> a <span class="token punctuation">:</span> <span class="token keyword">u8</span> <span class="token operator">=</span> <span class="token number">255</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> b <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">wrapping_add</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 19</span>
<span class="token punctuation">}</span></pre></div></code-block></details><ul class="wolai-block"><li id="vYAiujp5Nmy9KPdk5pMnhD"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">如果使用 </span><span class="inline-wrap"><code>checked_*</code></span><span class="inline-wrap"> 方法时发生溢出，则返回 </span><span class="inline-wrap"><code>None</code></span><span class="inline-wrap"> 值</span></li><li id="rUC2VUjHL6nAGfXRz98Qmr"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">使用 </span><span class="inline-wrap"><code>overflowing_*</code></span><span class="inline-wrap"> 方法返回该值和一个指示是否存在溢出的布尔值</span></li><li id="sZHYTXp2WDqBVfR3mpf7V1"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">使用 </span><span class="inline-wrap"><code>saturating_*</code></span><span class="inline-wrap"> 方法使值达到最小值或最大值</span></li></ul><div id="a4AuqX8G15Vg7DJmaDrgph" class="wolai-block wolai-text"><div><span class="inline-wrap">下面是一个演示</span><span class="inline-wrap"><code>wrapping_*</code></span><span class="inline-wrap">方法的示例：</span></div></div><div id="dFetbQdDdHSQKnoFFpwT4E" class="wolai-block wolai-text"><div><span class="inline-wrap">·</span></div></div></details></details></details><details id="5guknpNA4Nr78zZwbDHDGW" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">字符</span></summary><div id="uje1MuxCjeaUEaTNMxe9Wu" class="wolai-block wolai-text"><div><span class="inline-wrap">表示单个 Unicode 字符，以 Unicode 标量值的形式存储，存储为 4 个字节</span></div></div><details id="aSAiAWPcuv5YBy7WNAFrJX" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">声明方式</span></summary><code-block id="r6csz6YmgvX5uc5i1r9oZU" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token keyword">let</span> c1 <span class="token operator">=</span> <span class="token char">'中'</span><span class="token punctuation">;</span></pre></div></code-block></details><details id="77d3auwKCDbPFqyzi3cHSJ" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">获取字节存储量方式</span></summary><code-block id="vvWx7qdRBfqUxVSM8ubLfX" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token keyword">use</span> <span class="token namespace">std<span class="token punctuation">::</span>mem<span class="token punctuation">::</span></span>size_of_val<span class="token punctuation">;</span>
<span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> c1 <span class="token operator">=</span> <span class="token char">'a'</span><span class="token punctuation">;</span>
    <span class="token macro property">assert_eq!</span><span class="token punctuation">(</span><span class="token function">size_of_val</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>c1<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    
    <span class="token keyword">let</span> c2 <span class="token operator">=</span> <span class="token char">'中'</span><span class="token punctuation">;</span>
    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"字符长度: {}"</span><span class="token punctuation">,</span> c2<span class="token punctuation">.</span><span class="token function">len_utf8</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 输出: 字符长度: 3</span>
<span class="token punctuation">}</span>
</pre></div></code-block></details></details><details id="mBishNkfpBWgHZCraHwWTN" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">字符串（str）</span></summary><div id="6yoNizdTBNhaFYvvuEYzWD" class="wolai-block wolai-text"><div><span class="inline-wrap">存储：字符串类型在内存中以 UTF-8 编码的字节数组形式存储，</span></div></div><div id="ndxt7d4i9hpyxrem7DA8dt" class="wolai-block wolai-text"><div><span class="blue inline-wrap">性质：</span><span class="inline-wrap">是切片，是不可变都的引用（地址），</span><span class="red inline-wrap">不包含所有权</span><span class="inline-wrap">，因为被硬编码到程序代码中</span></div></div><details id="6rK3SvA5FdzRyvdk7vei5R" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">字面量</span></summary><code-block id="kHjKas8FRwf1z4uTia257T" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token comment">// 类型为&amp;str，并非String类型</span>
<span class="token keyword">let</span> word <span class="token operator">=</span> <span class="token string">"hello world"</span><span class="token punctuation">;</span>
<span class="token comment">// 等同于</span>
<span class="token keyword">let</span> word<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token operator">=</span> <span class="token string">"hello world"</span><span class="token punctuation">;</span>

</pre></div></code-block></details><details id="2exdeyH8xSHFqNUct8kA5P" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">字符串切片（slice）</span></summary><div id="h5FPsje1d29kx4AYa474RR" class="wolai-block wolai-text"><div><span class="blue inline-wrap">说明：</span><span class="inline-wrap">字符串切片</span><span class="inline-wrap"><code>&amp;str</code></span><span class="inline-wrap">是对字符串的引用，它们不会拥有自己的内存分配，而是引用了其他地方存储的字符串数据。</span></div></div><code-block id="cogiywBE34yuSbe55KJQB2" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token keyword">let</span> word <span class="token operator">=</span> <span class="token string">"hello world"</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> hello<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span> <span class="token operator">=</span> <span class="token operator">&amp;</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">..</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// let hello = &amp;s[..5];</span>
<span class="token keyword">let</span> world <span class="token operator">=</span> <span class="token operator">&amp;</span>s<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">..</span><span class="token number">11</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</pre></div></code-block></details><details id="9ZErDoPp6xD6uxLTTHvRAL" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">类型转换</span></summary><details id="j5GS6XAsSViCzSqPYxNWvG" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap"><code>&amp;str</code></span><span class="inline-wrap"> → </span><span class="inline-wrap"><code>String</code></span></summary><code-block id="khCsmn8i1jSLvRj6ahrU5m" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token comment">// 方法一</span>
<span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello,world"</span><span class="token punctuation">)</span>
<span class="token comment">// 方法二</span>
<span class="token string">"hello,world"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</pre></div></code-block></details><details id="dQrc4Aig2zPHUuwRDajXUY" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap"><code>String</code></span><span class="inline-wrap"> → </span><span class="inline-wrap"><code>&amp;str</code></span></summary><code-block id="mm782bWgojHXFKpuf2FP1D" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"hello,world!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">say_hello</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">say_hello</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s<span class="token punctuation">[</span><span class="token punctuation">..</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">say_hello</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">as_str</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">fn</span> <span class="token function-definition function">say_hello</span><span class="token punctuation">(</span>s<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block></details><details id="czHdgxCTQYcB2HaC57Dj1p" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap"><code>Vec&lt;u8</code></span><span class="inline-wrap"> → </span><span class="inline-wrap"><code>String</code></span></summary><div id="eALxsHKXkBgVssszUpMz5g" class="wolai-block wolai-text"><div><span class="inline-wrap"><code>String::from_utf8()</code></span><span class="inline-wrap"> 函数将 Vec&lt;u8&gt; 转换为 String，如果转换成功，则返回一个 String 类型的值，如果转换失败，则返回一个 Result&lt;String, Error&gt; 类型的值。</span></div></div><code-block id="c8336BHPZJdLxHBvdwaQVH" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token keyword">let</span> bytes <span class="token operator">=</span> <span class="token macro property">vec!</span><span class="token punctuation">[</span><span class="token number">0x68</span><span class="token punctuation">,</span> <span class="token number">0x65</span><span class="token punctuation">,</span> <span class="token number">0x6c</span><span class="token punctuation">,</span> <span class="token number">0x6c</span><span class="token punctuation">,</span> <span class="token number">0x6f</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> string <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">::</span><span class="token function">from_utf8</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></div></code-block></details></details><details id="fkS5YhbRAFnhdssXX6gywV" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">反转</span></summary><code-block id="kJBkTpTzhYcA85t4gCUkN8" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">reverse</span><span class="token punctuation">(</span>input<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">String</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token keyword">mut</span> ch<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token keyword">char</span><span class="token operator">></span> <span class="token operator">=</span> input<span class="token punctuation">.</span><span class="token function">chars</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ch<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ch<span class="token punctuation">.</span><span class="token function">into_iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</pre></div></code-block></details></details><details id="r2xxYDfmQQacXmkfH7c3M6" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">序列</span></summary><div id="jVj2jpWy6VLBikUgGbzEWg" class="wolai-block wolai-text"><div><span class="inline-wrap">序列只允许用于数字或字符类型，原因是：它们可以连续，同时编译器在编译期可以检查该序列是否为空，字符和数字值是 Rust 中仅有的可以用于判断是否为空的类型。如下是一个使用字符类型序列的例子：</span></div></div><div id="onJ5TX75eH911NyTPjPa4N" class="wolai-block wolai-text"><div><span class="blue inline-wrap">作用：</span><span class="inline-wrap">生成连续的数值，例如 </span><span class="inline-wrap"><code>1..5</code></span><span class="inline-wrap">，生成从 1 到 4 的连续数字，不包含 5 ；</span><span class="inline-wrap"><code>1..=5</code></span><span class="inline-wrap">，生成从 1 到 5 的连续数字，包含 5，</span></div></div><div id="gf2iUGQghJ6mjNdYmuBuKR" class="wolai-block wolai-text"><div><span class="blue inline-wrap">用途：</span><span class="inline-wrap">常常用于循环中</span></div></div><details id="2tCYxyeeiJRUXKBRecdEqN" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">数字序列</span></summary><code-block id="jZ7bDPG4i7ontaC4mZReE6" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token number">1</span><span class="token punctuation">..=</span><span class="token number">5</span> <span class="token punctuation">{</span>
  <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block><div id="vYp76dMuSHeRPkvKZJwEAN" class="wolai-block wolai-text"><div><span class="inline-wrap">最终程序输出:</span></div></div><div id="w6CTEVgrtHbn5oAuwhGS2N" class="wolai-block wolai-text"><div><span class="inline-wrap"><code>1 2 3 4 5</code></span><span class="inline-wrap"> </span></div></div></details><details id="dS3a3M4DRMwfrbh8jmUU5b" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">字符序列</span></summary><code-block id="erEJtVHMUVjkqsyEaugcxc" class="wolai-block"><div class="wolai-pre"><div data-lang="Rust" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token char">'a'</span><span class="token punctuation">..=</span><span class="token char">'z'</span> <span class="token punctuation">{</span>
    <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"{}"</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></div></code-block></details></details><details id="tshWPRE1P3dioo74jz7w8W" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">布尔</span></summary><div id="g9UYYiG7gv72GNBgXaur4N" class="wolai-block wolai-text"><div><span class="inline-wrap">true<span class="jill"></span>和<span class="jill"></span>false</span></div></div></details><details id="fWbmjX7rPhn3yvhWVmFStQ" class="wolai-block"><summary><div class="marker"></div><span class="inline-wrap">单元</span></summary><div id="9kCRqAqPgqoc5DDY7Hpkb6" class="wolai-block wolai-text"><div><span class="inline-wrap"> 即 </span><span class="inline-wrap"><code>()</code></span><span class="inline-wrap"> ，其唯一的值也是 </span><span class="inline-wrap"><code>()</code></span></div></div><div id="o65RSwCqoLjWDjPKNsDixe" class="wolai-block wolai-text"><div><span class="blue inline-wrap">例：</span><span class="inline-wrap"><code>main</code></span><span class="inline-wrap"> 函数就返回这个单元类型 </span><span class="inline-wrap"><code>()</code></span><span class="inline-wrap">，例如常见的 </span><span class="inline-wrap"><code>println!()</code></span><span class="inline-wrap"> 的返回值也是单元类型 </span><span class="inline-wrap"><code>()</code></span><span class="inline-wrap">。再比如，你可以用 </span><span class="inline-wrap"><code>()</code></span><span class="inline-wrap"> 作为 </span><span class="inline-wrap"><code>map</code></span><span class="inline-wrap"> 的值，表示我们不关注具体的值，只关注 </span><span class="inline-wrap"><code>key</code></span><span class="inline-wrap">。 这种用法和 Go 语言的 </span><span class="inline-wrap"><i><b>struct{}</b></i></span><span class="inline-wrap"> 类似，可以作为一个值用来占位，但是完全</span><span class="inline-wrap"><b>不占用</b></span><span class="inline-wrap">任何内存。</span></div></div></details></article><footer></footer></body></html>