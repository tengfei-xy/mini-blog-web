<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="../../../../css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="../../../../css/prism.min.css"/><link rel="stylesheet" type="text/css" href="../../../../css/katex.min.css"/><link rel="stylesheet" type="text/css" href="../../../../css/wolai.css"/><title>核心概念 - wolai 笔记</title><link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; viewBox=&apos;0 0 800 800&apos;%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fff;%7D%3C/style%3E%3C/defs%3E%3Cg%3E%3Cpath class=&apos;cls-1&apos; d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Z&apos;/%3E%3Cpath d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Zm4.72,88.9H185.2L172.42,89c-32.78.62-43.68,3.24-54.71,9.14a45.84,45.84,0,0,0-19.54,19.54c-6.61,12.36-9.11,24.55-9.27,67.49V614.8L89,627.58c.62,32.78,3.24,43.68,9.14,54.71a45.84,45.84,0,0,0,19.54,19.54c12.36,6.61,24.55,9.11,67.49,9.27H610.08c46.79,0,59.41-2.44,72.21-9.28a45.84,45.84,0,0,0,19.54-19.54c6.61-12.36,9.11-24.55,9.27-67.49V189.92c0-46.79-2.44-59.41-9.28-72.21a45.84,45.84,0,0,0-19.54-19.54C669.93,91.56,657.74,89.06,614.8,88.9ZM233.33,493.33A73.34,73.34,0,1,1,160,566.67,73.35,73.35,0,0,1,233.33,493.33Z&apos;/%3E%3C/g%3E%3C/svg%3E"></link></head><body class="full-width small-font less-lead"><header><div class="image"></div><div class="title"><div class="banner"><div class="icon"></div></div><div data-title="核心概念" class="main-title"></div></div></header><article><h1 id="vWzFWWPgsTwKyrks81kQzU" class="wolai-block"><span class="inline-wrap">Manager</span></h1><div id="61JZiQG1cW2NPZti36aSF5" class="wolai-block wolai-text"><div><span class="inline-wrap">Manager 是 Oracle GoldenGate 的控制进程。 在启动 Extract 或 Replicat 之前，Manager 必须在 Oracle GoldenGate 配置中的每个系统上运行，并且在这些进程运行时，Manager 必须保持运行，以便执行资源管理功能。 一个 Manager 进程可以控制多个 Extract 或 Replicat 进程。 在 Windows 系统上，Manager 可以作为服务运行，LINUX<span class="jill"></span>上是个进程。
管理器执行以下功能：
1.启动 Oracle GoldenGate 进程
2.启动动态进程
3.维护进程的端口号
4.执行<span class="jill"></span>Trail<span class="jill"></span>管理
5.创建事件、错误和阈值报告</span></div></div><h1 id="iZ94puY1u7bJr76cKJgvoK" class="wolai-block"><span class="inline-wrap">Extract</span></h1><div id="wqb1d69f6EGXCbmvpAJB2g" class="wolai-block wolai-text"><div><span class="inline-wrap">当进行更改同步时，Extract<span class="jill"></span>会捕获<span class="jill"></span>schema<span class="jill"></span>执行的<span class="jill"></span>DML<span class="jill"></span>和<span class="jill"></span>DDL。Extract<span class="jill"></span>存储这些操作，直到<span class="jill"></span>Extract<span class="jill"></span>收到包含它们的事务的提交记录或回滚。当收到回滚时，Extract<span class="jill"></span>将放弃该事务的操作。收到提交时，Extract<span class="jill"></span>将事务持久化到一系列名为<span class="jill"></span>trail<span class="jill"></span>的文件中的，在那里，它排队以发送到目标系统。
另外，多个<span class="jill"></span>Extract<span class="jill"></span>可以同时对不同的对象进行操作。例如，两个<span class="jill"></span>Extract<span class="jill"></span>可以与两个<span class="jill"></span>Repliaat<span class="jill"></span>进程（有两个持久性<span class="jill"></span>Trial）并行提取和传输，以便在数据库大时最大限度地减少目标延迟。</span></div></div><h1 id="477p3h72EGRJANUH4B7sXU" class="wolai-block"><span class="inline-wrap">data pump</span></h1><div id="qCaszA8WXwjf3bp45rC6Lq" class="wolai-block wolai-text"><div><span class="inline-wrap">data pump<span class="jill"></span>是源<span class="jill"></span>OGG<span class="jill"></span>配置中的次要<span class="jill"></span>Extract。如果不使用数据泵，Extract<span class="jill"></span>必须将捕获的数据操作发送到目标上的远程<span class="jill"></span>Trial。然而，如果使用带有数据泵中，Extract<span class="jill"></span>写入源系统的<span class="jill"></span>Trail。data pump<span class="jill"></span>读取此<span class="jill"></span>Trail，并通过网络将数据操作发送到目标上的远程<span class="jill"></span>Trail。data pump<span class="jill"></span>增加了存储灵活性，还用于将主提取过程与<span class="jill"></span>TCP/IP<span class="jill"></span>活动隔离开来，防止网络和目标系统故障。data pump<span class="jill"></span>可以执行数据过滤、映射和转换。如果在源和目标数据中存在中间数据库，可以进行多次转换。同时以可以将<span class="jill"></span>trail<span class="jill"></span>发送到多个目标数据库。又或者是将多个源的数据整合到一个中心目标系统，这通常用来减少对目标系统的大量空间的需求。</span></div></div><h1 id="qX52MeKE9GdY3Cjm6KTVC9" class="wolai-block"><span class="inline-wrap">replicat</span></h1><div id="4cxNn1wGDKHraoqgFXSAt8" class="wolai-block wolai-text"><div><span class="inline-wrap">Replicat<span class="jill"></span>进程在目标系统上运行，读取目标系统上的<span class="jill"></span>trail，然后重建<span class="jill"></span>DML<span class="jill"></span>或<span class="jill"></span>DDL<span class="jill"></span>操作并将其应用于目标数据库。对于<span class="jill"></span>Replicat<span class="jill"></span>的配置，支持两种方式
初始加载：对于初始数据负载，Replicat<span class="jill"></span>可以将静态数据复制到目标数据库
更改同步：当配置为更改同步时，Replicat<span class="jill"></span>根据数据库类型，使用本机数据库接口将复制的源操作应用于目标系统。</span></div></div><h1 id="s4FMn6XN6ZWgXNEhpaA8ZN" class="wolai-block"><span class="inline-wrap">Trail</span></h1><div id="1ZXYuKaDLoftDd9A6NvcXe" class="wolai-block wolai-text"><div><span class="inline-wrap">为了更好的支持数据库更改的连续抽取复制，OGG<span class="jill"></span>将捕获的更改的记录暂时存储在一系列名为<span class="jill"></span>Trail<span class="jill"></span>的文件中。根据您配置甲骨文<span class="jill"></span>GoldenGate<span class="jill"></span>的方式，源系统、中介系统、目标系统或这些系统的任何组合上都可能存在<span class="jill"></span>Trail。在本地系统中，它被称为<span class="jill"></span>Trail。在远程系统上，它被称为远程<span class="jill"></span>Trail。每个事务中的所有操作都以顺序组织的事务单元写入<span class="jill"></span>Trail。这种设计确保了速度和数据的完整性。并且使用<span class="jill"></span>checkpoint<span class="jill"></span>机制来记录其读写位置，如果故障发生，则数据可以根据<span class="jill"></span>checkpoint<span class="jill"></span>记录的位置来重传 。</span></div></div><h1 id="x2fMoyPJjwpLN5vdEFrVRF" class="wolai-block"><span class="inline-wrap">checkpoint</span></h1><div id="tiSbUbFxLPF3qrjRvVWAsP" class="wolai-block wolai-text"><div><span class="inline-wrap">如果系统、网络或 Oracle GoldenGate 进程需要重新启动，它们可以通过防止数据丢失来提供容错能力。
checkpoint<span class="jill"></span>将进程的当前读取和写入位置存储到磁盘以用于恢复目的。checkpoint<span class="jill"></span>确保标记为同步的数据更改实际上被 Extract 捕获并由 Replicat 应用到目标，并且它们可以防止冗余处理。
Extract<span class="jill"></span>的是<span class="jill"></span>checkpoint：
Extract 为其在数据源和<span class="jill"></span>Trial<span class="jill"></span>中的位置创建<span class="jill"></span>checkpoint。因为 Extract 只捕获已提交的事务，所以它会<span class="jill"></span>Trial<span class="jill"></span>所有打开的事务中的操作，以防它们中的任何一个被提交。这需要 Extract 在事务日志中记录它当前正在读取的<span class="jill"></span>checkpoint，以及最早打开的事务的开始位置，该位置可以在当前日志或任何之前的日志中。
Extract<span class="jill"></span>的事务持久：
为了控制 Oracle 数据库中断后必须重新处理的事务日志量，Extract 还以特定时间间隔将当前状态和处理数据持久化到磁盘，包括长时间运行的状态和数据（如果有）事务。如果 Extract 在这些时间间隔中的一个之后停止，它可以从前一个时间间隔内或最后一个<span class="jill"></span>checkpoint<span class="jill"></span>的位置恢复，而不必返回到最早打开的长时间运行事务首次出现的日志位置。
Replicat<span class="jill"></span>的<span class="jill"></span>checkpoint：
Replicat 为其在<span class="jill"></span>Trail<span class="jill"></span>中的位置创建<span class="jill"></span>checkpoint。 Replicat 将这些<span class="jill"></span>checkpoint<span class="jill"></span>存储在一个表中，称为<span class="jill"></span>checkpoint<span class="jill"></span>表，在目标数据库中以及磁盘上的<span class="jill"></span>checkpoint<span class="jill"></span>文件中。checkpoint<span class="jill"></span>表以用户指定的名称和位置存储。checkpoint<span class="jill"></span>文件存储在 Oracle GoldenGate 目录的 dirchk 子目录中。在每个事务完成时，Replicat 将有关该事务的信息写入<span class="jill"></span>checkpoint<span class="jill"></span>表中，将事务与特定<span class="jill"></span>Trial<span class="jill"></span>文件中的唯一位置链接起来。 Replicat 还会在完成事务已经定期当前读取位置时将检查点写入特定目录下的<span class="jill"></span>checkpoint<span class="jill"></span>文件。
因为<span class="jill"></span>checkpoint<span class="jill"></span>表是数据库的一部分，并且受益于数据库恢复系统，它为 Replicat 提供了一个更高效的恢复点。checkpoint<span class="jill"></span>文件中的最后一个<span class="jill"></span>checkpoint<span class="jill"></span>可能不是最近的事务边界。它可能是 Replicat 尚未应用的事务的中间，或者已经应用的较早的事务。checkpoint<span class="jill"></span>表确保 Replicat 从正确的事务边界开始，这样每个事务只应用一次。checkpoint<span class="jill"></span>表中的信息在某些情况下可用于恢复，但主要用于目的，例如用于 GGSCI 中的 INFO 命令。
Oracle GoldenGate 环境的定期备份（包括<span class="jill"></span>Trial）应与您的数据库备份、恢复和保留策略相匹配。将数据库（及其<span class="jill"></span>checkpoint<span class="jill"></span>表）恢复到较早的时间段会导致 Replicat 重新定位到与该时间匹配的较早<span class="jill"></span>checkpoint。如果此时间段所需的<span class="jill"></span>Trial<span class="jill"></span>文件已从系统中老化，则必须从备份中恢复它们。</span></div></div><div id="n7GbKbEXkZ7pCxBLLqXJFg" class="wolai-block wolai-text"><div><span class="inline-wrap">checkpoint<span class="jill"></span>与进程间确认一起工作，以防止消息在网络中丢失。 Oracle GoldenGate 拥有专有的保证消息传递技术。</span></div></div><h1 id="nagXDqedFPrnHNyvjACYCy" class="wolai-block"><span class="inline-wrap">Collector</span></h1><div id="4ZAF5fHk1VtrSsfwb9dUN8" class="wolai-block wolai-text"><div><span class="inline-wrap">运作在目标系统后台的进程,接收从 TCP/IP 网络传输过来的数据库变化，并写到 Trail 文件里。
1.在从远程<span class="jill"></span>Extract<span class="jill"></span>到<span class="jill"></span>Manager<span class="jill"></span>的连接请求中，扫描并绑定到一个可用的端口，然后将端口号发送给<span class="jill"></span>Manager，以便分配给请求的<span class="jill"></span>Extract<span class="jill"></span>进程。
2.接收提取发送的提取数据库更改，并将其写入<span class="jill"></span>Trail。当需要网络连接时，管理器会自动启动<span class="jill"></span>Collector，因此<span class="jill"></span>Oracle GoldenGate<span class="jill"></span>用户不会与它交互。Collector<span class="jill"></span>只能从一个<span class="jill"></span>Extract<span class="jill"></span>接收信息，因此您使用的每个提取物都有一个<span class="jill"></span>Collector。当关联的<span class="jill"></span>Extract<span class="jill"></span>终止时，Collector<span class="jill"></span>终止。</span></div></div></article><footer></footer></body></html>