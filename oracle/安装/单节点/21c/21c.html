<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="../../../../css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="../../../../css/prism.min.css"/><link rel="stylesheet" type="text/css" href="../../../../css/katex.min.css"/><link rel="stylesheet" type="text/css" href="../../../../css/wolai.css"/><title>21c - wolai 笔记</title><link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; viewBox=&apos;0 0 800 800&apos;%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fff;%7D%3C/style%3E%3C/defs%3E%3Cg%3E%3Cpath class=&apos;cls-1&apos; d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Z&apos;/%3E%3Cpath d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Zm4.72,88.9H185.2L172.42,89c-32.78.62-43.68,3.24-54.71,9.14a45.84,45.84,0,0,0-19.54,19.54c-6.61,12.36-9.11,24.55-9.27,67.49V614.8L89,627.58c.62,32.78,3.24,43.68,9.14,54.71a45.84,45.84,0,0,0,19.54,19.54c12.36,6.61,24.55,9.11,67.49,9.27H610.08c46.79,0,59.41-2.44,72.21-9.28a45.84,45.84,0,0,0,19.54-19.54c6.61-12.36,9.11-24.55,9.27-67.49V189.92c0-46.79-2.44-59.41-9.28-72.21a45.84,45.84,0,0,0-19.54-19.54C669.93,91.56,657.74,89.06,614.8,88.9ZM233.33,493.33A73.34,73.34,0,1,1,160,566.67,73.35,73.35,0,0,1,233.33,493.33Z&apos;/%3E%3C/g%3E%3C/svg%3E"></link></head><body class="full-width small-font less-lead"><header><div class="image"></div><div class="title"><div class="banner"><div class="icon"></div></div><div data-title="21c" class="main-title"></div></div></header><article><div id="ikY7LKWNf5dovrgaxg1VSa" class="wolai-block wolai-text"><div><span class="inline-wrap">root<span class="jill"></span>用户基础环境</span></div></div><code-block id="1KxPMJ1Xmnnt6wiSZKGh34" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>mkdir <span class="token operator">-</span>p <span class="token operator">/</span>u01<span class="token operator">/</span>app<span class="token operator">/</span>oracle<span class="token operator">/</span>product<span class="token operator">/</span><span class="token number">21.3</span><span class="token number">.0</span><span class="token operator">/</span>db_1 <span class="token operator">/</span>u01<span class="token operator">/</span>app<span class="token operator">/</span>oraInventory</pre></div></code-block><div id="r63worYYMbnjyUiqwJYJkW" class="wolai-block wolai-text"><div><span class="inline-wrap">创建<span class="jill"></span>oracle<span class="jill"></span>用户、组</span></div></div><code-block id="s7GSGUbmaTHxj5b7ttW34M" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>groupadd oinstall
groupadd dba
groupadd kmdba
groupadd racdba
groupadd dgdba
groupadd backupdba
groupadd oper
useradd <span class="token operator">-</span><span class="token constant">G</span> oper<span class="token punctuation">,</span>dba<span class="token punctuation">,</span>kmdba<span class="token punctuation">,</span>racdba<span class="token punctuation">,</span>dgdba<span class="token punctuation">,</span>backupdba <span class="token operator">-</span>g oinstall <span class="token operator">-</span>s <span class="token operator">/</span>bin<span class="token operator">/</span>bash <span class="token operator">-</span>m <span class="token operator">-</span>d <span class="token operator">/</span>home<span class="token operator">/</span>oracle oracle</pre></div></code-block><div id="teZ3pmogPY9VVLkEz5bWSB" class="wolai-block wolai-text"><div><span class="inline-wrap">oracle<span class="jill"></span>用户</span></div></div><code-block id="4kAXotE7yMCYL9b7TVHTCJ" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token keyword module">export</span> <span class="token constant">ORACLE_SID</span><span class="token operator">=</span>oracle
<span class="token keyword module">export</span> <span class="token constant">ORACLE_BASE</span><span class="token operator">=</span><span class="token operator">/</span>u01<span class="token operator">/</span>app<span class="token operator">/</span>oracle
<span class="token keyword module">export</span> <span class="token constant">ORACLE_HOME</span><span class="token operator">=</span><span class="token operator">/</span>u01<span class="token operator">/</span>app<span class="token operator">/</span>oracle<span class="token operator">/</span>product<span class="token operator">/</span><span class="token number">21.3</span><span class="token number">.0</span><span class="token operator">/</span>db_1
<span class="token keyword module">export</span> <span class="token constant">NLS_LANG</span><span class="token operator">=</span><span class="token string">'Simplified Chinese_China.AL32UTF8'</span>
<span class="token constant">PATH</span><span class="token operator">=</span>$<span class="token constant">PATH</span><span class="token operator">:</span>$<span class="token constant">HOME</span><span class="token operator">/</span><span class="token punctuation">.</span><span class="token property-access">local</span><span class="token operator">/</span>bin<span class="token operator">:</span>$<span class="token constant">HOME</span><span class="token operator">/</span>bin<span class="token operator">:</span>$<span class="token constant">ORACLE_HOME</span><span class="token operator">/</span>bin
<span class="token keyword module">export</span> <span class="token constant">PATH</span></pre></div></code-block><code-block id="3usDUCD6jEosGqDTf5RmpT" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>yum install <span class="token operator">-</span>y ksh smartmontools policycoreutils<span class="token operator">-</span>python<span class="token operator">*</span></pre></div></code-block><code-block id="4FNFzzXy626CCaUjDirHWt" class="wolai-block"><div class="wolai-pre"><div data-lang="Ini" class="marker"></div><pre><span class="token key attr-name">oracle.install.responseFileVersion</span><span class="token punctuation">=</span><span class="token value attr-value">/oracle/install/rspfmt_dbinstall_response_schema_v21.0.0</span>
<span class="token key attr-name">oracle.install.option</span><span class="token punctuation">=</span><span class="token value attr-value">INSTALL_DB_SWONLY</span>
<span class="token key attr-name">UNIX_GROUP_NAME</span><span class="token punctuation">=</span><span class="token value attr-value">oinstall</span>
<span class="token key attr-name">INVENTORY_LOCATION</span><span class="token punctuation">=</span><span class="token value attr-value">/u01/app/oraInventory</span>
<span class="token key attr-name">ORACLE_HOME</span><span class="token punctuation">=</span><span class="token value attr-value">/u01/app/oracle/product/21.3.0/db_1</span>
<span class="token key attr-name">ORACLE_BASE</span><span class="token punctuation">=</span><span class="token value attr-value">/u01/app/oracle</span>
<span class="token key attr-name">oracle.install.db.InstallEdition</span><span class="token punctuation">=</span><span class="token value attr-value">EE</span>
<span class="token key attr-name">oracle.install.db.OSDBA_GROUP</span><span class="token punctuation">=</span><span class="token value attr-value">dba</span>
<span class="token key attr-name">oracle.install.db.OSOPER_GROUP</span><span class="token punctuation">=</span><span class="token value attr-value">oper</span>
<span class="token key attr-name">oracle.install.db.OSBACKUPDBA_GROUP</span><span class="token punctuation">=</span><span class="token value attr-value">backupdba</span>
<span class="token key attr-name">oracle.install.db.OSDGDBA_GROUP</span><span class="token punctuation">=</span><span class="token value attr-value">dgdba</span>
<span class="token key attr-name">oracle.install.db.OSKMDBA_GROUP</span><span class="token punctuation">=</span><span class="token value attr-value">kmdba</span>
<span class="token key attr-name">oracle.install.db.OSRACDBA_GROUP</span><span class="token punctuation">=</span><span class="token value attr-value">racdba</span>
<span class="token key attr-name">oracle.install.db.rootconfig.executeRootScript</span><span class="token punctuation">=</span><span class="token value attr-value">false</span>
<span class="token key attr-name">oracle.install.db.rootconfig.configMethod</span><span class="token punctuation">=</span>
<span class="token key attr-name">oracle.install.db.rootconfig.sudoPath</span><span class="token punctuation">=</span>
<span class="token key attr-name">oracle.install.db.rootconfig.sudoUserName</span><span class="token punctuation">=</span>
<span class="token key attr-name">oracle.install.db.CLUSTER_NODES</span><span class="token punctuation">=</span>
<span class="token key attr-name">oracle.install.db.config.starterdb.type</span><span class="token punctuation">=</span>
<span class="token key attr-name">oracle.install.db.config.starterdb.globalDBName</span><span class="token punctuation">=</span>
<span class="token key attr-name">oracle.install.db.config.starterdb.SID</span><span class="token punctuation">=</span>
<span class="token key attr-name">oracle.install.db.config.PDBName</span><span class="token punctuation">=</span>
<span class="token key attr-name">oracle.install.db.config.starterdb.characterSet</span><span class="token punctuation">=</span>
<span class="token key attr-name">oracle.install.db.config.starterdb.memoryOption</span><span class="token punctuation">=</span>
<span class="token key attr-name">oracle.install.db.config.starterdb.memoryLimit</span><span class="token punctuation">=</span>
<span class="token key attr-name">oracle.install.db.config.starterdb.password.ALL</span><span class="token punctuation">=</span>
<span class="token key attr-name">oracle.install.db.config.starterdb.password.SYS</span><span class="token punctuation">=</span>
<span class="token key attr-name">oracle.install.db.config.starterdb.password.SYSTEM</span><span class="token punctuation">=</span>
<span class="token key attr-name">oracle.install.db.config.starterdb.password.DBSNMP</span><span class="token punctuation">=</span>
<span class="token key attr-name">oracle.install.db.config.starterdb.password.PDBADMIN</span><span class="token punctuation">=</span>
<span class="token key attr-name">oracle.install.db.config.starterdb.managementOption</span><span class="token punctuation">=</span>
<span class="token key attr-name">oracle.install.db.config.starterdb.omsHost</span><span class="token punctuation">=</span>
<span class="token key attr-name">oracle.install.db.config.starterdb.omsPort</span><span class="token punctuation">=</span>
<span class="token key attr-name">oracle.install.db.config.starterdb.emAdminUser</span><span class="token punctuation">=</span>
<span class="token key attr-name">oracle.install.db.config.starterdb.emAdminPassword</span><span class="token punctuation">=</span>
<span class="token key attr-name">oracle.install.db.config.starterdb.enableRecovery</span><span class="token punctuation">=</span>
<span class="token key attr-name">oracle.install.db.config.starterdb.storageType</span><span class="token punctuation">=</span>
<span class="token key attr-name">oracle.install.db.config.starterdb.fileSystemStorage.dataLocation</span><span class="token punctuation">=</span>
<span class="token key attr-name">oracle.install.db.config.starterdb.fileSystemStorage.recoveryLocation</span><span class="token punctuation">=</span>
<span class="token key attr-name">oracle.install.db.config.asm.diskGroup</span><span class="token punctuation">=</span>
<span class="token key attr-name">oracle.install.db.config.asm.ASMSNMPPassword</span><span class="token punctuation">=</span></pre></div></code-block><div id="oNMDzMACcEKYCpFa7C8cGC" class="wolai-block wolai-text"><div><span class="inline-wrap">运行命令进行安装</span></div></div><code-block id="4DzNKgGbFbEaGGfBLCFFEy" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre><span class="token punctuation">.</span><span class="token operator">/</span>runInstaller <span class="token operator">-</span>silent <span class="token operator">-</span>responseFile install<span class="token operator">/</span>response<span class="token operator">/</span>db_install<span class="token punctuation">.</span><span class="token property-access">rsp</span></pre></div></code-block><div id="1BNuZ99yjmPFj3VuXZc8v9" class="wolai-block wolai-text"><div><span class="inline-wrap">如果出错，且命令结束，需删除</span></div></div><code-block id="ks9gu9YRwjrDi3f5WSu3VX" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>rm <span class="token operator">-</span>rf <span class="token operator">/</span>u01<span class="token operator">/</span>app<span class="token operator">/</span>oraInventory<span class="token comment">/*</span></pre></div></code-block><div id="vkZwoqmoqBP6BtGEStPmXw" class="wolai-block wolai-text"><div><span class="inline-wrap">创建监听</span></div></div><code-block id="oRggUhed6FwcVmYf3EKK1C" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>netca <span class="token operator">-</span>silent <span class="token operator">-</span>responsefile <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">pwd</span><span class="token template-punctuation string">`</span></span><span class="token operator">/</span>assistants<span class="token operator">/</span>netca<span class="token operator">/</span>netca<span class="token punctuation">.</span><span class="token property-access">rsp</span></pre></div></code-block><div id="vmFN6qte58BQxd88ybnk52" class="wolai-block wolai-text"><div><span class="inline-wrap">创建非<span class="jill"></span>pdb<span class="jill"></span>的<span class="jill"></span>dbca.rsp</span></div></div><code-block id="6qychoqTYdKwHVjf68qn68" class="wolai-block"><div class="wolai-pre"><div data-lang="Ini" class="marker"></div><pre><span class="token key attr-name">gdbName</span><span class="token punctuation">=</span><span class="token value attr-value">oracle</span>
<span class="token key attr-name">sid</span><span class="token punctuation">=</span><span class="token value attr-value">oracle</span>
<span class="token key attr-name">databaseConfigType</span><span class="token punctuation">=</span><span class="token value attr-value">SI</span>
<span class="token key attr-name">RACOneNodeServiceName</span><span class="token punctuation">=</span>
<span class="token key attr-name">policyManaged</span><span class="token punctuation">=</span>
<span class="token key attr-name">managementPolicy</span><span class="token punctuation">=</span>
<span class="token key attr-name">createServerPool</span><span class="token punctuation">=</span>
<span class="token key attr-name">serverPoolName</span><span class="token punctuation">=</span>
<span class="token key attr-name">cardinality</span><span class="token punctuation">=</span>
<span class="token key attr-name">force</span><span class="token punctuation">=</span>
<span class="token key attr-name">pqPoolName</span><span class="token punctuation">=</span>
<span class="token key attr-name">pqCardinality</span><span class="token punctuation">=</span>
<span class="token key attr-name">createAsContainerDatabase</span><span class="token punctuation">=</span><span class="token value attr-value">false</span>
<span class="token key attr-name">numberOfPDBs</span><span class="token punctuation">=</span>
<span class="token key attr-name">pdbName</span><span class="token punctuation">=</span>
<span class="token key attr-name">useLocalUndoForPDBs</span><span class="token punctuation">=</span><span class="token value attr-value">false</span>
<span class="token key attr-name">pdbAdminPassword</span><span class="token punctuation">=</span>
<span class="token key attr-name">nodelist</span><span class="token punctuation">=</span>
<span class="token key attr-name">templateName</span><span class="token punctuation">=</span><span class="token value attr-value">General_Purpose.dbc</span>
<span class="token key attr-name">sysPassword</span><span class="token punctuation">=</span><span class="token value attr-value">password</span>
<span class="token key attr-name">systemPassword</span><span class="token punctuation">=</span><span class="token value attr-value">password</span>
<span class="token key attr-name">oracleHomeUserPassword</span><span class="token punctuation">=</span>
<span class="token key attr-name">emConfiguration</span><span class="token punctuation">=</span>
<span class="token key attr-name">emExpressPort</span><span class="token punctuation">=</span><span class="token value attr-value">5500</span>
<span class="token key attr-name">runCVUChecks</span><span class="token punctuation">=</span>
<span class="token key attr-name">dbsnmpPassword</span><span class="token punctuation">=</span>
<span class="token key attr-name">omsHost</span><span class="token punctuation">=</span>
<span class="token key attr-name">omsPort</span><span class="token punctuation">=</span>
<span class="token key attr-name">emUser</span><span class="token punctuation">=</span>
<span class="token key attr-name">emPassword</span><span class="token punctuation">=</span>
<span class="token key attr-name">dvConfiguration</span><span class="token punctuation">=</span>
<span class="token key attr-name">dvUserName</span><span class="token punctuation">=</span>
<span class="token key attr-name">dvUserPassword</span><span class="token punctuation">=</span>
<span class="token key attr-name">dvAccountManagerName</span><span class="token punctuation">=</span>
<span class="token key attr-name">dvAccountManagerPassword</span><span class="token punctuation">=</span>
<span class="token key attr-name">olsConfiguration</span><span class="token punctuation">=</span>
<span class="token key attr-name">datafileJarLocation</span><span class="token punctuation">=</span>
<span class="token key attr-name">datafileDestination</span><span class="token punctuation">=</span>
<span class="token key attr-name">recoveryAreaDestination</span><span class="token punctuation">=</span>
<span class="token key attr-name">storageType</span><span class="token punctuation">=</span>
<span class="token key attr-name">diskGroupName</span><span class="token punctuation">=</span>
<span class="token key attr-name">asmsnmpPassword</span><span class="token punctuation">=</span>
<span class="token key attr-name">recoveryGroupName</span><span class="token punctuation">=</span>
<span class="token key attr-name">characterSet</span><span class="token punctuation">=</span><span class="token value attr-value">AL32UTF8</span>
<span class="token key attr-name">nationalCharacterSet</span><span class="token punctuation">=</span>
<span class="token key attr-name">registerWithDirService</span><span class="token punctuation">=</span>
<span class="token key attr-name">dirServiceUserName</span><span class="token punctuation">=</span>
<span class="token key attr-name">dirServicePassword</span><span class="token punctuation">=</span>
<span class="token key attr-name">walletPassword</span><span class="token punctuation">=</span>
<span class="token key attr-name">listeners</span><span class="token punctuation">=</span>
<span class="token key attr-name">variablesFile</span><span class="token punctuation">=</span>
<span class="token key attr-name">variables</span><span class="token punctuation">=</span>
<span class="token key attr-name">initParams</span><span class="token punctuation">=</span>
<span class="token key attr-name">sampleSchema</span><span class="token punctuation">=</span>
<span class="token key attr-name">memoryPercentage</span><span class="token punctuation">=</span>
<span class="token key attr-name">databaseType</span><span class="token punctuation">=</span>
<span class="token key attr-name">automaticMemoryManagement</span><span class="token punctuation">=</span>
<span class="token key attr-name">totalMemory</span><span class="token punctuation">=</span></pre></div></code-block><div id="jbw6XwJQ1dYpYC9nNA62Hx" class="wolai-block wolai-text"><div><span class="inline-wrap">创建数据库</span></div></div><code-block id="mXfwq1WrK9FDBw9ihVBSoj" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre>dbca <span class="token operator">-</span>silent <span class="token operator">-</span>createDatabase <span class="token operator">-</span>responseFile <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">pwd</span><span class="token template-punctuation string">`</span></span><span class="token operator">/</span>assistants<span class="token operator">/</span>dbca<span class="token operator">/</span>dbca<span class="token punctuation">.</span><span class="token property-access">rsp</span></pre></div></code-block></article><footer></footer></body></html>