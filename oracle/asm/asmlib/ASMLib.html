<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="../../../css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="../../../css/prism.min.css"/><link rel="stylesheet" type="text/css" href="../../../css/katex.min.css"/><link rel="stylesheet" type="text/css" href="../../../css/wolai.css"/><title>ASMLib - wolai 笔记</title><link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; viewBox=&apos;0 0 800 800&apos;%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fff;%7D%3C/style%3E%3C/defs%3E%3Cg%3E%3Cpath class=&apos;cls-1&apos; d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Z&apos;/%3E%3Cpath d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Zm4.72,88.9H185.2L172.42,89c-32.78.62-43.68,3.24-54.71,9.14a45.84,45.84,0,0,0-19.54,19.54c-6.61,12.36-9.11,24.55-9.27,67.49V614.8L89,627.58c.62,32.78,3.24,43.68,9.14,54.71a45.84,45.84,0,0,0,19.54,19.54c12.36,6.61,24.55,9.11,67.49,9.27H610.08c46.79,0,59.41-2.44,72.21-9.28a45.84,45.84,0,0,0,19.54-19.54c6.61-12.36,9.11-24.55,9.27-67.49V189.92c0-46.79-2.44-59.41-9.28-72.21a45.84,45.84,0,0,0-19.54-19.54C669.93,91.56,657.74,89.06,614.8,88.9ZM233.33,493.33A73.34,73.34,0,1,1,160,566.67,73.35,73.35,0,0,1,233.33,493.33Z&apos;/%3E%3C/g%3E%3C/svg%3E"></link></head><body class="full-width small-font less-lead"><header><div class="image"></div><div class="title"><div class="banner"><div class="icon"></div></div><div data-title="ASMLib" class="main-title"></div></div></header><article><h1 id="iCswMzWc6mZEH9XWoB5DEt" class="wolai-block"><span class="inline-wrap">通过<span class="jill"></span>asmlib<span class="jill"></span>创建<span class="jill"></span>asm<span class="jill"></span>磁盘组</span></h1><h2 id="sQvMNHdupWHoiijTy1K42B" class="wolai-block"><span class="inline-wrap">安装依赖</span></h2><code-block id="3mX7KfgZixwHoFVDVNkQys" class="wolai-block"><div class="wolai-pre"><div data-lang="Bash" class="marker"></div><pre>$ <span class="token function">wget</span> https://yum.oracle.com/repo/OracleLinux/OL7/latest/x86_64/getPackage/oracleasm-support-2.1.11-2.el7.x86_64.rpm
$ <span class="token function">wget</span> https://download.oracle.com/otn_software/asmlib/oracleasmlib-2.0.12-1.el7.x86_64.rpm
$ yum <span class="token function">install</span> kmod-oracleasm
$ <span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> oracleasm-support-2.1.11-2.el7.x86_64.rpm
$ <span class="token function">rpm</span> <span class="token parameter variable">-ivh</span> oracleasmlib-2.0.12-1.el7.x86_64.rpm</pre></div></code-block><h2 id="p16FCWNcrc3xhU6GygGUC8" class="wolai-block"><span class="inline-wrap">基本配置</span></h2><div id="64irnfg2u59CYdbM3f5Qgg" class="wolai-block wolai-text"><div><span class="inline-wrap">注：以<span class="jill"></span>root<span class="jill"></span>用户启动<span class="jill"></span>oracleasm，且后续无需以设定的用户运行</span></div></div><code-block id="wBBuda44Vht3eqSwSiP5xh" class="wolai-block"><div class="wolai-pre"><div data-lang="Bash" class="marker"></div><pre>root@ora1 grid $ oracleasm configure <span class="token parameter variable">-i</span>
Configuring the Oracle ASM library driver.

This will configure the on-boot properties of the Oracle ASM library
driver.  The following questions will determine whether the driver is
loaded on boot and what permissions it will have.  The current values
will be shown <span class="token keyword">in</span> brackets <span class="token punctuation">(</span><span class="token string">'[]'</span><span class="token punctuation">)</span>.  Hitting <span class="token operator">&lt;</span>ENTER<span class="token operator">></span> without typing an
answer will keep that current value.  Ctrl-C will abort.

Default user to own the driver interface <span class="token punctuation">[</span><span class="token punctuation">]</span>: grid
Default group to own the driver interface <span class="token punctuation">[</span><span class="token punctuation">]</span>: oinstall
Start Oracle ASM library driver on boot <span class="token punctuation">(</span>y/n<span class="token punctuation">)</span> <span class="token punctuation">[</span>n<span class="token punctuation">]</span>: y
Scan <span class="token keyword">for</span> Oracle ASM disks on boot <span class="token punctuation">(</span>y/n<span class="token punctuation">)</span> <span class="token punctuation">[</span>y<span class="token punctuation">]</span>: y
Writing Oracle ASM library driver configuration: <span class="token keyword">done</span></pre></div></code-block><h2 id="6enZ9NkdZGg6KVqLjvZNQw" class="wolai-block"><span class="inline-wrap">初始化</span></h2><code-block id="8Ripnpnk7snuWDGkNQytWn" class="wolai-block"><div class="wolai-pre"><div data-lang="Bash" class="marker"></div><pre>root@ora1 grid $ oracleasm init
Creating /dev/oracleasm <span class="token function">mount</span> point: /dev/oracleasm
Loading module <span class="token string">"oracleasm"</span><span class="token builtin class-name">:</span> oracleasm
Configuring <span class="token string">"oracleasm"</span> to use device physical block size
Mounting ASMlib driver filesystem: /dev/oracleasm</pre></div></code-block><h2 id="oWavycxzu7AtkgMyFns4dz" class="wolai-block"><span class="inline-wrap">查看状态</span></h2><code-block id="7LgQJAvrmuVe4eWCGHwRVG" class="wolai-block"><div class="wolai-pre"><div data-lang="Bash" class="marker"></div><pre>root@ora1 grid $ oracleasm status
Checking <span class="token keyword">if</span> ASM is loaded: <span class="token function">yes</span>
Checking <span class="token keyword">if</span> /dev/oracleasm is mounted: <span class="token function">yes</span></pre></div></code-block><h2 id="tvgkwpm9L6hE4kP3GhQvym" class="wolai-block"><span class="inline-wrap">增加<span class="jill"></span>asm(至少需要三个)且被格式化</span></h2><code-block id="5nRadua1852fi3G8NH5KY3" class="wolai-block"><div class="wolai-pre"><div data-lang="Bash" class="marker"></div><pre>root@ora1 ~ $ oracleasm createdisk DB1 /dev/sdb1
Writing disk header: <span class="token keyword">done</span>
Instantiating disk: <span class="token keyword">done</span>
root@ora1 ~ $ oracleasm createdisk DB2 /dev/sdb2
Writing disk header: <span class="token keyword">done</span>
Instantiating disk: <span class="token keyword">done</span>
root@ora1 ~ $ oracleasm createdisk DB3 /dev/sdb3
Writing disk header: <span class="token keyword">done</span>
Instantiating disk: <span class="token keyword">done</span></pre></div></code-block><h2 id="gvcMqDs4HFqD9z6ZqBMSWM" class="wolai-block"><span class="inline-wrap">扫描并检查<span class="jill"></span>asm</span></h2><code-block id="fMy3SmYSzmfJuYVDiWgcf2" class="wolai-block"><div class="wolai-pre"><div data-lang="Bash" class="marker"></div><pre>root@ora1 ~ $ oracleasm scandisks
root@ora1 ~ $ oracleasm listdisks
DB1
DB2
DB3</pre></div></code-block></article><footer></footer></body></html>