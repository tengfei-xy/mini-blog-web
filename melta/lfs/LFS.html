<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="../../css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="../../css/prism.min.css"/><link rel="stylesheet" type="text/css" href="../../css/katex.min.css"/><link rel="stylesheet" type="text/css" href="../../css/wolai.css"/><title>LFS - wolai 笔记</title><link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; viewBox=&apos;0 0 800 800&apos;%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fff;%7D%3C/style%3E%3C/defs%3E%3Cg%3E%3Cpath class=&apos;cls-1&apos; d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Z&apos;/%3E%3Cpath d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Zm4.72,88.9H185.2L172.42,89c-32.78.62-43.68,3.24-54.71,9.14a45.84,45.84,0,0,0-19.54,19.54c-6.61,12.36-9.11,24.55-9.27,67.49V614.8L89,627.58c.62,32.78,3.24,43.68,9.14,54.71a45.84,45.84,0,0,0,19.54,19.54c12.36,6.61,24.55,9.11,67.49,9.27H610.08c46.79,0,59.41-2.44,72.21-9.28a45.84,45.84,0,0,0,19.54-19.54c6.61-12.36,9.11-24.55,9.27-67.49V189.92c0-46.79-2.44-59.41-9.28-72.21a45.84,45.84,0,0,0-19.54-19.54C669.93,91.56,657.74,89.06,614.8,88.9ZM233.33,493.33A73.34,73.34,0,1,1,160,566.67,73.35,73.35,0,0,1,233.33,493.33Z&apos;/%3E%3C/g%3E%3C/svg%3E"></link></head><body class="full-width small-font less-lead"><header><div class="image"></div><div class="title"><div class="banner"><div class="icon"></div></div><div data-title="LFS" class="main-title"></div></div></header><article><h1 id="dqjSN3rW5g7rTyFjnuJFNn" class="wolai-block"><span class="inline-wrap">版本</span></h1><div id="9jpeYQqLp6sJr85nK8srBb" class="wolai-bookmark wolai-block"><a href="https://www.linuxfromscratch.org/blfs/view/stable/">
      Beyond Linux® From Scratch (System V Edition)
    </a><div class="info-box"><div class="text-pane"><div data-title="
      Beyond Linux® From Scratch (System V Edition)
    "></div><div data-desc="This book follows on from the Linux From Scratch book. It introduces and guides the reader through additions to the system including networking, graphical interfaces, sound support, and printer and sc"></div><div class="icon-host"><div class="icon icon-image" style="background-image: url(&quot;https://www.linuxfromscratch.org/favicon.ico&quot;)"></div><div data-hostname="www.linuxfromscratch.org"></div></div></div><div class="preview-pane"></div></div></div><div id="5ogSRsJZYob6XgpjBYQ5iW" class="wolai-bookmark wolai-block"><a href="https://bf.mengyan1223.wang/lfs/zh_CN/11.0/">
      Linux From Scratch
    </a><div class="info-box"><div class="text-pane"><div data-title="
      Linux From Scratch
    "></div><div class="icon-host"><div class="icon icon-image" style="background-image: url(&quot;https://lfs.xry111.site/favicon.ico&quot;)"></div><div data-hostname="bf.mengyan1223.wang"></div></div></div><div class="preview-pane"></div></div></div><div id="sifDZhrsRXmKA25Gop2Lsg" class="wolai-bookmark wolai-block"><a href="https://bf.mengyan1223.wang/lfs/zh_CN/9.0/">
      Linux From Scratch
    </a><div class="info-box"><div class="text-pane"><div data-title="
      Linux From Scratch
    "></div><div class="icon-host"><div class="icon icon-image" style="background-image: url(&quot;https://lfs.xry111.site/favicon.ico&quot;)"></div><div data-hostname="bf.mengyan1223.wang"></div></div></div><div class="preview-pane"></div></div></div><div id="nKG8JszWwt3tfr1fv3as9B" class="wolai-bookmark wolai-block"><a href="https://www.linuxfromscratch.org">Welcome to Linux From Scratch!</a><div class="info-box"><div class="text-pane"><div data-title="Welcome to Linux From Scratch!"></div><div class="icon-host"><div class="icon icon-image" style="background-image: url(&quot;https://www.linuxfromscratch.org/favicon.ico&quot;)"></div><div data-hostname="www.linuxfromscratch.org"></div></div></div><div class="preview-pane"></div></div></div><div id="gdJPaucf6qvR7dMC6dsSEr" class="wolai-block wolai-text"><div><span class="inline-wrap">ID:29123</span></div></div><h2 id="tiRzX7sskLm56KX4YFR38p" class="wolai-block"><span class="inline-wrap">11.0 LFS<span class="jill"></span>注意事项</span></h2><ol class="wolai-block"><li id="wguYomMRbybf4LAcouSTTe"><div class="marker"></div><span class="inline-wrap">chroot<span class="jill"></span>之后编译安装<span class="jill"></span>gettext<span class="jill"></span>之前，应该先编译<span class="jill"></span>ncurses<span class="jill"></span>添加--enable-shared<span class="jill"></span>在<span class="jill"></span>chroot<span class="jill"></span>下编译一次。</span></li><li id="tGt3mY62DAiEDgKrApJu6u"><div class="marker"></div><span class="inline-wrap">部分软件如果</span><span class="inline-wrap"><code>make check</code></span><span class="inline-wrap">失败，且和官方提供的日志不一致，且之前编译过一次，应该先删除软件，重新解包并编译。</span></li></ol><h1 id="iYWegnVADVRk1HEwCsKEF3" class="wolai-block"><span class="inline-wrap">chroot</span></h1><code-block id="eAJ2b245V8iUa4nc9WFbjh" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all">mknod <span class="token operator">-</span>m <span class="token number">600</span> $<span class="token constant">LFS</span><span class="token operator">/</span>dev<span class="token operator">/</span>console c <span class="token number">5</span> <span class="token number">1</span>
mknod <span class="token operator">-</span>m <span class="token number">666</span> $<span class="token constant">LFS</span><span class="token operator">/</span>dev<span class="token operator">/</span><span class="token keyword null nil">null</span> c <span class="token number">1</span> <span class="token number">3</span>
mount <span class="token operator">-</span>v <span class="token operator">--</span>bind <span class="token operator">/</span>dev $<span class="token constant">LFS</span><span class="token operator">/</span>dev
mount <span class="token operator">-</span>v <span class="token operator">--</span>bind <span class="token operator">/</span>dev<span class="token operator">/</span>pts $<span class="token constant">LFS</span><span class="token operator">/</span>dev<span class="token operator">/</span>pts
mount <span class="token operator">-</span>vt proc proc $<span class="token constant">LFS</span><span class="token operator">/</span>proc
mount <span class="token operator">-</span>vt sysfs sysfs $<span class="token constant">LFS</span><span class="token operator">/</span>sys
mount <span class="token operator">-</span>vt tmpfs tmpfs $<span class="token constant">LFS</span><span class="token operator">/</span>run
<span class="token keyword control-flow">if</span> <span class="token punctuation">[</span> <span class="token operator">-</span>h $<span class="token constant">LFS</span><span class="token operator">/</span>dev<span class="token operator">/</span>shm <span class="token punctuation">]</span><span class="token punctuation">;</span> then
  mkdir <span class="token operator">-</span>pv $<span class="token constant">LFS</span><span class="token operator">/</span><span class="token function">$</span><span class="token punctuation">(</span>readlink $<span class="token constant">LFS</span><span class="token operator">/</span>dev<span class="token operator">/</span>shm<span class="token punctuation">)</span>
fi

chroot <span class="token string">"$LFS"</span> <span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>env <span class="token operator">-</span>i          \
    <span class="token constant">HOME</span><span class="token operator">=</span><span class="token operator">/</span>root <span class="token constant">TERM</span><span class="token operator">=</span><span class="token string">"$TERM"</span>            \
    <span class="token constant">PS1</span><span class="token operator">=</span><span class="token string">'(lfs chroot) \u:\w\$ '</span>        \
    <span class="token constant">PATH</span><span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">:</span><span class="token operator">/</span>usr<span class="token operator">/</span>sbin            \
    <span class="token operator">/</span>bin<span class="token operator">/</span>bash <span class="token operator">--</span>login
</pre></div></code-block><div id="o8mLzQ6grUUtdm6kdMLvvp" class="wolai-block wolai-text"><div><span class="inline-wrap">反<span class="jill"></span>chroot</span></div></div><code-block id="s7jZDQwSFnBQFW1MZGAahc" class="wolai-block"><div class="wolai-pre"><div data-lang="纯文本" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all">umount $<span class="token constant">LFS</span><span class="token operator">/</span>dev<span class="token punctuation">{</span><span class="token operator">/</span>pts<span class="token punctuation">,</span><span class="token punctuation">}</span>
umount $<span class="token constant">LFS</span><span class="token operator">/</span><span class="token punctuation">{</span>sys<span class="token punctuation">,</span>proc<span class="token punctuation">,</span>run<span class="token punctuation">}</span></pre></div></code-block><h2 id="j1Vg7XrZrhr7rRdKhMn5V7" class="wolai-block"><span class="inline-wrap">引导</span></h2><ol class="wolai-block"><li id="7vWnHmgnMp1ajaM74jeCEd"><div class="marker"></div><span class="inline-wrap">使用 UEFI 引导 LFS，按照 </span><span class="inline-wrap"><a href="https://www.linuxfromscratch.org/blfs/view/11.0/postlfs/grub-efi.html"><span>BLFS 页面</span></a></span><span class="inline-wrap">中的说明，安装支持 UEFI 的 GRUB。</span></li><li id="adGejB4hH3tuSebFzvSZ2V"><div class="marker"></div><span class="inline-wrap">使用 GRUB 引导 LFS，按照</span><span class="inline-wrap"><a href="https://bf.mengyan1223.wang/lfs/zh_CN/11.0/chapter10/grub.html"><span>GRUB 设定引导过程</span></a></span><span class="inline-wrap">中的说明。</span></li></ol><h1 id="ugQeEjLzNwGZuboTAHzDLH" class="wolai-block"><span class="inline-wrap">control</span></h1><ul class="wolai-block"><li id="hXEWSZNaBDha1sB8kwAfTu"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">对于中文，日文，韩文，以及其他一些语言文字，无论如何配置 Linux 控制台，都不可能正常显示所需要的字符。这些语言的用户应该安装 X 窗口系统，能够覆盖所需要的字符的字体，以及合适的输入法 (如 SCIM 支持许多语言的输入)。</span><span class="inline-wrap"><code>/etc/sysconfig/console</code></span><span class="inline-wrap"> 文件只控制 Linux 字符控制台的本地化。它和 X 窗口系统，ssh 连接，或者串口终端中的键盘布局设置和终端字体毫无关系。在这些情况下，不存在上述的两项限制。</span></li></ul><div id="9Tw5rkBr7nJ4j23tZRQPPb" class="wolai-block wolai-text"><div><span class="inline-wrap">grub.cfg</span></div></div><code-block id="fX75P87JhxBHKgrSbveTRK" class="wolai-block"><div class="wolai-pre"><div data-lang="Bash" class="marker"></div><pre style="white-space: pre-wrap; word-break: break-all"><span class="token comment"># Begin /boot/grub/grub.cfg</span>
<span class="token builtin class-name">set</span> <span class="token assign-left variable">default</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token builtin class-name">set</span> <span class="token assign-left variable">timeout</span><span class="token operator">=</span><span class="token number">5</span>
insmod ext2
<span class="token comment">#set root=(hd0,1)</span>

menuentry <span class="token string">"GNU/Linux, Linux 5.13.12-lfs-11.0"</span> <span class="token punctuation">{</span>
search --no-floppy --fs-uuid <span class="token parameter variable">--set</span> 70240ee0-0fc0-4ad2-a82e-c359b02df80b
linux   /boot/vmlinuz-5.13.12-lfs-11.0 <span class="token assign-left variable">root</span><span class="token operator">=</span>UUID<span class="token operator">=</span>70240ee0-0fc0-4ad2-a82e-c359b02df80b ro
<span class="token punctuation">}</span>
</pre></div></code-block></article><footer></footer></body></html>